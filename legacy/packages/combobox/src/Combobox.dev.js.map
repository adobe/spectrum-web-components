{
  "version": 3,
  "sources": ["Combobox.ts"],
  "sourcesContent": ["/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {\n    CSSResultArray,\n    html,\n    nothing,\n    TemplateResult,\n} from '@spectrum-web-components/base';\nimport { ComboboxBase } from './combobox.base.dev.js'\nimport {\n    ifDefined,\n    live,\n    repeat,\n} from '@spectrum-web-components/base/src/directives.js';\nimport '@spectrum-web-components/overlay/sp-overlay.js';\nimport '@spectrum-web-components/icons-ui/icons/sp-icon-chevron100.js';\nimport '@spectrum-web-components/popover/sp-popover.js';\nimport '@spectrum-web-components/menu/sp-menu.js';\nimport '@spectrum-web-components/menu/sp-menu-item.js';\nimport '@spectrum-web-components/picker-button/sp-picker-button.js';\nimport chevronStyles from '@spectrum-web-components/icon/src/spectrum-icon-chevron.css.js';\n\nimport styles from './combobox.css.js';\n\nexport class Combobox extends ComboboxBase {\n    public static override get styles(): CSSResultArray {\n        return [...super.styles, chevronStyles, styles];\n    }\n\n    protected renderAppliedLabel(): TemplateResult {\n        /**\n         * appliedLabel corresponds to `<label for=\"...\">`, which is overriden\n         * if user adds the `label` attribute manually to `<sp-combobox>`.\n         **/\n        const appliedLabel = this.label || this.appliedLabel;\n\n        return html`\n            ${this.pending\n                ? html`\n                      <span\n                          aria-hidden=\"true\"\n                          class=\"visually-hidden\"\n                          id=\"pending-label\"\n                      >\n                          ${this.pendingLabel}\n                      </span>\n                  `\n                : nothing}\n            ${this.value\n                ? html`\n                      <span\n                          aria-hidden=\"true\"\n                          class=\"visually-hidden\"\n                          id=\"applied-label\"\n                      >\n                          ${appliedLabel}\n                      </span>\n                      <slot name=\"label\" id=\"label\">\n                          <span class=\"visually-hidden\" aria-hidden=\"true\">\n                              ${this.value}\n                          </span>\n                      </slot>\n                  `\n                : html`\n                      <span hidden id=\"applied-label\">${appliedLabel}</span>\n                  `}\n        `;\n    }\n\n    protected renderLoader(): TemplateResult {\n        import(\n            '@spectrum-web-components/progress-circle/sp-progress-circle.js'\n        );\n        return html`\n            <sp-progress-circle\n                size=\"s\"\n                indeterminate\n                aria-hidden=\"true\"\n                class=\"progress-circle\"\n            ></sp-progress-circle>\n        `;\n    }\n\n    protected override renderField(): TemplateResult {\n        return html`\n            ${this.renderStateIcons()}\n            <input\n                aria-activedescendant=${ifDefined(\n                    this.activeDescendant\n                        ? `${this.activeDescendant.value}`\n                        : undefined\n                )}\n                aria-autocomplete=${ifDefined(\n                    this.autocomplete as 'list' | 'none'\n                )}\n                aria-controls=${ifDefined(\n                    this.open ? 'listbox-menu' : undefined\n                )}\n                aria-describedby=\"${this.helpTextId} tooltip\"\n                aria-expanded=\"${this.open ? 'true' : 'false'}\"\n                aria-label=${ifDefined(this.label || this.appliedLabel)}\n                aria-labelledby=\"pending-label applied-label label\"\n                aria-invalid=${ifDefined(this.invalid || undefined)}\n                autocomplete=\"off\"\n                @click=${this.toggleOpen}\n                @keydown=${this.handleComboboxKeydown}\n                id=\"input\"\n                class=\"input\"\n                role=\"combobox\"\n                type=\"text\"\n                .value=${live(this.displayValue)}\n                tabindex=\"0\"\n                @sp-closed=${this.handleClosed}\n                @sp-opened=${this.handleOpened}\n                maxlength=${ifDefined(\n                    this.maxlength > -1 ? this.maxlength : undefined\n                )}\n                minlength=${ifDefined(\n                    this.minlength > -1 ? this.minlength : undefined\n                )}\n                pattern=${ifDefined(this.pattern)}\n                @change=${this.handleChange}\n                @input=${this.handleInput}\n                @focus=${this.onFocus}\n                @blur=${this.onBlur}\n                ?disabled=${this.disabled}\n                ?required=${this.required}\n                ?readonly=${this.readonly}\n            />\n            ${this.pendingStateController.renderPendingState()}\n        `;\n    }\n    protected override render(): TemplateResult {\n        const width = (this.input || this).offsetWidth;\n\n        return html`\n            ${super.render()}\n            <sp-picker-button\n                aria-controls=\"listbox-menu\"\n                aria-describedby=\"${this.helpTextId} tooltip\"\n                aria-expanded=${this.open ? 'true' : 'false'}\n                aria-label=${ifDefined(this.label || this.appliedLabel)}\n                aria-labelledby=\"applied-label label\"\n                @click=${this.toggleOpen}\n                tabindex=\"-1\"\n                class=\"button ${this.focused\n                    ? 'focus-visible is-keyboardFocused'\n                    : ''}\"\n                ?disabled=${this.disabled}\n                ?focused=${this.focused}\n                ?quiet=${this.quiet}\n                size=${this.size}\n            ></sp-picker-button>\n            <sp-overlay\n                ?open=${this.open}\n                .triggerElement=${this.input}\n                offset=\"0\"\n                placement=\"bottom-start\"\n                .receivesFocus=${'false'}\n                role=\"presentation\"\n            >\n                <sp-popover\n                    id=\"listbox\"\n                    ?open=${this.open}\n                    role=\"presentation\"\n                    ?hidden=${this.availableOptions.length === 0}\n                >\n                    <sp-menu\n                        @change=${this.handleMenuChange}\n                        tabindex=\"-1\"\n                        aria-labelledby=\"label applied-label\"\n                        aria-label=${ifDefined(this.label || this.appliedLabel)}\n                        id=\"listbox-menu\"\n                        role=\"listbox\"\n                        selects=${ifDefined(\n                            this.autocomplete === 'none' ? 'single' : undefined\n                        )}\n                        .selected=${this.autocomplete === 'none' &&\n                        this.itemValue\n                            ? [this.itemValue]\n                            : []}\n                        style=\"min-width: ${width}px;\"\n                        size=${this.size}\n                    >\n                        ${this.overlayOpen\n                            ? repeat(\n                                  this.availableOptions,\n                                  (option) => option.value,\n                                  (option) => {\n                                      return html`\n                                          <sp-menu-item\n                                              id=\"${option.value}\"\n                                              ?focused=${this.activeDescendant\n                                                  ?.value === option.value}\n                                              aria-selected=${this\n                                                  .activeDescendant?.value ===\n                                              option.value\n                                                  ? 'true'\n                                                  : 'false'}\n                                              .value=${option.value}\n                                              .selected=${option.value ===\n                                              this.itemValue}\n                                              ?disabled=${option.disabled}\n                                          >\n                                              ${option.itemText}\n                                          </sp-menu-item>\n                                      `;\n                                  }\n                              )\n                            : html``}\n                        <slot\n                            hidden\n                            @slotchange=${this.handleSlotchange}\n                        ></slot>\n                    </sp-menu>\n                </sp-popover>\n            </sp-overlay>\n            ${this.renderAppliedLabel()}\n            <slot\n                aria-hidden=\"true\"\n                name=\"tooltip\"\n                id=\"tooltip\"\n                @slotchange=${this.handleTooltipSlotchange}\n            ></slot>\n        `;\n    }\n}\n"],
  "mappings": ";AAYA;AAAA,EAEI;AAAA,EACA;AAAA,OAEG;AACP,SAAS,oBAAoB;AAC7B;AAAA,EACI;AAAA,EACA;AAAA,EACA;AAAA,OACG;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO;AACP,OAAO,mBAAmB;AAE1B,OAAO,YAAY;AAEZ,aAAM,iBAAiB,aAAa;AAAA,EACvC,WAA2B,SAAyB;AAChD,WAAO,CAAC,GAAG,MAAM,QAAQ,eAAe,MAAM;AAAA,EAClD;AAAA,EAEU,qBAAqC;AAK3C,UAAM,eAAe,KAAK,SAAS,KAAK;AAExC,WAAO;AAAA,cACD,KAAK,UACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAMU,KAAK,YAAY;AAAA;AAAA,sBAG3B,OAAO;AAAA,cACX,KAAK,QACD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAMU,YAAY;AAAA;AAAA;AAAA;AAAA,gCAIR,KAAK,KAAK;AAAA;AAAA;AAAA,sBAIxB;AAAA,wDACsC,YAAY;AAAA,mBACjD;AAAA;AAAA,EAEf;AAAA,EAEU,eAA+B;AACrC,WACI,gEACJ;AACA,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAQX;AAAA,EAEmB,cAA8B;AAC7C,WAAO;AAAA,cACD,KAAK,iBAAiB,CAAC;AAAA;AAAA,wCAEG;AAAA,MACpB,KAAK,mBACC,GAAG,KAAK,iBAAiB,KAAK,KAC9B;AAAA,IACV,CAAC;AAAA,oCACmB;AAAA,MAChB,KAAK;AAAA,IACT,CAAC;AAAA,gCACe;AAAA,MACZ,KAAK,OAAO,iBAAiB;AAAA,IACjC,CAAC;AAAA,oCACmB,KAAK,UAAU;AAAA,iCAClB,KAAK,OAAO,SAAS,OAAO;AAAA,6BAChC,UAAU,KAAK,SAAS,KAAK,YAAY,CAAC;AAAA;AAAA,+BAExC,UAAU,KAAK,WAAW,MAAS,CAAC;AAAA;AAAA,yBAE1C,KAAK,UAAU;AAAA,2BACb,KAAK,qBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA,yBAK5B,KAAK,KAAK,YAAY,CAAC;AAAA;AAAA,6BAEnB,KAAK,YAAY;AAAA,6BACjB,KAAK,YAAY;AAAA,4BAClB;AAAA,MACR,KAAK,YAAY,KAAK,KAAK,YAAY;AAAA,IAC3C,CAAC;AAAA,4BACW;AAAA,MACR,KAAK,YAAY,KAAK,KAAK,YAAY;AAAA,IAC3C,CAAC;AAAA,0BACS,UAAU,KAAK,OAAO,CAAC;AAAA,0BACvB,KAAK,YAAY;AAAA,yBAClB,KAAK,WAAW;AAAA,yBAChB,KAAK,OAAO;AAAA,wBACb,KAAK,MAAM;AAAA,4BACP,KAAK,QAAQ;AAAA,4BACb,KAAK,QAAQ;AAAA,4BACb,KAAK,QAAQ;AAAA;AAAA,cAE3B,KAAK,uBAAuB,mBAAmB,CAAC;AAAA;AAAA,EAE1D;AAAA,EACmB,SAAyB;AACxC,UAAM,SAAS,KAAK,SAAS,MAAM;AAEnC,WAAO;AAAA,cACD,MAAM,OAAO,CAAC;AAAA;AAAA;AAAA,oCAGQ,KAAK,UAAU;AAAA,gCACnB,KAAK,OAAO,SAAS,OAAO;AAAA,6BAC/B,UAAU,KAAK,SAAS,KAAK,YAAY,CAAC;AAAA;AAAA,yBAE9C,KAAK,UAAU;AAAA;AAAA,gCAER,KAAK,UACf,qCACA,EAAE;AAAA,4BACI,KAAK,QAAQ;AAAA,2BACd,KAAK,OAAO;AAAA,yBACd,KAAK,KAAK;AAAA,uBACZ,KAAK,IAAI;AAAA;AAAA;AAAA,wBAGR,KAAK,IAAI;AAAA,kCACC,KAAK,KAAK;AAAA;AAAA;AAAA,iCAGX,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA,4BAKZ,KAAK,IAAI;AAAA;AAAA,8BAEP,KAAK,iBAAiB,WAAW,CAAC;AAAA;AAAA;AAAA,kCAG9B,KAAK,gBAAgB;AAAA;AAAA;AAAA,qCAGlB,UAAU,KAAK,SAAS,KAAK,YAAY,CAAC;AAAA;AAAA;AAAA,kCAG7C;AAAA,MACN,KAAK,iBAAiB,SAAS,WAAW;AAAA,IAC9C,CAAC;AAAA,oCACW,KAAK,iBAAiB,UAClC,KAAK,YACC,CAAC,KAAK,SAAS,IACf,CAAC,CAAC;AAAA,4CACY,KAAK;AAAA,+BAClB,KAAK,IAAI;AAAA;AAAA,0BAEd,KAAK,cACD;AAAA,MACI,KAAK;AAAA,MACL,CAAC,WAAW,OAAO;AAAA,MACnB,CAAC,WAAW;AAtM9C;AAuMsC,eAAO;AAAA;AAAA,oDAEO,OAAO,KAAK;AAAA,2DACP,UAAK,qBAAL,mBACL,WAAU,OAAO,KAAK;AAAA,gEACZ,UACX,qBADW,mBACO,WACvB,OAAO,QACD,SACA,OAAO;AAAA,uDACJ,OAAO,KAAK;AAAA,0DACT,OAAO,UACnB,KAAK,SAAS;AAAA,0DACF,OAAO,QAAQ;AAAA;AAAA,gDAEzB,OAAO,QAAQ;AAAA;AAAA;AAAA,MAG7B;AAAA,IACJ,IACA,MAAM;AAAA;AAAA;AAAA,0CAGM,KAAK,gBAAgB;AAAA;AAAA;AAAA;AAAA;AAAA,cAKjD,KAAK,mBAAmB,CAAC;AAAA;AAAA;AAAA;AAAA;AAAA,8BAKT,KAAK,uBAAuB;AAAA;AAAA;AAAA,EAGtD;AACJ;",
  "names": []
}
