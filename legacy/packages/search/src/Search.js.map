{
  "version": 3,
  "sources": ["Search.ts"],
  "sourcesContent": ["/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport {\n    CSSResultArray,\n    html,\n    nothing,\n    PropertyValues,\n    TemplateResult,\n} from '@spectrum-web-components/base';\nimport {\n    property,\n    query,\n} from '@spectrum-web-components/base/src/decorators.js';\nimport { ifDefined } from '@spectrum-web-components/base/src/directives.js';\n\nimport { Textfield } from '@spectrum-web-components/textfield';\nimport '@spectrum-web-components/button/sp-clear-button.js';\nimport '@spectrum-web-components/icons-workflow/icons/sp-icon-search.js';\n\nimport searchStyles from './search.css.js';\n\nconst stopPropagation = (event: Event): void => event.stopPropagation();\n\n/**\n * @element sp-search\n * @slot help-text - default or non-negative help text to associate to your form element\n * @slot negative-help-text - negative help text to associate to your form element when `invalid`\n *\n * @fires submit - The search form has been submitted.\n */\nexport class Search extends Textfield {\n    public static override get styles(): CSSResultArray {\n        return [...super.styles, searchStyles];\n    }\n\n    @property()\n    public action = '';\n\n    @property()\n    public override label = 'Search';\n\n    @property()\n    public method?: 'get' | 'post' | 'dialog';\n\n    @property()\n    public override placeholder = 'Search';\n\n    @property({ type: Boolean })\n    public holdValueOnEscape!: boolean;\n\n    @query('#form')\n    public form!: HTMLFormElement;\n\n    private handleSubmit(event: Event): void {\n        const applyDefault = this.dispatchEvent(\n            new Event('submit', {\n                cancelable: true,\n                bubbles: true,\n            })\n        );\n        if (!applyDefault) {\n            event.preventDefault();\n        }\n    }\n\n    private handleKeydown(event: KeyboardEvent): void {\n        const { code } = event;\n        if (code === 'Escape' && this.holdValueOnEscape) {\n            return;\n        }\n        if (!this.value || code !== 'Escape') {\n            return;\n        }\n        this.reset();\n    }\n\n    public async reset(): Promise<void> {\n        this.value = '';\n        await this.updateComplete;\n        this.focusElement.dispatchEvent(\n            new InputEvent('input', {\n                bubbles: true,\n                composed: true,\n            })\n        );\n        // The native `change` event on an `input` element is not composed,\n        // so this synthetic replication of a `change` event must not be\n        // either as the `Textfield` baseclass should only need to handle\n        // the native variant of this interaction.\n        this.focusElement.dispatchEvent(\n            new InputEvent('change', {\n                bubbles: true,\n            })\n        );\n    }\n\n    protected override renderField(): TemplateResult {\n        return html`\n            <form\n                action=${this.action}\n                id=\"form\"\n                method=${ifDefined(this.method)}\n                @submit=${this.handleSubmit}\n                @reset=${this.reset}\n                @keydown=${this.handleKeydown}\n            >\n                <sp-icon-search\n                    size=${this.size}\n                    class=\"icon magnifier icon-workflow icon-search\"\n                ></sp-icon-search>\n                ${super.renderField()}\n                ${this.value\n                    ? html`\n                          <sp-clear-button\n                              id=\"button\"\n                              label=\"Reset\"\n                              tabindex=\"-1\"\n                              type=\"reset\"\n                              size=${ifDefined(this.size)}\n                              @keydown=${stopPropagation}\n                          ></sp-clear-button>\n                      `\n                    : nothing}\n            </form>\n        `;\n    }\n\n    public override firstUpdated(changedProperties: PropertyValues): void {\n        super.firstUpdated(changedProperties);\n        // if holdValueOnEscape is not set, default to search type\n        if (!this.hasAttribute('holdValueOnEscape')) {\n            this.inputElement.setAttribute('type', 'search');\n        }\n    }\n\n    public override willUpdate(): void {\n        this.multiline = false;\n    }\n}\n"],
  "mappings": "qNAYA,OAEI,QAAAA,EACA,WAAAC,MAGG,gCACP,OACI,YAAAC,EACA,SAAAC,MACG,kDACP,OAAS,aAAAC,MAAiB,kDAE1B,OAAS,aAAAC,MAAiB,qCAC1B,MAAO,qDACP,MAAO,kEAEP,OAAOC,MAAkB,kBAEzB,MAAMC,EAAmBC,GAAuBA,EAAM,gBAAgB,EAS/D,aAAM,eAAeH,CAAU,CAA/B,kCAMH,KAAO,OAAS,GAGhB,KAAgB,MAAQ,SAMxB,KAAgB,YAAc,SAd9B,WAA2B,QAAyB,CAChD,MAAO,CAAC,GAAG,MAAM,OAAQC,CAAY,CACzC,CAoBQ,aAAaE,EAAoB,CAChB,KAAK,cACtB,IAAI,MAAM,SAAU,CAChB,WAAY,GACZ,QAAS,EACb,CAAC,CACL,GAEIA,EAAM,eAAe,CAE7B,CAEQ,cAAcA,EAA4B,CAC9C,KAAM,CAAE,KAAAC,CAAK,EAAID,EACbC,IAAS,UAAY,KAAK,mBAG1B,CAAC,KAAK,OAASA,IAAS,UAG5B,KAAK,MAAM,CACf,CAEA,MAAa,OAAuB,CAChC,KAAK,MAAQ,GACb,MAAM,KAAK,eACX,KAAK,aAAa,cACd,IAAI,WAAW,QAAS,CACpB,QAAS,GACT,SAAU,EACd,CAAC,CACL,EAKA,KAAK,aAAa,cACd,IAAI,WAAW,SAAU,CACrB,QAAS,EACb,CAAC,CACL,CACJ,CAEmB,aAA8B,CAC7C,OAAOT;AAAA;AAAA,yBAEU,KAAK,MAAM;AAAA;AAAA,yBAEXI,EAAU,KAAK,MAAM,CAAC;AAAA,0BACrB,KAAK,YAAY;AAAA,yBAClB,KAAK,KAAK;AAAA,2BACR,KAAK,aAAa;AAAA;AAAA;AAAA,2BAGlB,KAAK,IAAI;AAAA;AAAA;AAAA,kBAGlB,MAAM,YAAY,CAAC;AAAA,kBACnB,KAAK,MACDJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qCAMeI,EAAU,KAAK,IAAI,CAAC;AAAA,yCAChBG,CAAe;AAAA;AAAA,wBAGlCN,CAAO;AAAA;AAAA,SAGzB,CAEgB,aAAaS,EAAyC,CAClE,MAAM,aAAaA,CAAiB,EAE/B,KAAK,aAAa,mBAAmB,GACtC,KAAK,aAAa,aAAa,OAAQ,QAAQ,CAEvD,CAEgB,YAAmB,CAC/B,KAAK,UAAY,EACrB,CACJ,CAtGWC,EAAA,CADNT,EAAS,GALD,OAMF,sBAGSS,EAAA,CADfT,EAAS,GARD,OASO,qBAGTS,EAAA,CADNT,EAAS,GAXD,OAYF,sBAGSS,EAAA,CADfT,EAAS,GAdD,OAeO,2BAGTS,EAAA,CADNT,EAAS,CAAE,KAAM,OAAQ,CAAC,GAjBlB,OAkBF,iCAGAS,EAAA,CADNR,EAAM,OAAO,GApBL,OAqBF",
  "names": ["html", "nothing", "property", "query", "ifDefined", "Textfield", "searchStyles", "stopPropagation", "event", "code", "changedProperties", "__decorateClass"]
}
