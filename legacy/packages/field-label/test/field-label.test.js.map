{
  "version": 3,
  "sources": ["field-label.test.ts"],
  "sourcesContent": ["/*\nCopyright 2020 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport { elementUpdated, expect, fixture, html } from '@open-wc/testing';\nimport { stub } from 'sinon';\n\nimport '@spectrum-web-components/textfield/sp-textfield.js';\nimport { Textfield } from '@spectrum-web-components/textfield';\nimport '@spectrum-web-components/picker/sp-picker.js';\nimport { Picker } from '@spectrum-web-components/picker';\nimport '@spectrum-web-components/menu/sp-menu.js';\nimport '@spectrum-web-components/menu/sp-menu-item.js';\n\nimport '@spectrum-web-components/field-label/sp-field-label.js';\nimport { FieldLabel } from '@spectrum-web-components/field-label';\nimport { testForLitDevWarnings } from '../../../test/testing-helpers.js';\n\ndescribe('FieldLabel', () => {\n    testForLitDevWarnings(\n        async () =>\n            await fixture<FieldLabel>(\n                html`\n                    <div>\n                        <sp-field-label for=\"test\">Input label</sp-field-label>\n                        <input id=\"test\" />\n                    </div>\n                `\n            )\n    );\n    it('loads default field-label accessibly', async () => {\n        const el = await fixture<FieldLabel>(\n            html`\n                <div>\n                    <sp-field-label for=\"test\">Input label</sp-field-label>\n                    <input id=\"test\" />\n                </div>\n            `\n        );\n\n        await elementUpdated(el);\n\n        await expect(el).to.be.accessible();\n    });\n    it('loads [required] field-label accessibly', async () => {\n        const el = await fixture<FieldLabel>(\n            html`\n                <div>\n                    <sp-field-label required for=\"test\">\n                        Required input label\n                    </sp-field-label>\n                    <input id=\"test\" />\n                </div>\n            `\n        );\n\n        await elementUpdated(el);\n\n        await expect(el).to.be.accessible();\n    });\n    it('loads with no \"for\"', async () => {\n        const el = await fixture<FieldLabel>(\n            html`\n                <sp-field-label>Input label</sp-field-label>\n            `\n        );\n\n        await elementUpdated(el);\n\n        await expect(el).to.be.accessible();\n    });\n    it('observes based on `for` value', async () => {\n        const test = await fixture<FieldLabel>(\n            html`\n                <div>\n                    <sp-field-label for=\"test\">Input label</sp-field-label>\n                    <input id=\"test\" />\n                    <input id=\"test\" />\n                </div>\n            `\n        );\n\n        const fieldLabel = test.querySelector('sp-field-label') as FieldLabel;\n        const el = fieldLabel as unknown as { target: HTMLElement | undefined };\n        const input1 = test.querySelector(\n            'input:nth-of-type(1)'\n        ) as HTMLInputElement;\n        const input2 = test.querySelector(\n            'input:nth-of-type(2)'\n        ) as HTMLInputElement;\n\n        await elementUpdated(fieldLabel);\n\n        expect(el.target === input1).to.be.true;\n        input1.remove();\n        await elementUpdated(fieldLabel);\n        expect(el.target === input2).to.be.true;\n        fieldLabel.insertAdjacentElement('beforebegin', input1);\n        await elementUpdated(fieldLabel);\n        expect(el.target === input1).to.be.true;\n        input1.id = 'other';\n        await elementUpdated(fieldLabel);\n        expect(el.target === input2).to.be.true;\n        input2.remove();\n        await elementUpdated(fieldLabel);\n        expect(el.target).to.be.null;\n        input1.id = 'test';\n        await elementUpdated(fieldLabel);\n        expect(el.target === input1).to.be.true;\n        fieldLabel.insertAdjacentElement('afterend', input2);\n        await elementUpdated(fieldLabel);\n        expect(el.target === input2).to.be.false;\n        input2.insertAdjacentElement('afterend', input1);\n        await elementUpdated(fieldLabel);\n        expect(el.target === input2).to.be.true;\n    });\n    it('allows unfulfilled \"for\"', async () => {\n        const el = await fixture<FieldLabel>(\n            html`\n                <sp-field-label>Input label</sp-field-label>\n            `\n        );\n        await elementUpdated(el);\n        const manageSpy = stub(\n            el as unknown as { manageTarget(): Promise<string> },\n            'manageTarget'\n        );\n        manageSpy.callsFake(async (...args): Promise<string> => {\n            try {\n                await (\n                    FieldLabel.prototype as unknown as {\n                        manageTarget(): Promise<void>;\n                    }\n                ).manageTarget.apply(el, ...args);\n            } catch (error) {\n                return 'Error was thrown.';\n            }\n            return 'No error was thrown.';\n        });\n\n        el.for = 'not-available';\n        el.id = 'force-manage-target';\n        await elementUpdated(el);\n        const result = await manageSpy.returnValues[0];\n        expect(result).to.equal('No error was thrown.');\n    });\n    it('associates itself to an element whose \"id\" matches its \"for\" attribute', async () => {\n        const test = await fixture<HTMLDivElement>(\n            html`\n                <div>\n                    <sp-field-label required for=\"test\"></sp-field-label>\n                    <input id=\"test\" />\n                </div>\n            `\n        );\n        const el = test.querySelector('sp-field-label') as FieldLabel;\n        const input = test.querySelector('input') as HTMLInputElement;\n\n        await elementUpdated(el);\n\n        expect(input.hasAttribute('aria-labelledby'));\n        expect(input.getAttribute('aria-labelledby')).to.equal(el.id);\n    });\n    it('associates via \"id\" starting with number', async () => {\n        const test = await fixture<HTMLDivElement>(\n            html`\n                <div>\n                    <sp-field-label required for=\"1\"></sp-field-label>\n                    <input id=\"1\" />\n                </div>\n            `\n        );\n        const el = test.querySelector('sp-field-label') as FieldLabel;\n        const input = test.querySelector('input') as HTMLInputElement;\n\n        await elementUpdated(el);\n\n        expect(input.hasAttribute('aria-labelledby'));\n        expect(input.getAttribute('aria-labelledby')).to.equal(el.id);\n    });\n    it('passed clicks to assiciated form element as focus', async () => {\n        const test = await fixture<HTMLDivElement>(\n            html`\n                <div>\n                    <sp-field-label required for=\"test\"></sp-field-label>\n                    <input id=\"test\" />\n                </div>\n            `\n        );\n        const el = test.querySelector('sp-field-label') as FieldLabel;\n        const input = test.querySelector('input') as HTMLInputElement;\n\n        await elementUpdated(el);\n\n        el.click();\n        await elementUpdated(el);\n\n        expect(document.activeElement).to.equal(input);\n    });\n    it('associates itself to an element with a focueElement whose \"id\" matches its \"for\" attribute', async () => {\n        const test = await fixture<HTMLDivElement>(\n            html`\n                <div>\n                    <sp-field-label required for=\"test\"></sp-field-label>\n                    <sp-textfield id=\"test\"></sp-textfield>\n                </div>\n            `\n        );\n        const el = test.querySelector('sp-field-label') as FieldLabel;\n        const input = (test.querySelector('sp-textfield') as Textfield)\n            .focusElement as HTMLInputElement;\n\n        await elementUpdated(el);\n\n        expect(input.hasAttribute('aria-label'));\n        expect(input.getAttribute('aria-label')).to.equal(\n            (el.textContent || '').trim()\n        );\n    });\n    it('passed clicks to assiciated form element with a focueElement as focus', async () => {\n        const test = await fixture<HTMLDivElement>(\n            html`\n                <div>\n                    <sp-field-label required for=\"test\"></sp-field-label>\n                    <sp-textfield id=\"test\"></sp-textfield>\n                </div>\n            `\n        );\n        const el = test.querySelector('sp-field-label') as FieldLabel;\n        const input = test.querySelector('sp-textfield') as Textfield;\n\n        await elementUpdated(el);\n\n        el.click();\n        await elementUpdated(el);\n\n        expect(document.activeElement).to.equal(input);\n    });\n    it('forces focus visible when available', async () => {\n        const test = await fixture<HTMLDivElement>(\n            html`\n                <div>\n                    <sp-field-label required for=\"test\"></sp-field-label>\n                    <sp-picker id=\"test\">\n                        <sp-menu-item>Test</sp-menu-item>\n                    </sp-picker>\n                </div>\n            `\n        );\n        const el = test.querySelector('sp-field-label') as FieldLabel;\n        const picker = test.querySelector('sp-picker') as Picker;\n\n        await elementUpdated(el);\n        await elementUpdated(picker);\n        expect(picker.focused).to.be.false;\n\n        el.click();\n        await elementUpdated(el);\n        await elementUpdated(picker);\n\n        expect(document.activeElement).to.equal(picker);\n        expect(picker.focused).to.be.true;\n    });\n});\n"],
  "mappings": "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",
  "names": []
}
