{
  "version": 3,
  "sources": ["DependencyManger.ts"],
  "sourcesContent": ["/*\nCopyright 2022 Adobe. All rights reserved.\nThis file is licensed to you under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License. You may obtain a copy\nof the License at http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software distributed under\nthe License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\nOF ANY KIND, either express or implied. See the License for the specific language\ngoverning permissions and limitations under the License.\n*/\n\nimport type { ReactiveElement } from 'lit';\nexport const dependencyManagerLoadedSymbol = Symbol(\n    'dependency manager loaded'\n);\n\n/**\n * Manage the availability of custom element dependencies of a host element\n * to gate render and functional behavior before and after their presence\n */\nexport class DependencyManagerController {\n    private dependencies: Record<string, boolean> = {};\n\n    private host!: ReactiveElement;\n\n    /**\n     * Whether all of the provided dependencies have been registered.\n     * This will be `false` when no dependencies have been listed for management.\n     * Changes to this value will trigger `requestUpdate()` on the host.\n     */\n    public get loaded(): boolean {\n        return this._loaded;\n    }\n\n    private set loaded(loaded: boolean) {\n        if (loaded === this.loaded) return;\n        this._loaded = loaded;\n        this.host.requestUpdate(dependencyManagerLoadedSymbol, !this.loaded);\n    }\n\n    private _loaded = false;\n\n    constructor(host: ReactiveElement) {\n        this.host = host;\n    }\n\n    /**\n     * Submit a custom element tag name to be managed as a dependency.\n     *\n     * @param dependency {string} - the custom element tag to manage\n     * @param alreadyLoaded {boolean} - force the managemented custom element to be listed as loaded\n     */\n    public add(dependency: string, alreadyLoaded?: boolean): void {\n        const loaded =\n            !!alreadyLoaded ||\n            !!customElements.get(dependency) ||\n            this.dependencies[dependency];\n        if (!loaded) {\n            customElements.whenDefined(dependency).then(() => {\n                this.add(dependency, true);\n            });\n        }\n        this.dependencies = {\n            ...this.dependencies,\n            [dependency]: loaded,\n        };\n        // Update the loaded property based on the new loaded state of all dependencies\n        this.loaded = Object.values(this.dependencies).every(\n            (loaded) => loaded\n        );\n    }\n}\n"],
  "mappings": ";AAaO,aAAM,gCAAgC;AAAA,EACzC;AACJ;AAMO,aAAM,4BAA4B;AAAA,EAsBrC,YAAY,MAAuB;AArBnC,SAAQ,eAAwC,CAAC;AAmBjD,SAAQ,UAAU;AAGd,SAAK,OAAO;AAAA,EAChB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAdA,IAAW,SAAkB;AACzB,WAAO,KAAK;AAAA,EAChB;AAAA,EAEA,IAAY,OAAO,QAAiB;AAChC,QAAI,WAAW,KAAK,OAAQ;AAC5B,SAAK,UAAU;AACf,SAAK,KAAK,cAAc,+BAA+B,CAAC,KAAK,MAAM;AAAA,EACvE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcO,IAAI,YAAoB,eAA+B;AAC1D,UAAM,SACF,CAAC,CAAC,iBACF,CAAC,CAAC,eAAe,IAAI,UAAU,KAC/B,KAAK,aAAa,UAAU;AAChC,QAAI,CAAC,QAAQ;AACT,qBAAe,YAAY,UAAU,EAAE,KAAK,MAAM;AAC9C,aAAK,IAAI,YAAY,IAAI;AAAA,MAC7B,CAAC;AAAA,IACL;AACA,SAAK,eAAe;AAAA,MAChB,GAAG,KAAK;AAAA,MACR,CAAC,UAAU,GAAG;AAAA,IAClB;AAEA,SAAK,SAAS,OAAO,OAAO,KAAK,YAAY,EAAE;AAAA,MAC3C,CAACA,YAAWA;AAAA,IAChB;AAAA,EACJ;AACJ;",
  "names": ["loaded"]
}
