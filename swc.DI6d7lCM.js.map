{"version":3,"file":"swc.C-oe5ZZ-.js","sources":["../../../packages/overlay/src/slottable-request-directive.js","../../../packages/overlay/src/overlay-trigger-directive.js"],"sourcesContent":["\"use strict\";import{nothing as n,render as i}from\"@spectrum-web-components/base\";import{AsyncDirective as s,directive as o}from\"@spectrum-web-components/base/src/async-directive.js\";import{removeSlottableRequest as l}from\"./slottable-request-event.js\";export class SlottableRequestDirective extends s{render(e){return n}update(e,[t]){this.template=t,this.target!==e.element&&(this.target=e.element,this.renderBefore=this.target.children[0]),this.listenerHost=this.target,this.init()}handleSlottableRequest(e){if(e.target!==e.currentTarget)return;const t=e.data===l;i(t?void 0:this.template(),this.target,{renderBefore:this.renderBefore})}init(){var t;(t=this.listeners)==null||t.abort(),this.listeners=new AbortController;const{signal:e}=this.listeners;this.listenerHost.addEventListener(\"slottable-request\",r=>this.handleSlottableRequest(r),{signal:e})}disconnected(){var e;(e=this.listeners)==null||e.abort()}reconnected(){this.init()}}export const slottableRequest=o(SlottableRequestDirective);\n//# sourceMappingURL=slottable-request-directive.js.map\n","\"use strict\";import{nothing as y,render as h}from\"@spectrum-web-components/base\";import{directive as v}from\"@spectrum-web-components/base/src/async-directive.js\";import{strategies as O}from\"./strategies.js\";import{removeSlottableRequest as m}from\"./slottable-request-event.js\";import{SlottableRequestDirective as c}from\"./slottable-request-directive.js\";import{AbstractOverlay as d}from\"./AbstractOverlay.js\";import{InteractionTypes as f}from\"./InteractionController.js\";export class OverlayTriggerDirective extends c{constructor(){super(...arguments);this.defaultOptions={triggerInteraction:\"click\",overlayOptions:{type:\"auto\",offset:0}};this.options={...this.defaultOptions.overlayOptions}}render(e,r){return y}update(e,[r,t]){var n,l,a,p;this.options={...this.defaultOptions.overlayOptions,...t==null?void 0:t.overlayOptions},this.insertionOptions=t==null?void 0:t.insertionOptions,this.template=r,this.host=(n=e.options)==null?void 0:n.host;let i=!1;const o=(t==null?void 0:t.triggerInteraction)||this.defaultOptions.triggerInteraction,s=f[(l=this.strategy)==null?void 0:l.type]!==o;this.target!==e.element&&(this.target=e.element,i=!0),(i||s)&&((a=this.strategy)==null||a.abort(),this.strategy=new O[o](this.target,{isPersistent:!0,handleOverlayReady:g=>{this.listenerHost=this.overlay=g,this.init()}})),this.strategy.open=(p=t==null?void 0:t.open)!=null?p:!1}handleSlottableRequest(e){var i,o;if(e.target!==e.currentTarget)return;const r=e.data===m,t={};if(this.host&&(t.host=this.host),h(r?void 0:this.template(),this.overlay,t),r)this.overlay.remove();else{d.applyOptions(this.overlay,{...this.options,trigger:this.target});const s=typeof((i=this.insertionOptions)==null?void 0:i.el)==\"function\"?this.insertionOptions.el():((o=this.insertionOptions)==null?void 0:o.el)||this.target,{where:n=\"afterend\"}=this.insertionOptions||{};s.insertAdjacentElement(n,this.overlay)}}}export const trigger=v(OverlayTriggerDirective);\n//# sourceMappingURL=overlay-trigger-directive.js.map\n"],"names":["SlottableRequestDirective","s","render","e","n","update","t","this","template","target","element","renderBefore","children","listenerHost","init","handleSlottableRequest","currentTarget","data","l","i","listeners","abort","AbortController","signal","addEventListener","r","disconnected","reconnected","trigger","v","c","constructor","super","arguments","defaultOptions","triggerInteraction","overlayOptions","type","offset","options","y","a","p","insertionOptions","host","o","f","strategy","O","isPersistent","handleOverlayReady","g","overlay","open","m","h","remove","d","applyOptions","el","where","insertAdjacentElement"],"mappings":"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"}