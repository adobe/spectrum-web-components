import{C as s}from"./swc.BMVoEcKx.js";import{i as r}from"./swc.Bk_7Sut8.js";import{a as o}from"./swc.BBGMAE8i.js";import{x as t,B as i}from"./swc.CPRo5HoP.js";import{n as e}from"./swc.BtPhaoGy.js";import"./swc.B6Ji04pc.js";import"./swc.x86Wm3h_.js";import"./swc.rlzKnk9d.js";import"./swc.D3Xn_5N_.js";import"./swc.I6ey7Yi1.js";import"./swc.CIw_Gjml.js";import"./swc.DhtcN3Mc.js";import"./swc.DTrRBp2w.js";import"./swc.Cxa0JK8L.js";import"./swc.BOJgI39p.js";import"./swc.Chuw36y7.js";import"./swc.CkDLjnTR.js";import"./swc.CjPt0-_4.js";import"./swc.hti82C19.js";import"./swc.Cj2DIJMh.js";import"./swc.DeJGzahI.js";class l{constructor(r,{manageAs:o}={}){this._color=new s("hsv",[0,100,100],1),this.host=r,this.manageAs=o}get color(){return this._color}validateColorString(s){var r,o,t,i;const e={spaceId:null,coords:[0,0,0],isValid:!1,alpha:1},l=null==(r=[/rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d*\.?\d+)\s*\)/i,/rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)/i,/^rgba\s+(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s+(0|0?\.\d+|1)\s*$/i,/^rgb\s+(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s*$/i,/^rgba\(\s*(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s+(\d*\.?\d+)\s*\)$/i,/^rgb\(\s*(\d{1,3})\s+(\d{1,3})\s+(\d{1,3})\s*\)$/i,/rgb\(\s*(100|[0-9]{1,2}%)\s*,\s*(100|[0-9]{1,2}%)\s*,\s*(100|[0-9]{1,2}%)\s*\)/i,/rgba\(\s*(100|[0-9]{1,2})%\s*,\s*(100|[0-9]{1,2})%\s*,\s*(100|[0-9]{1,2})%\s*,\s*(\d*\.?\d+)\s*\)/i].find(r=>r.test(s)))?void 0:r.exec(s),a=null==(o=[/hsla\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*,\s*(\d*\.?\d+)\s*\)/i,/hsl\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*\)/i,/^hsla\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*$/i,/^hsl\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*$/i,/^hsla\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*\)$/i,/^hsl\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*\)$/i].find(r=>r.test(s)))?void 0:o.exec(s),h=null==(t=[/hsva\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*,\s*(\d*\.?\d+)\s*\)/i,/hsv\(\s*(\d{1,3})\s*,\s*(\d{1,3}%?)\s*,\s*(\d{1,3}%?)\s*\)/i,/^hsva\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*$/i,/^hsv\s+(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*$/i,/^hsva\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s+(\d*\.?\d+)\s*\)$/i,/^hsv\(\s*(\d{1,3})\s+(\d{1,3}%?)\s+(\d{1,3}%?)\s*\)$/i].find(r=>r.test(s)))?void 0:t.exec(s),n=null==(i=[/^#([A-Fa-f0-9]{6})([A-Fa-f0-9]{2})?$/,/^#([A-Fa-f0-9]{3})([A-Fa-f0-9]{1})?$/].find(r=>r.test(s)))?void 0:i.exec(s);if(l){const[,s,r,o,t]=l.filter(s=>"string"==typeof s),i=void 0===t?1:Number(t),a=s=>s.includes("%")?Number(s.replace("%",""))/100:Number(s)/255,h=a(s),n=a(r),d=a(o);e.spaceId="srgb",e.coords=[h,n,d],e.alpha=i,e.isValid=h>=0&&h<=1&&n>=0&&n<=1&&d>=0&&d<=1&&i>=0&&i<=1}else if(a){const[,s,r,o,t]=a,i=[s,r,o,void 0===t?"1":t].map(s=>Number(s.replace(/[^\d.]/g,""))),[l,h,n,d]=i;e.spaceId="hsl",e.coords=[l,h,n],e.alpha=d,e.isValid=l>=0&&l<=360&&h>=0&&h<=100&&n>=0&&n<=100&&d>=0&&d<=1}else if(h){const[,s,r,o,t]=h,i=[s,r,o,void 0===t?"1":t].map(s=>Number(s.replace(/[^\d.]/g,""))),[l,a,n,d]=i;e.spaceId="hsv",e.coords=[l,a,n],e.alpha=d,e.isValid=l>=0&&l<=360&&a>=0&&a<=100&&n>=0&&n<=100&&d>=0&&d<=1}else if(n){const[,s,r]=n,o=s=>(1===s.length&&(s+=s),parseInt(s,16)/255);let t,i,l;3===s.length?(t=o(s.substring(0,1)),i=o(s.substring(1,2)),l=o(s.substring(2,3))):(t=o(s.substring(0,2)),i=o(s.substring(2,4)),l=o(s.substring(4,6)));const a=r?o(r):1;e.spaceId="srgb",e.coords=[t,i,l],e.alpha=a,e.isValid=t>=0&&t<=1&&i>=0&&i<=1&&l>=0&&l<=1&&a>=0&&a<=1}return e}get colorOrigin(){return this._colorOrigin}set colorOrigin(s){this._colorOrigin=s}_getHexString(s,r){const{r:o,g:t,b:i}=this._color.to("srgb").srgb,e=this._color.alpha,l=Math.round(255*o).toString(16).padStart(2,"0"),a=Math.round(255*t).toString(16).padStart(2,"0"),h=Math.round(255*i).toString(16).padStart(2,"0"),n=Math.round(255*e).toString(16).padStart(2,"0");return`${s?"#":""}${l}${a}${h}${r?n:""}`}set color(r){let o;if(this._colorOrigin=r,"string"==typeof r){const t=this.validateColorString(r);if(t.isValid){const[r,i,e]=t.coords;o=new s(`${t.spaceId}`,[r,i,e],t.alpha)}else try{s.parse(r)}catch(t){try{o=new s(`#${r}`)}catch(s){return}}}else if(r instanceof s)o=r;else if(!Array.isArray(r)){const{h:t,s:i,l:e,v:l,r:a,g:h,b:n,a:d}=r;if(void 0!==t&&void 0!==i){const r=null!=e?e:l;o=new s(void 0!==e?"hsl":"hsv",[parseFloat(t),"string"!=typeof i?100*i:parseFloat(i),"string"!=typeof r?100*r:parseFloat(r)],parseFloat(d||"1"))}else void 0!==a&&void 0!==h&&void 0!==n&&(o=new s("srgb",[parseFloat(a)/255,parseFloat(h)/255,parseFloat(n)/255],parseFloat(d||"1")))}o||(o=new s(r)),this.manageAs?this._color=o.to(this.manageAs):this._color=o,this.host.requestUpdate()}get colorValue(){if("string"==typeof this._colorOrigin){let s="";switch(s=this._colorOrigin.startsWith("#")?"hex string":this._colorOrigin.startsWith("rgb")?"rgb":this._colorOrigin.startsWith("hsl")?"hsl":this._colorOrigin.startsWith("hsv")?"hsv":"hex",s){case"hsv":{const s="a"===this._colorOrigin[3],{h:r,s:o,v:t}=this._color.to("hsv").hsv,i=this._color.alpha;return`hsv${s?"a":""}(${Math.round(r)}, ${Math.round(o)}%, ${Math.round(t)}%${s?`, ${i}`:""})`}case"hsl":{const s="a"===this._colorOrigin[3],{h:r,s:o,l:t}=this._color.to("hsl").hsl,i=this._color.alpha;return`hsl${s?"a":""}(${Math.round(r)}, ${Math.round(o)}%, ${Math.round(t)}%${s?`, ${i}`:""})`}case"hex string":{const s=9===this._colorOrigin.length||5===this._colorOrigin.length;return this._getHexString(!0,s)}case"hex":{const s=8===this._colorOrigin.length||4===this._colorOrigin.length;return this._getHexString(!1,s)}default:{const{r:s,g:r,b:o}=this._color.to("srgb").srgb,t="a"===this._colorOrigin[3],i=this._color.alpha;return this._colorOrigin.search("%")>-1?`rgb${t?"a":""}(${Math.round(100*s)}%, ${Math.round(100*r)}%, ${Math.round(100*o)}%${t?`,${Math.round(100*i)}%`:""})`:`rgb${t?"a":""}(${Math.round(255*s)}, ${Math.round(255*r)}, ${Math.round(255*o)}${t?`, ${i}`:""})`}}}let r;if(this._colorOrigin)try{({spaceId:r}=new s(this._colorOrigin))}catch(s){const{h:o,s:t,l:i,v:e,r:l,g:a,b:h}=this._colorOrigin;void 0!==o&&void 0!==t&&void 0!==i?r="hsl":void 0!==o&&void 0!==t&&void 0!==e?r="hsv":void 0!==l&&void 0!==a&&void 0!==h&&(r="srgb")}else({spaceId:r}=this.color);switch(r){case"hsv":{const{h:s,s:r,v:o}=this._color.to("hsv").hsv;return{h:s,s:r/100,v:o/100,a:this._color.alpha}}case"hsl":{const{h:s,s:r,l:o}=this._color.to("hsl").hsl;return{h:s,s:r/100,l:o/100,a:this._color.alpha}}case"srgb":{const{r:s,g:r,b:o}=this._color.to("srgb").srgb;return this._colorOrigin&&"string"==typeof this._colorOrigin.r&&this._colorOrigin.r.search("%")?{r:`${Math.round(255*s)}%`,g:`${Math.round(255*r)}%`,b:`${Math.round(255*o)}%`,a:this._color.alpha}:{r:Math.round(255*s),g:Math.round(255*r),b:Math.round(255*o),a:this._color.alpha}}}return this._color}get hue(){return Number(this._color.to("hsl").hsl.h)}set hue(s){this._color.set("h",s),this.host.requestUpdate()}getColor(s){if("string"==typeof s&&!["srgb","hsva","hsv","hsl","hsla"].includes(s))throw new Error("not a valid format");return this._color.to(s)}getHslString(){return this._color.to("hsl").toString()}savePreviousColor(){this._previousColor=this._color.clone()}restorePreviousColor(){this._color=this._previousColor}}const a=r`
    :host{position:relative}
`;var h=Object.defineProperty;class n extends o{constructor(){super(),this.viewColor=!1,this._value="",this.colorController=new l(this)}static get styles(){return[...super.styles,a]}set value(s){if(s===this.value)return;const r=this._value;this._value=s,this.requestUpdate("value",r)}get value(){return this._value}renderColorHandle(){return this.viewColor&&this.valid?t`
                  <sp-color-handle
                      size="m"
                      color="${this.colorController.getColor("srgb").toString()}"
                  ></sp-color-handle>
              `:t``}getColorValue(){return this.valid?this.colorController.getColor("srgb").toString():""}render(){return this.viewColor&&import("./swc.BZaJKtpN.js"),t`
            ${super.render()} ${this.renderColorHandle()}
        `}checkValidity(){let s=super.checkValidity();return this.value?(this.valid=s=this.colorController.validateColorString(this.value).isValid,this.invalid=!s,this.valid&&(this.colorController.color=this.value)):this.valid=this.invalid=!1,s}}((s,r,o)=>{for(var t,i=void 0,e=s.length-1;e>=0;e--)(t=s[e])&&(i=t(r,o,i)||i);i&&h(r,o,i)})([e({type:Boolean,attribute:"view-color"})],n.prototype,"viewColor"),customElements.define("sp-color-field",n);const d=({label:s="Color Field",quiet:r=!1,size:o="m",readonly:i=!1,disabled:e=!1,viewColor:l=!1,value:a=""}={})=>t`<sp-color-field label="${s}" size="${o}" value="${a}" ?view-color="${l}" ?quiet="${r}" ?readonly="${i}" ?disabled="${e}"></sp-color-field>`,c=document.querySelector(".demo-preview"),g=document.querySelector(".demo-config");function u(){const s={};if(!g)return s;return g.querySelectorAll(".demo-control").forEach(r=>{s[r.id]="false"!==r.value&&r.value}),s}const p=(s={})=>{s.componentName="color-field",i(d(s),c)};g&&g.addEventListener("change",()=>{p(u())}),customElements.whenDefined("sp-picker").then(()=>{const s=u();console.log(s),p(s)});
//# sourceMappingURL=swc.D7xjqyG3.js.map
