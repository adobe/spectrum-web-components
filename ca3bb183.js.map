{"version":3,"file":"ca3bb183.js","sources":["../../../packages/iconset/src/iconset-registry.js","../../../packages/icon/src/Icon.js","../../../packages/icon/sp-icon.js"],"sourcesContent":["\"use strict\";export class IconsetRegistry{constructor(){this.iconsetMap=new Map}static getInstance(){return IconsetRegistry.instance||(IconsetRegistry.instance=new IconsetRegistry),IconsetRegistry.instance}addIconset(e,t){this.iconsetMap.set(e,t);const n=new CustomEvent(\"sp-iconset-added\",{bubbles:!0,composed:!0,detail:{name:e,iconset:t}});setTimeout(()=>window.dispatchEvent(n),0)}removeIconset(e){this.iconsetMap.delete(e);const t=new CustomEvent(\"sp-iconset-removed\",{bubbles:!0,composed:!0,detail:{name:e}});setTimeout(()=>window.dispatchEvent(t),0)}getIconset(e){return this.iconsetMap.get(e)}}\n//# sourceMappingURL=iconset-registry.js.map\n","\"use strict\";var p=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var o=(s,r,e,t)=>{for(var i=t>1?void 0:t?l(r,e):r,n=s.length-1,a;n>=0;n--)(a=s[n])&&(i=(t?a(r,e,i):a(i))||i);return t&&i&&p(r,e,i),i};import{html as c}from\"@spectrum-web-components/base\";import{property as d,query as m}from\"@spectrum-web-components/base/src/decorators.js\";import{ifDefined as u}from\"@spectrum-web-components/base/src/directives.js\";import{IconsetRegistry as h}from\"@spectrum-web-components/iconset/src/iconset-registry.js\";import{IconBase as v}from\"./IconBase.js\";export class Icon extends v{constructor(){super(...arguments);this.iconsetListener=e=>{if(!this.name)return;const t=this.parseIcon(this.name);e.detail.name===t.iconset&&(this.updateIconPromise=this.updateIcon())}}connectedCallback(){super.connectedCallback(),window.addEventListener(\"sp-iconset-added\",this.iconsetListener)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener(\"sp-iconset-added\",this.iconsetListener)}firstUpdated(){this.updateIconPromise=this.updateIcon()}attributeChangedCallback(e,t,i){super.attributeChangedCallback(e,t,i),this.updateIconPromise=this.updateIcon()}announceIconImageSrcError(){this.dispatchEvent(new Event(\"error\",{cancelable:!1,bubbles:!1,composed:!1}))}render(){return this.name?c`\n                <div id=\"container\"></div>\n            `:this.src?c`\n                <img\n                    src=\"${this.src}\"\n                    alt=${u(this.label)}\n                    @error=${this.announceIconImageSrcError}\n                />\n            `:super.render()}async updateIcon(){if(this.updateIconPromise&&await this.updateIconPromise,!this.name)return Promise.resolve();const e=this.parseIcon(this.name),t=h.getInstance().getIconset(e.iconset);return!t||!this.iconContainer?Promise.resolve():(this.iconContainer.innerHTML=\"\",t.applyIconToElement(this.iconContainer,e.icon,this.size||\"\",this.label?this.label:\"\"))}parseIcon(e){const t=e.split(\":\");let i=\"default\",n=e;return t.length>1&&(i=t[0],n=t[1]),{iconset:i,icon:n}}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.updateIconPromise,e}}o([d()],Icon.prototype,\"src\",2),o([d()],Icon.prototype,\"name\",2),o([m(\"#container\")],Icon.prototype,\"iconContainer\",2);\n//# sourceMappingURL=Icon.js.map\n","\"use strict\";import{Icon as e}from\"./src/Icon.js\";import{defineElement as o}from\"@spectrum-web-components/base/src/define-element.js\";o(\"sp-icon\",e);\n//# sourceMappingURL=sp-icon.js.map\n"],"names":["IconsetRegistry","constructor","this","iconsetMap","Map","static","instance","addIconset","name","iconset","set","n","bubbles","composed","detail","e","t","setTimeout","window","dispatchEvent","event","delete","CustomEvent","get","p","Object","defineProperty","l","getOwnPropertyDescriptor","o","s","r","a","i","length","Icon","IconBase","super","arguments","iconsetListener","icon","parseIcon","updateIconPromise","updateIcon","connectedCallback","addEventListener","disconnectedCallback","removeEventListener","firstUpdated","old","value","attributeChangedCallback","Event","cancelable","render","html","src","ifDefined","label","announceIconImageSrcError","async","resolve","getInstance","getIconset","iconContainer","innerHTML","applyIconToElement","size","Promise","split","iconName","iconParts","iconsetName","getUpdateComplete","complete","__decorateClass","property","prototype","query","defineElement"],"mappings":"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"}