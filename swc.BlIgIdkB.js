const e=Symbol("element resolver updated");class t{constructor(e,{selector:t}={selector:""}){this._element=null,this._selector="",this.mutationCallback=e=>{let t=!1;e.forEach((e=>{if(!t){if("childList"===e.type){const s=this.element&&[...e.removedNodes].includes(this.element),l=!!this.selector&&[...e.addedNodes].some(this.elementIsSelected);t=t||s||l}if("attributes"===e.type){const s=e.target===this.element,l=!!this.selector&&this.elementIsSelected(e.target);t=t||s||l}}})),t&&this.resolveElement()},this.elementIsSelected=e=>{var t;return this.selectorIsId?(null==e?void 0:e.id)===this.selectorAsId:null==(t=null==e?void 0:e.matches)?void 0:t.call(e,this.selector)},this.host=e,this.selector=t,this.observer=new MutationObserver(this.mutationCallback),this.host.addController(this)}get element(){return this._element}set element(t){if(t===this.element)return;const s=this.element;this._element=t,this.host.requestUpdate(e,s)}get selector(){return this._selector}set selector(e){e!==this.selector&&(this.releaseElement(),this._selector=e,this.resolveElement())}get selectorAsId(){return this.selector.slice(1)}get selectorIsId(){return!!this.selector&&this.selector.startsWith("#")}hostConnected(){this.resolveElement(),this.observer.observe(this.host.getRootNode(),{subtree:!0,childList:!0,attributes:!0})}hostDisconnected(){this.releaseElement(),this.observer.disconnect()}resolveElement(){if(!this.selector)return void this.releaseElement();const e=this.host.getRootNode();this.element=this.selectorIsId?e.getElementById(this.selectorAsId):e.querySelector(this.selector)}releaseElement(){this.element=null}}export{t as E,e};
//# sourceMappingURL=swc.DIE-zKsg.js.map
