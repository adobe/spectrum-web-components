{"version":3,"file":"swc.ZcOTPE0d.js","sources":["../../../packages/overlay/src/InteractionController.js","../../../packages/overlay/src/AbstractOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../tools/shared/src/reparent-children.js","../../../packages/overlay/src/LongpressController.js","../../../packages/overlay/src/strategies.js","../../../packages/overlay/src/ClickController.js","../../../packages/overlay/src/HoverController.js"],"sourcesContent":["\"use strict\";export var InteractionTypes=(r=>(r.click=\"click\",r.hover=\"hover\",r.longpress=\"longpress\",r))(InteractionTypes||{});export const lastInteractionType=Symbol(\"lastInteractionType\"),SAFARI_FOCUS_RING_CLASS=\"remove-focus-ring-safari-hack\";export class InteractionController{constructor(e,{overlay:t,isPersistent:r,handleOverlayReady:i}){this.target=e;this.isLazilyOpen=!1;this.isPersistent=!1;this.isPersistent=!!r,this.handleOverlayReady=i,this.isPersistent&&this.init(),this.overlay=t}get activelyOpening(){return!1}get open(){var e,t;return(t=(e=this.overlay)==null?void 0:e.open)!=null?t:this.isLazilyOpen}set open(e){if(e!==this.open){if(this.isLazilyOpen=e,this.overlay){this.overlay.open=e,this.target[lastInteractionType]=this.type;return}e&&(customElements.whenDefined(\"sp-overlay\").then(async()=>{const{Overlay:t}=await import(\"./Overlay.js\");this.overlay=new t,this.overlay.open=!0,this.target[lastInteractionType]=this.type}),import(\"@spectrum-web-components/overlay/sp-overlay.js\"))}}get overlay(){return this._overlay}set overlay(e){var t;e&&this.overlay!==e&&(this.overlay&&this.overlay.removeController(this),this._overlay=e,this.overlay.addController(this),this.initOverlay(),this.prepareDescription(this.target),(t=this.handleOverlayReady)==null||t.call(this,this.overlay))}prepareDescription(e){}releaseDescription(){}shouldCompleteOpen(){}init(){}initOverlay(){}abort(){var e;this.releaseDescription(),(e=this.abortController)==null||e.abort()}hostConnected(){this.init()}hostDisconnected(){this.isPersistent||this.abort()}}\n//# sourceMappingURL=InteractionController.js.map\n","\"use strict\";import{SpectrumElement as g}from\"@spectrum-web-components/base\";import{reparentChildren as b}from\"@spectrum-web-components/shared/src/reparent-children.js\";import{OverlayTimer as O}from\"./overlay-timer.js\";export const overlayTimer=new O,noop=()=>{},guaranteedAllTransitionend=(i,v,e)=>{const r=new AbortController,n=new Map,a=()=>{r.abort(),e()};let m,l;const t=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{l=requestAnimationFrame(()=>{a()})})}),p=o=>{o.target===i&&(n.set(o.propertyName,n.get(o.propertyName)-1),n.get(o.propertyName)||n.delete(o.propertyName),n.size===0&&a())},d=o=>{o.target===i&&(n.has(o.propertyName)||n.set(o.propertyName,0),n.set(o.propertyName,n.get(o.propertyName)+1),cancelAnimationFrame(t),cancelAnimationFrame(m),cancelAnimationFrame(l))};i.addEventListener(\"transitionrun\",d,{signal:r.signal}),i.addEventListener(\"transitionend\",p,{signal:r.signal}),i.addEventListener(\"transitioncancel\",p,{signal:r.signal}),v()};export function nextFrame(){return new Promise(i=>requestAnimationFrame(()=>i()))}export class AbstractOverlay extends g{constructor(){super(...arguments);this.dispose=noop;this.offset=0;this.willPreventClose=!1}async applyFocus(e,r){}get delayed(){return!1}set delayed(e){}get disabled(){return!1}set disabled(e){}get elementResolver(){return this._elementResolver}set elementResolver(e){this._elementResolver=e}async ensureOnDOM(e){}async makeTransition(e){return null}async manageDelay(e){}async manageDialogOpen(){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(e){}get placementController(){return this._placementController}set placementController(e){this._placementController=e}requestSlottable(){}returnFocus(){}get state(){return\"closed\"}set state(e){}manuallyKeepOpen(){}static update(){const e=new CustomEvent(\"sp-update-overlays\",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(e)}static async open(e,r,n,a){await import(\"@spectrum-web-components/overlay/sp-overlay.js\");const m=arguments.length===2,l=n||e,t=new this;let p=!1;t.dispose=()=>{t.addEventListener(\"sp-closed\",()=>{p||(d(),p=!0),requestAnimationFrame(()=>{t.remove()})}),t.open=!1,t.dispose=noop};const d=b([l],t,{position:\"beforeend\",prepareCallback:s=>{const c=s.slot;return s.removeAttribute(\"slot\"),()=>{s.slot=c}}});if(!m&&l&&a){const s=e,c=r,u=a;return AbstractOverlay.applyOptions(t,{...u,delayed:u.delayed||l.hasAttribute(\"delayed\"),trigger:u.virtualTrigger||s,type:c===\"modal\"?\"modal\":c===\"hover\"?\"hint\":\"auto\"}),s.insertAdjacentElement(\"afterend\",t),await t.updateComplete,t.open=!0,t.dispose}const y=r;return t.append(l),AbstractOverlay.applyOptions(t,{...y,delayed:y.delayed||l.hasAttribute(\"delayed\")}),t.updateComplete.then(()=>{t.open=!0}),t}static applyOptions(e,r){var n,a;e.delayed=!!r.delayed,e.receivesFocus=(n=r.receivesFocus)!=null?n:\"auto\",e.triggerElement=r.trigger||null,e.type=r.type||\"modal\",e.offset=(a=r.offset)!=null?a:0,e.placement=r.placement,e.willPreventClose=!!r.notImmediatelyClosable}disconnectedCallback(){super.disconnectedCallback()}}\n//# sourceMappingURL=AbstractOverlay.js.map\n","\"use strict\";const t=1e3,s=1e3;export class OverlayTimer{constructor(e={}){this.warmUpDelay=1e3;this.coolDownDelay=1e3;this.isWarm=!1;this.timeout=0;Object.assign(this,e)}async openTimer(e){if(this.cancelCooldownTimer(),!this.component||e!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=e,this.isWarm?!1:(this.promise=new Promise(o=>{this.resolve=o,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error(\"Inconsistent state\")}close(e){this.component&&this.component===e&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}\n//# sourceMappingURL=overlay-timer.js.map\n","\"use strict\";function T(o,i,l=[]){for(let e=0;e<i.length;++e){const n=i[e],r=o[e],t=r.parentElement||r.getRootNode();l[e]&&l[e](n),t&&t!==r&&t.replaceChild(n,r),delete o[e]}return i}export const reparentChildren=(o,i,{position:l,prepareCallback:e}={position:\"beforeend\"})=>{let{length:n}=o;if(n===0)return()=>o;let r=1,t=0;(l===\"afterbegin\"||l===\"afterend\")&&(r=-1,t=n-1);const a=new Array(n),c=new Array(n),p=document.createComment(\"placeholder for reparented element\");do{const d=o[t];e&&(c[t]=e(d)),a[t]=p.cloneNode();const m=d.parentElement||d.getRootNode();m&&m!==d&&m.replaceChild(a[t],d),i.insertAdjacentElement(l,d),t+=r}while(--n>0);return function(){return T(a,o,c)}};\n//# sourceMappingURL=reparent-children.js.map\n","\"use strict\";import{isAndroid as a,isIOS as d}from\"@spectrum-web-components/shared/src/platform.js\";import{conditionAttributeWithId as p}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{randomID as l}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as r}from\"./AbstractOverlay.js\";import{InteractionController as h,InteractionTypes as c}from\"./InteractionController.js\";const g=300;export const LONGPRESS_INSTRUCTIONS={touch:\"Double tap and long press for additional options\",keyboard:\"Press Space or Alt+Down Arrow for additional options\",mouse:\"Click and hold for additional options\"};export class LongpressController extends h{constructor(){super(...arguments);this.type=c.longpress;this.longpressState=null;this.releaseDescription=r;this.handlePointerup=()=>{var e;clearTimeout(this.timeout),this.target&&(this.longpressState=((e=this.overlay)==null?void 0:e.state)===\"opening\"?\"pressed\":null,document.removeEventListener(\"pointerup\",this.handlePointerup),document.removeEventListener(\"pointercancel\",this.handlePointerup))}}get activelyOpening(){return this.longpressState===\"opening\"||this.longpressState===\"pressed\"}handleLongpress(){this.open=!0,this.longpressState=this.longpressState===\"potential\"?\"opening\":\"pressed\"}handlePointerdown(e){!this.target||e.button!==0||(this.longpressState=\"potential\",document.addEventListener(\"pointerup\",this.handlePointerup),document.addEventListener(\"pointercancel\",this.handlePointerup),\"holdAffordance\"in this.target)||(this.timeout=setTimeout(()=>{this.target&&this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"pointer\"}}))},g))}handleKeydown(e){const{code:t,altKey:o}=e;o&&t===\"ArrowDown\"&&(e.stopPropagation(),e.stopImmediatePropagation())}handleKeyup(e){const{code:t,altKey:o}=e;if(t===\"Space\"||o&&t===\"ArrowDown\"){if(!this.target)return;e.stopPropagation(),this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"keyboard\"}})),setTimeout(()=>{this.longpressState=null})}}prepareDescription(e){if(this.releaseDescription!==r||!this.overlay.elements.length)return;const t=document.createElement(\"div\");t.id=`longpress-describedby-descriptor-${l()}`;const o=d()||a()?\"touch\":\"keyboard\";t.textContent=LONGPRESS_INSTRUCTIONS[o],t.slot=\"longpress-describedby-descriptor\";const n=e.getRootNode(),s=this.overlay.getRootNode();n===s?this.overlay.append(t):(t.hidden=!(\"host\"in n),e.insertAdjacentElement(\"afterend\",t));const i=p(e,\"aria-describedby\",[t.id]);this.releaseDescription=()=>{i(),t.remove(),this.releaseDescription=r}}shouldCompleteOpen(){this.longpressState=this.longpressState===\"pressed\"?null:this.longpressState}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"longpress\",()=>this.handleLongpress(),{signal:e}),this.target.addEventListener(\"pointerdown\",o=>this.handlePointerdown(o),{signal:e}),this.prepareDescription(this.target),!this.target.holdAffordance&&(this.target.addEventListener(\"keydown\",o=>this.handleKeydown(o),{signal:e}),this.target.addEventListener(\"keyup\",o=>this.handleKeyup(o),{signal:e}))}}\n//# sourceMappingURL=LongpressController.js.map\n","\"use strict\";import{ClickController as o}from\"./ClickController.js\";import{HoverController as r}from\"./HoverController.js\";import{LongpressController as e}from\"./LongpressController.js\";export const strategies={click:o,longpress:e,hover:r};\n//# sourceMappingURL=strategies.js.map\n","\"use strict\";import{InteractionController as o,InteractionTypes as r}from\"./InteractionController.js\";export class ClickController extends o{constructor(){super(...arguments);this.type=r.click;this.preventNextToggle=!1}handleClick(){this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1}handlePointerdown(){this.preventNextToggle=this.open}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"click\",()=>this.handleClick(),{signal:e}),this.target.addEventListener(\"pointerdown\",()=>this.handlePointerdown(),{signal:e})}}\n//# sourceMappingURL=ClickController.js.map\n","\"use strict\";import{conditionAttributeWithId as s}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{isWebKit as n}from\"@spectrum-web-components/shared\";import{randomID as d}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as a}from\"./AbstractOverlay.js\";import{InteractionController as v,InteractionTypes as l,lastInteractionType as p,SAFARI_FOCUS_RING_CLASS as o}from\"./InteractionController.js\";const c=300;export class HoverController extends v{constructor(){super(...arguments);this.type=l.hover;this.elementIds=[];this.focusedin=!1;this.pointerentered=!1}handleKeyup(e){(e.code===\"Tab\"||e.code===\"Escape\")&&(this.open=!0,this.removeSafariFocusRingClass())}handleTargetFocusin(){if(this.target.matches(\":focus-visible\")){if(n()&&this.target[p]===l.click){this.target.classList.add(o);return}this.open=!0,this.focusedin=!0,this.removeSafariFocusRingClass()}}handleTargetFocusout(){this.removeSafariFocusRingClass(),this.focusedin=!1,!this.pointerentered&&(this.open=!1)}handleTargetPointerenter(){var e;this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0),!((e=this.overlay)!=null&&e.disabled)&&(this.open=!0,this.pointerentered=!0)}handleTargetPointerleave(){this.doPointerleave()}handleHostPointerenter(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0)}handleHostPointerleave(){this.doPointerleave()}prepareDescription(){if(!this.overlay.elements.length)return;const e=this.target.getRootNode(),t=this.overlay.elements[0].getRootNode(),r=this.overlay.getRootNode();e===r?this.prepareOverlayRelativeDescription():e===t&&this.prepareContentRelativeDescription()}prepareOverlayRelativeDescription(){const e=s(this.target,\"aria-describedby\",[this.overlay.id]);this.releaseDescription=()=>{e(),this.releaseDescription=a}}prepareContentRelativeDescription(){const e=[],t=this.overlay.elements.map(i=>(e.push(i.id),i.id||(i.id=`${this.overlay.tagName.toLowerCase()}-helper-${d()}`),i.id));this.elementIds=e;const r=s(this.target,\"aria-describedby\",t);this.releaseDescription=()=>{r(),this.overlay.elements.map((i,h)=>{i.id=this.elementIds[h]}),this.releaseDescription=a}}doPointerleave(){this.pointerentered=!1;const e=this.target;this.focusedin&&e.matches(\":focus-visible\")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},c))}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"keyup\",r=>this.handleKeyup(r),{signal:e}),this.target.addEventListener(\"focusin\",()=>this.handleTargetFocusin(),{signal:e}),this.target.addEventListener(\"focusout\",()=>this.handleTargetFocusout(),{signal:e}),this.target.addEventListener(\"pointerenter\",()=>this.handleTargetPointerenter(),{signal:e}),this.target.addEventListener(\"pointerleave\",()=>this.handleTargetPointerleave(),{signal:e}),this.overlay&&this.initOverlay()}initOverlay(){if(!this.abortController)return;const{signal:e}=this.abortController;this.overlay.addEventListener(\"pointerenter\",()=>this.handleHostPointerenter(),{signal:e}),this.overlay.addEventListener(\"pointerleave\",()=>this.handleHostPointerleave(),{signal:e})}removeSafariFocusRingClass(){n()&&this.target.classList.contains(o)&&this.target.classList.remove(o)}}\n//# sourceMappingURL=HoverController.js.map\n"],"names":["r","InteractionTypes","click","hover","longpress","lastInteractionType","Symbol","SAFARI_FOCUS_RING_CLASS","InteractionController","constructor","e","overlay","t","isPersistent","handleOverlayReady","i","this","target","isLazilyOpen","init","activelyOpening","open","type","customElements","whenDefined","then","async","Overlay","n","a","import","_overlay","removeController","addController","initOverlay","prepareDescription","call","releaseDescription","shouldCompleteOpen","abort","abortController","hostConnected","hostDisconnected","overlayTimer","warmUpDelay","coolDownDelay","isWarm","timeout","Object","assign","openTimer","cancelCooldownTimer","component","close","promise","Promise","o","resolve","window","setTimeout","Error","resetCooldownTimer","clearTimeout","cooldownTimeout","noop","guaranteedAllTransitionend","v","AbortController","Map","cleanup","m","l","requestAnimationFrame","p","set","propertyName","get","delete","size","addEventListener","has","cancelAnimationFrame","signal","nextFrame","AbstractOverlay","g","arguments","dispose","offset","willPreventClose","applyFocus","delayed","disabled","elementResolver","_elementResolver","ensureOnDOM","makeTransition","manageDelay","manageDialogOpen","managePopoverOpen","managePosition","placementController","_placementController","requestSlottable","returnFocus","state","manuallyKeepOpen","update","CustomEvent","bubbles","composed","cancelable","document","dispatchEvent","length","d","remove","reparentChildren","position","prepareCallback","Array","c","createComment","cloneNode","parentElement","getRootNode","replaceChild","insertAdjacentElement","T","b","s","slot","removeAttribute","u","applyOptions","hasAttribute","trigger","virtualTrigger","updateComplete","y","append","receivesFocus","triggerElement","placement","notImmediatelyClosable","disconnectedCallback","super","LONGPRESS_INSTRUCTIONS","touch","keyboard","mouse","strategies","preventNextToggle","handleClick","handlePointerdown","h","longpressState","handlePointerup","removeEventListener","handleLongpress","button","detail","source","handleKeydown","code","altKey","stopPropagation","stopImmediatePropagation","handleKeyup","elements","createElement","id","textContent","hidden","holdAffordance","elementIds","focusedin","pointerentered","removeSafariFocusRingClass","handleTargetFocusin","matches","classList","add","handleTargetFocusout","handleTargetPointerenter","hoverTimeout","handleTargetPointerleave","doPointerleave","handleHostPointerenter","handleHostPointerleave","prepareOverlayRelativeDescription","prepareContentRelativeDescription","map","push","tagName","toLowerCase","contains"],"mappings":"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"}