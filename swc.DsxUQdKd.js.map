{"version":3,"file":"swc.B_UHPtEW.js","sources":["../../../packages/overlay/src/slottable-request-directive.js","../../../packages/overlay/src/overlay-trigger-directive.js"],"sourcesContent":["\"use strict\";import{nothing as n,render as i}from\"@spectrum-web-components/base\";import{AsyncDirective as s,directive as o}from\"@spectrum-web-components/base/src/async-directive.js\";import{removeSlottableRequest as l}from\"./slottable-request-event.js\";export class SlottableRequestDirective extends s{render(e){return n}update(e,[t]){this.template=t,this.target!==e.element&&(this.target=e.element,this.renderBefore=this.target.children[0]),this.listenerHost=this.target,this.init()}handleSlottableRequest(e){if(e.target!==e.currentTarget)return;const t=e.data===l;i(t?void 0:this.template(),this.target,{renderBefore:this.renderBefore})}init(){var t;(t=this.listeners)==null||t.abort(),this.listeners=new AbortController;const{signal:e}=this.listeners;this.listenerHost.addEventListener(\"slottable-request\",r=>this.handleSlottableRequest(r),{signal:e})}disconnected(){var e;(e=this.listeners)==null||e.abort()}reconnected(){this.init()}}export const slottableRequest=o(SlottableRequestDirective);\n//# sourceMappingURL=slottable-request-directive.js.map\n","\"use strict\";import{nothing as g,render as v}from\"@spectrum-web-components/base\";import{directive as h}from\"@spectrum-web-components/base/src/async-directive.js\";import{strategies as c}from\"./strategies.js\";import{removeSlottableRequest as O}from\"./slottable-request-event.js\";import{SlottableRequestDirective as m}from\"./slottable-request-directive.js\";import{AbstractOverlay as d}from\"./AbstractOverlay.js\";import{InteractionTypes as f}from\"./InteractionController.js\";export class OverlayTriggerDirective extends m{constructor(){super(...arguments);this.defaultOptions={triggerInteraction:\"click\",overlayOptions:{type:\"auto\",offset:0}};this.options={...this.defaultOptions.overlayOptions}}render(t,r){return g}update(t,[r,e]){var s,l,a,p;this.options={...this.defaultOptions.overlayOptions,...e==null?void 0:e.overlayOptions},this.insertionOptions=e==null?void 0:e.insertionOptions,this.template=r,this.host=(s=t.options)==null?void 0:s.host;let i=!1;const o=(e==null?void 0:e.triggerInteraction)||this.defaultOptions.triggerInteraction,n=f[(l=this.strategy)==null?void 0:l.type]!==o;this.target!==t.element&&(this.target=t.element,i=!0),(i||n)&&((a=this.strategy)==null||a.abort(),this.strategy=new c[o](this.target,{isPersistent:!0,handleOverlayReady:y=>{this.listenerHost=this.overlay=y,this.init()}})),this.strategy.open=(p=e==null?void 0:e.open)!=null?p:!1}handleSlottableRequest(t){var i,o;if(t.target!==t.currentTarget)return;const r=t.data===O,e={};if(this.host&&(e.host=this.host),v(r?void 0:this.template(),this.overlay,e),r)this.overlay.remove();else{d.applyOptions(this.overlay,{...this.options,trigger:this.target});const n=typeof((i=this.insertionOptions)==null?void 0:i.el)==\"function\"?this.insertionOptions.el():((o=this.insertionOptions)==null?void 0:o.el)||this.target,{where:s=\"afterend\"}=this.insertionOptions||{};n.insertAdjacentElement(s,this.overlay)}}disconnected(){var t;this.overlay&&(this.overlay.open=!1,this.overlay.remove()),(t=this.strategy)==null||t.clearOverlay(),super.disconnected()}reconnected(){}}export const trigger=h(OverlayTriggerDirective);\n//# sourceMappingURL=overlay-trigger-directive.js.map\n"],"names":["SlottableRequestDirective","s","render","e","n","update","t","this","template","target","element","renderBefore","children","listenerHost","init","handleSlottableRequest","currentTarget","data","l","i","listeners","abort","AbortController","signal","addEventListener","r","disconnected","reconnected","trigger","h","m","constructor","super","arguments","defaultOptions","triggerInteraction","overlayOptions","type","offset","options","g","a","p","insertionOptions","host","o","f","strategy","c","isPersistent","handleOverlayReady","y","overlay","open","O","v","remove","d","applyOptions","el","where","insertAdjacentElement","clearOverlay"],"mappings":"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"}