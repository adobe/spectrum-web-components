{"version":3,"file":"swc.DfF9MWIF.js","sources":["../../../tools/reactive-controllers/src/ElementResolution.js"],"sourcesContent":["\"use strict\";export const elementResolverUpdatedSymbol=Symbol(\"element resolver updated\");export class ElementResolutionController{constructor(e,{selector:t}={selector:\"\"}){this._element=null;this._selector=\"\";this.mutationCallback=e=>{let t=!1;e.forEach(s=>{if(!t){if(s.type===\"childList\"){const r=this.element&&[...s.removedNodes].includes(this.element),l=!!this.selector&&[...s.addedNodes].some(this.elementIsSelected);t=t||r||l}if(s.type===\"attributes\"){const r=s.target===this.element,l=!!this.selector&&this.elementIsSelected(s.target);t=t||r||l}}}),t&&this.resolveElement()};this.elementIsSelected=e=>{var t;return this.selectorIsId?(e==null?void 0:e.id)===this.selectorAsId:(t=e==null?void 0:e.matches)==null?void 0:t.call(e,this.selector)};this.host=e,this.selector=t,this.observer=new MutationObserver(this.mutationCallback),this.host.addController(this)}get element(){return this._element}set element(e){if(e===this.element)return;const t=this.element;this._element=e,this.host.requestUpdate(elementResolverUpdatedSymbol,t)}get selector(){return this._selector}set selector(e){e!==this.selector&&(this.releaseElement(),this._selector=e,this.resolveElement())}get selectorAsId(){return this.selector.slice(1)}get selectorIsId(){return!!this.selector&&this.selector.startsWith(\"#\")}hostConnected(){this.resolveElement(),this.observer.observe(this.host.getRootNode(),{subtree:!0,childList:!0,attributes:!0})}hostDisconnected(){this.releaseElement(),this.observer.disconnect()}resolveElement(){if(!this.selector){this.releaseElement();return}const e=this.host.getRootNode();this.element=this.selectorIsId?e.getElementById(this.selectorAsId):e.querySelector(this.selector)}releaseElement(){this.element=null}}\n//# sourceMappingURL=ElementResolution.js.map\n"],"names":["elementResolverUpdatedSymbol","Symbol","ElementResolutionController","constructor","e","selector","t","this","_element","_selector","mutationCallback","forEach","s","type","r","element","removedNodes","includes","l","addedNodes","some","elementIsSelected","target","resolveElement","selectorIsId","id","selectorAsId","matches","call","host","observer","MutationObserver","addController","requestUpdate","releaseElement","slice","startsWith","hostConnected","observe","getRootNode","subtree","childList","attributes","hostDisconnected","disconnect","getElementById","querySelector"],"mappings":"AAaa,MAAAA,EAA+BC,OAAO,4BAE5C,MAAMC,EAyCTC,WAAAA,CACIC,GACEC,SAAAC,GAAmC,CAAED,SAAU,KA7BrDE,KAAQC,SAA+B,KAiBvCD,KAAQE,UAAY,GAsBpBF,KAAUG,iBAAsCN,IAC5C,IAAIE,GAAkB,EACtBF,EAAaO,QAASC,IAClB,IAAIN,EACJ,IAAsB,cAAlBM,EAASC,KAAsB,CAC/B,MAAMC,EACFP,KAAKQ,SACL,IAAIH,EAASI,cAAcC,SAASV,KAAKQ,SACvCG,IACAX,KAAKF,UACN,IAAIO,EAASO,YAA8BC,KACxCb,KAAKc,mBAEbf,EACIA,GACAQ,GACAI,CACR,CACA,GAAsB,eAAlBN,EAASC,KAAuB,CAChC,MAAMC,EACFF,EAASU,SAAWf,KAAKQ,QACvBG,IACAX,KAAKF,UACPE,KAAKc,kBAAkBT,EAASU,QACpChB,EACIA,GACAQ,GACAI,CACR,CAAA,IAEAZ,GACAC,KAAKgB,kBAkCbhB,KAAQc,kBAAqBjB,IArIjC,IAAAE,EAsIQ,OAAOC,KAAKiB,cACN,MAAApB,OAAA,EAAAA,EAAIqB,MAAOlB,KAAKmB,aAChB,OAAApB,EAAA,MAAAF,OAAA,EAAAA,EAAIuB,cAAJ,EAAArB,EAAAsB,KAAAxB,EAAcG,KAAKF,WA5EzBE,KAAKsB,KAAOzB,EACZG,KAAKF,SAAWC,EAChBC,KAAKuB,SAAW,IAAIC,iBAAiBxB,KAAKG,kBAG1CH,KAAKsB,KAAKG,cAAczB,KAC5B,CAlDA,WAAIQ,GACA,OAAOR,KAAKC,QAChB,CAEA,WAAIO,CAAQX,GACR,GAAIA,IAAYG,KAAKQ,QAAS,OAC9B,MAAMT,EAAWC,KAAKQ,QACtBR,KAAKC,SAAWJ,EAGhBG,KAAKsB,KAAKI,cAAcjC,EAA8BM,EAC1D,CAQA,YAAID,GACA,OAAOE,KAAKE,UAGhB,YAAIJ,CAASD,GACLA,IAAaG,KAAKF,WACtBE,KAAK2B,iBACL3B,KAAKE,UAAYL,EACjBG,KAAKgB,iBACT,CAIA,gBAAIG,GACA,OAAOnB,KAAKF,SAAS8B,MAAM,EAC/B,CAEA,gBAAIX,GACA,QAASjB,KAAKF,UAAYE,KAAKF,SAAS+B,WAAW,IACvD,CAiDOC,aAAAA,GACH9B,KAAKgB,iBACLhB,KAAKuB,SAASQ,QAAQ/B,KAAKsB,KAAKU,cAAe,CAC3CC,SAAS,EACTC,WAAW,EACXC,YAAY,GAEpB,CAEOC,gBAAAA,GACHpC,KAAK2B,iBACL3B,KAAKuB,SAASc,YAClB,CAEQrB,cAAAA,GACJ,IAAKhB,KAAKF,SAEN,YADAE,KAAK2B,iBAIT,MAAM9B,EAASG,KAAKsB,KAAKU,cACzBhC,KAAKQ,QAAUR,KAAKiB,aACbpB,EAAOyC,eAAetC,KAAKmB,cAC3BtB,EAAO0C,cAAcvC,KAAKF,SACrC,CAEQ6B,cAAAA,GACJ3B,KAAKQ,QAAU,IACnB"}