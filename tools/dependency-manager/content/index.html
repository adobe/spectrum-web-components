<html><head></head><body><sp-tab-panel class="section" value="overview"> <div class="headerContainer spectrum-Typography"><h2 id="overview" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Overview</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#overview"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Overview</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">The <code class="spectrum-Code">DependencyManagerController</code> is a <sp-link href="https://lit.dev/docs/composition/controllers/">reactive controller</sp-link> designed to manage the availability of custom element dependencies in your host element. It helps gate rendering and functional behavior before and after the presence of required custom elements, which is especially useful when lazily loading custom element definitions across the lifecycle of your application.</p> <div class="headerContainer spectrum-Typography"><h3 id="features" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Features</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#features"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Features</span></sp-link><sp-divider size="m"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li><strong>Lazy loading support</strong>: Delays functionality until required custom elements are registered</li> <li><strong>Multiple dependency tracking</strong>: Manages any number of custom element dependencies</li> <li><strong>Reactive loading state</strong>: Automatically updates the host when all dependencies are loaded</li> <li><strong>Async registration handling</strong>: Works seamlessly with dynamic imports and lazy loading</li> </ul> <div class="headerContainer spectrum-Typography"><h3 id="usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Usage</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Usage</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://www.npmjs.com/package/@spectrum-web-components/reactive-controllers"><img src="https://img.shields.io/npm/v/@spectrum-web-components/reactive-controllers?style=for-the-badge" alt="See it on NPM!"></sp-link> <sp-link href="https://bundlephobia.com/result?p=@spectrum-web-components/reactive-controllers"><img src="https://img.shields.io/bundlephobia/minzip/@spectrum-web-components/reactive-controllers?style=for-the-badge" alt="How big is this package in your project?"></sp-link></p> <code-example class="language-bash" preprocessed="preprocessed"><pre class="language-bash" slot="code"><span class="token function">yarn</span> <span class="token function">add</span> @spectrum-web-components/reactive-controllers</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Import the <code class="spectrum-Code">DependencyManagerController</code> via:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> DependencyManagerController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/DependencyManger.js'</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="examples" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Examples</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#examples"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Examples</span></sp-link><sp-divider size="m"></sp-divider></div><div class="headerContainer spectrum-Typography"><h4 id="basic-usage-with-lazy-loading" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Basic usage with lazy loading</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#basic-usage-with-lazy-loading"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Basic usage with lazy loading</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">A <code class="spectrum-Code">Host</code> element that renders different content depending on the <code class="spectrum-Code">loaded</code> state of a heavy dependency:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DependencyManagerController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/DependencyManger.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'@spectrum-web-components/button/sp-button.js'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">LazyHost</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    dependencyManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DependencyManagerController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    state <span class="token operator">=</span> <span class="token string">'initial'</span><span class="token punctuation">;</span>

    <span class="token function">forwardState</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">=</span> <span class="token string">'heavy'</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">requestUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> isInitialState <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>state <span class="token operator">===</span> <span class="token string">'initial'</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span>isInitialState <span class="token operator">||</span> <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span>loaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>isInitialState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// When not in the initial state, this element depends on &lt;some-heavy-element&gt;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'some-heavy-element'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">// Lazily load that element</span>
                <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./some-heavy-element.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>

            <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;sp-button
                    @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>forwardState<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                    ?pending=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">!</span>isInitialState <span class="token operator">&amp;&amp;</span>
                    <span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span>loaded<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                    aria-live="polite"
                &gt;
                    </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token operator">!</span>isInitialState <span class="token operator">?</span> <span class="token string">'Loading...'</span> <span class="token operator">:</span> <span class="token string">'Go to next state'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                &lt;/sp-button&gt;
            </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// &lt;some-heavy-element&gt; has now been loaded and can be rendered</span>
            <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;some-heavy-element&gt;&lt;/some-heavy-element&gt;
            </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'lazy-host'</span><span class="token punctuation">,</span> LazyHost<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="multiple-dependencies" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Multiple dependencies</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#multiple-dependencies"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Multiple dependencies</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Manage multiple custom element dependencies:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DependencyManagerController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/DependencyManger.js'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MultiDependencyHost</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    dependencyManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DependencyManagerController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Add multiple dependencies</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'sp-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'sp-dialog'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'sp-progress-circle'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Lazy load all dependencies</span>
        <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@spectrum-web-components/button/sp-button.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'@spectrum-web-components/dialog/sp-dialog.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span><span class="token punctuation">(</span>
            <span class="token string">'@spectrum-web-components/progress-circle/sp-progress-circle.js'</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span>loaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;div role="status" aria-live="polite"&gt;
                    Loading components...
                &lt;/div&gt;
            </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;sp-button&gt;Open Dialog&lt;/sp-button&gt;
            &lt;sp-dialog open&gt;
                &lt;h2 slot="heading"&gt;Dialog Title&lt;/h2&gt;
                &lt;p&gt;All dependencies loaded successfully!&lt;/p&gt;
            &lt;/sp-dialog&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'multi-dependency-host'</span><span class="token punctuation">,</span> MultiDependencyHost<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="conditional-feature-loading" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Conditional feature loading</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#conditional-feature-loading"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Conditional feature loading</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Load features based on user interaction or conditions:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> LitElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> property <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DependencyManagerController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/DependencyManger.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">'@spectrum-web-components/button/sp-button.js'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">FeatureLoader</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    dependencyManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DependencyManagerController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
    activeFeature <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

    <span class="token function">loadFeature</span><span class="token punctuation">(</span>featureName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>activeFeature <span class="token operator">=</span> featureName<span class="token punctuation">;</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span>featureName<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'chart'</span><span class="token operator">:</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'chart-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./features/chart-component.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'table'</span><span class="token operator">:</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'table-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./features/table-component.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'form'</span><span class="token operator">:</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'form-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./features/form-component.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">requestUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">renderFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span>loaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                &lt;div
                    role="status"
                    aria-live="polite"
                    aria-label="Loading </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>activeFeature<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">"
                &gt;
                    Loading </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>activeFeature<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">...
                &lt;/div&gt;
            </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>activeFeature<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'chart'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                    &lt;chart-component&gt;&lt;/chart-component&gt;
                </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'table'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                    &lt;table-component&gt;&lt;/table-component&gt;
                </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'form'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                    &lt;form-component&gt;&lt;/form-component&gt;
                </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;nav role="navigation" aria-label="Feature selection"&gt;
                &lt;sp-button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadFeature</span><span class="token punctuation">(</span><span class="token string">'chart'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
                    Load Chart
                &lt;/sp-button&gt;
                &lt;sp-button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadFeature</span><span class="token punctuation">(</span><span class="token string">'table'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
                    Load Table
                &lt;/sp-button&gt;
                &lt;sp-button @click=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">loadFeature</span><span class="token punctuation">(</span><span class="token string">'form'</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;
                    Load Form
                &lt;/sp-button&gt;
            &lt;/nav&gt;

            &lt;div role="region" aria-label="Feature content"&gt;
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderFeature</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
            &lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'feature-loader'</span><span class="token punctuation">,</span> FeatureLoader<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="tracking-load-state-changes" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Tracking load state changes</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#tracking-load-state-changes"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Tracking load state changes</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Use the <code class="spectrum-Code">dependencyManagerLoadedSymbol</code> to react to loading state changes:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> LitElement<span class="token punctuation">,</span> PropertyValues <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    DependencyManagerController<span class="token punctuation">,</span>
    dependencyManagerLoadedSymbol<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/DependencyManger.js'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">TrackingHost</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    dependencyManager <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DependencyManagerController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">connectedCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token string">'heavy-component'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">'./heavy-component.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> override <span class="token function">willUpdate</span><span class="token punctuation">(</span>changes<span class="token operator">:</span> PropertyValues<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>changes<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>dependencyManagerLoadedSymbol<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> wasLoaded <span class="token operator">=</span> changes<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>dependencyManagerLoadedSymbol<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>wasLoaded <span class="token operator">&amp;&amp;</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span>loaded<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">// Dependencies just finished loading</span>
                <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'All dependencies loaded!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token comment">// Announce to screen readers</span>
                <span class="token keyword">const</span> announcement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                announcement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                announcement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-live'</span><span class="token punctuation">,</span> <span class="token string">'polite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                announcement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token string">'Components loaded successfully'</span><span class="token punctuation">;</span>
                <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token operator">?.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>announcement<span class="token punctuation">)</span><span class="token punctuation">;</span>

                <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> announcement<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div&gt;
                </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>dependencyManager<span class="token punctuation">.</span>loaded
                    <span class="token operator">?</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                          &lt;heavy-component&gt;&lt;/heavy-component&gt;
                      </span><span class="token template-punctuation string">`</span></span>
                    <span class="token operator">:</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
                          &lt;p&gt;Loading...&lt;/p&gt;
                      </span><span class="token template-punctuation string">`</span></span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
            &lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'tracking-host'</span><span class="token punctuation">,</span> TrackingHost<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="accessibility" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Accessibility</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#accessibility"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Accessibility</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">When using <code class="spectrum-Code">DependencyManagerController</code> to manage lazy-loaded components, consider these accessibility best practices:</p> <div class="headerContainer spectrum-Typography"><h4 id="loading-states" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Loading states</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#loading-states"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Loading states</span></sp-link><sp-divider size="s"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li><strong>Provide clear feedback</strong>: Always inform users when content is loading using <code class="spectrum-Code">role="status"</code> and <code class="spectrum-Code">aria-live="polite"</code>.</li> <li><strong>Use aria-busy</strong>: Set <code class="spectrum-Code">aria-busy="true"</code> on containers while dependencies are loading.</li> <li><strong>Loading indicators</strong>: Include visible loading indicators (spinners, progress bars) for better user experience.</li> </ul> <div class="headerContainer spectrum-Typography"><h4 id="screen-reader-announcements" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Screen reader announcements</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#screen-reader-announcements"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Screen reader announcements</span></sp-link><sp-divider size="s"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li>Announce when loading begins: Use <code class="spectrum-Code">aria-live="polite"</code> regions to notify screen reader users.</li> <li>Announce when loading completes: Inform users when content has finished loading.</li> <li>Avoid announcement spam: Debounce or throttle announcements if multiple components load in quick succession.</li> </ul> <div class="headerContainer spectrum-Typography"><h4 id="keyboard-accessibility" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Keyboard accessibility</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#keyboard-accessibility"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Keyboard accessibility</span></sp-link><sp-divider size="s"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li>Ensure keyboard focus is managed correctly when lazy-loaded components appear.</li> <li>Don't trap focus in loading states.</li> <li>Return focus to a logical location after content loads.</li> </ul> <div class="headerContainer spectrum-Typography"><h3 id="performance-considerations" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Performance considerations</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#performance-considerations"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Performance considerations</span></sp-link><sp-divider size="m"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li><strong>Code splitting</strong>: Use the dependency manager with dynamic imports to split code and reduce initial bundle size.</li> <li><strong>Lazy loading strategy</strong>: Load components just-in-time based on user interaction or route changes.</li> <li><strong>Preloading</strong>: Consider preloading critical dependencies during idle time using <code class="spectrum-Code">requestIdleCallback()</code>.</li> <li><strong>Caching</strong>: Browsers will cache imported modules, so subsequent loads are fast.</li> </ul> </sp-tab-panel></body></html>