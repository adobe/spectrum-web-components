<html><head></head><body><sp-tab-panel class="section" value="overview"> <div class="headerContainer spectrum-Typography"><h2 id="overview" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Overview</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#overview"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Overview</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">The <code class="spectrum-Code">SystemResolutionController</code> is a <sp-link href="https://lit.dev/docs/composition/controllers/">reactive controller</sp-link> that resolves and tracks the Spectrum design system variant context from parent <code class="spectrum-Code">&lt;sp-theme&gt;</code> elements in the DOM tree. It provides a standardized way for components to detect which Spectrum design system is in use (Spectrum, Spectrum 2, or Express) and react to changes dynamically.</p> <div class="headerContainer spectrum-Typography"><h3 id="features" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Features</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#features"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Features</span></sp-link><sp-divider size="m"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li><strong>Automatic system detection</strong>: Resolves system context from parent <code class="spectrum-Code">&lt;sp-theme&gt;</code> elements</li> <li><strong>Reactive updates</strong>: Automatically updates when the theme system changes</li> <li><strong>Event-based communication</strong>: Uses custom events to query and subscribe to system context</li> <li><strong>Cleanup management</strong>: Automatically unsubscribes when component disconnects</li> <li><strong>Type-safe</strong>: Provides TypeScript types for system variants</li> </ul> <blockquote> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Note</strong>: This is a private Beta API and is subject to changes.</p> </blockquote> <div class="headerContainer spectrum-Typography"><h3 id="usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Usage</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Usage</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://www.npmjs.com/package/@spectrum-web-components/reactive-controllers"><img src="https://img.shields.io/npm/v/@spectrum-web-components/reactive-controllers?style=for-the-badge" alt="See it on NPM!"></sp-link> <sp-link href="https://bundlephobia.com/result?p=@spectrum-web-components/reactive-controllers"><img src="https://img.shields.io/bundlephobia/minzip/@spectrum-web-components/reactive-controllers?style=for-the-badge" alt="How big is this package in your project?"></sp-link></p> <code-example class="language-bash" preprocessed="preprocessed"><pre class="language-bash" slot="code"><span class="token function">yarn</span> <span class="token function">add</span> @spectrum-web-components/reactive-controllers</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Import the <code class="spectrum-Code">SystemResolutionController</code> via:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span>
    SystemResolutionController<span class="token punctuation">,</span>
    systemResolverUpdatedSymbol<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/SystemContextResolution.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> SystemVariant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/theme'</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="examples" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Examples</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#examples"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Examples</span></sp-link><sp-divider size="m"></sp-divider></div><div class="headerContainer spectrum-Typography"><h4 id="basic-usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Basic usage</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#basic-usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Basic usage</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">A simple component that displays the current design system variant.</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SystemResolutionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/SystemContextResolution.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> SystemVariant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/theme'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SystemAwareComponent</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> systemResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SystemResolutionController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> system <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>systemResolver<span class="token punctuation">.</span>system<span class="token punctuation">;</span>

        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div&gt;Current design system: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>system<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'system-aware-component'</span><span class="token punctuation">,</span> SystemAwareComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Usage with <code class="spectrum-Code">&lt;sp-theme&gt;</code>:</p> <code-example class="language-html-no-demo" preprocessed="preprocessed"><pre class="language-html-no-demo" slot="code"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-theme</span> <span class="token attr-name">system</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>express<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light<span class="token punctuation">"</span></span> <span class="token attr-name">scale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>medium<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>system-aware-component</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>system-aware-component</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-theme</span><span class="token punctuation">&gt;</span></span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="reacting-to-system-changes" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Reacting to system changes</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#reacting-to-system-changes"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Reacting to system changes</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Detect system changes using the symbol and apply system-specific styles or load resources dynamically.</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html<span class="token punctuation">,</span> css <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> property <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>
    SystemResolutionController<span class="token punctuation">,</span>
    systemResolverUpdatedSymbol<span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/SystemContextResolution.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> SystemVariant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/theme'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AdaptiveComponent</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> systemResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SystemResolutionController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> String<span class="token punctuation">,</span> reflect<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">private</span> currentSystem<span class="token operator">:</span> SystemVariant <span class="token operator">=</span> <span class="token string">'spectrum'</span><span class="token punctuation">;</span>

    <span class="token keyword">static</span> styles <span class="token operator">=</span> css<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        :host {
            display: block;
            padding: 16px;
        }

        :host([current-system='express']) {
            /* Express-specific styles */
            border-left: 3px solid blue;
        }

        :host([current-system='spectrum-two']) {
            /* Spectrum 2-specific styles */
            border-left: 3px solid green;
        }
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> override <span class="token function">update</span><span class="token punctuation">(</span>changes<span class="token operator">:</span> Map<span class="token operator">&lt;</span>PropertyKey<span class="token punctuation">,</span> <span class="token builtin">unknown</span><span class="token operator">&gt;</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>changes<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span>systemResolverUpdatedSymbol<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>currentSystem <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>systemResolver<span class="token punctuation">.</span>system<span class="token punctuation">;</span>
            <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'System context changed to:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">.</span>currentSystem<span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token comment">// Perform system-specific logic</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleSystemChange</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSystem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">update</span><span class="token punctuation">(</span>changes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">handleSystemChange</span><span class="token punctuation">(</span>system<span class="token operator">:</span> SystemVariant<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
        <span class="token comment">// Implement system-specific behavior</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span>system<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'express'</span><span class="token operator">:</span>
                <span class="token comment">// Load Express-specific resources</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'spectrum-two'</span><span class="token operator">:</span>
                <span class="token comment">// Load Spectrum 2-specific resources</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'spectrum'</span><span class="token operator">:</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token comment">// Load Spectrum resources</span>
                <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div&gt;
                &lt;h3&gt;Adaptive Component&lt;/h3&gt;
                &lt;p&gt;Currently using: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>currentSystem<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&lt;/p&gt;
            &lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'adaptive-component'</span><span class="token punctuation">,</span> AdaptiveComponent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="conditional-rendering-based-on-system" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Conditional rendering based on system</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#conditional-rendering-based-on-system"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Conditional rendering based on system</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Render completely different UI layouts based on the active design system variant.</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SystemResolutionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/SystemContextResolution.js'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SystemSpecificContent</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> systemResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SystemResolutionController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">renderExpressContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class="express-ui"&gt;
                &lt;p&gt;Optimized for high-density enterprise workflows&lt;/p&gt;
                &lt;button&gt;Express Action&lt;/button&gt;
            &lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">renderSpectrum2Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class="spectrum2-ui"&gt;
                &lt;p&gt;Modern Spectrum 2 design&lt;/p&gt;
                &lt;button&gt;Spectrum 2 Action&lt;/button&gt;
            &lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">renderSpectrumContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class="spectrum-ui"&gt;
                &lt;p&gt;Classic Spectrum design&lt;/p&gt;
                &lt;button&gt;Standard Action&lt;/button&gt;
            &lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>systemResolver<span class="token punctuation">.</span>system<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">case</span> <span class="token string">'express'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderExpressContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'spectrum-two'</span><span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderSpectrum2Content</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">case</span> <span class="token string">'spectrum'</span><span class="token operator">:</span>
            <span class="token keyword">default</span><span class="token operator">:</span>
                <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">renderSpectrumContent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'system-specific-content'</span><span class="token punctuation">,</span> SystemSpecificContent<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="loading-system-specific-assets" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Loading system-specific assets</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#loading-system-specific-assets"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Loading system-specific assets</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Load different icon sets or images based on the system variant for consistent visual design.</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> property <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit/decorators.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> SystemResolutionController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/SystemContextResolution.js'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> SystemVariant <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/theme'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">IconLoader</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> systemResolver <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SystemResolutionController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token decorator"><span class="token at operator">@</span><span class="token function">property</span></span><span class="token punctuation">(</span><span class="token punctuation">{</span> type<span class="token operator">:</span> String <span class="token punctuation">}</span><span class="token punctuation">)</span>
    iconName <span class="token operator">=</span> <span class="token string">''</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token function">getIconPath</span><span class="token punctuation">(</span>system<span class="token operator">:</span> SystemVariant<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">/assets/icons/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>system<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">/</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>iconName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.svg</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> iconSrc <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getIconPath</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>systemResolver<span class="token punctuation">.</span>system<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;img
                src=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>iconSrc<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                alt=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>iconName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
                aria-label="Icon for </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>iconName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>systemResolver
                    <span class="token punctuation">.</span>system<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> design system"
            /&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

customElements<span class="token punctuation">.</span><span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'icon-loader'</span><span class="token punctuation">,</span> IconLoader<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Usage:</p> <code-example class="language-html-no-demo" preprocessed="preprocessed"><pre class="language-html-no-demo" slot="code"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-theme</span> <span class="token attr-name">system</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>express<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light<span class="token punctuation">"</span></span> <span class="token attr-name">scale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>medium<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>icon-loader</span> <span class="token attr-name">icon-name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>settings<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>icon-loader</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-theme</span><span class="token punctuation">&gt;</span></span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="nested-theme-contexts" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Nested theme contexts</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#nested-theme-contexts"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Nested theme contexts</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Components automatically resolve to their nearest parent <code class="spectrum-Code">&lt;sp-theme&gt;</code>, allowing different system variants in nested contexts.</p> <code-example class="language-html-no-demo" preprocessed="preprocessed"><pre class="language-html-no-demo" slot="code"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-theme</span> <span class="token attr-name">system</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spectrum<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light<span class="token punctuation">"</span></span> <span class="token attr-name">scale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>medium<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>system-aware-component</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>system-aware-component</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- Uses 'spectrum' --&gt;</span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-theme</span> <span class="token attr-name">system</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>express<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>dark<span class="token punctuation">"</span></span> <span class="token attr-name">scale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>large<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>system-aware-component</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>system-aware-component</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!-- Uses 'express' --&gt;</span>

        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-theme</span> <span class="token attr-name">system</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>spectrum-two<span class="token punctuation">"</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>light<span class="token punctuation">"</span></span> <span class="token attr-name">scale</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>medium<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>system-aware-component</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>system-aware-component</span><span class="token punctuation">&gt;</span></span>
            <span class="token comment">&lt;!-- Uses 'spectrum-two' --&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-theme</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-theme</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-theme</span><span class="token punctuation">&gt;</span></span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="accessibility" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Accessibility</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#accessibility"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Accessibility</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">When using <code class="spectrum-Code">SystemResolutionController</code> to adapt UI based on design systems, consider these accessibility best practices:</p> <div class="headerContainer spectrum-Typography"><h4 id="screen-reader-announcements" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Screen reader announcements</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#screen-reader-announcements"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Screen reader announcements</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">When the system context changes dynamically, consider announcing it:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">private</span> <span class="token function">announceSystemChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> announcement <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    announcement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'role'</span><span class="token punctuation">,</span> <span class="token string">'status'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    announcement<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'aria-live'</span><span class="token punctuation">,</span> <span class="token string">'polite'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    announcement<span class="token punctuation">.</span>textContent <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Design system updated to </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>systemResolver<span class="token punctuation">.</span>system<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

    <span class="token comment">// Add to DOM temporarily</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>announcement<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> announcement<span class="token punctuation">.</span><span class="token function">remove</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h4 id="aria-attributes" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">ARIA attributes</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#aria-attributes"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled ARIA attributes</span></sp-link><sp-divider size="s"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li>Maintain proper ARIA attributes regardless of system variant.</li> <li>Ensure labels and descriptions remain accurate after system changes.</li> <li>Don't rely on visual styling alone to convey information.</li> </ul> <div class="headerContainer spectrum-Typography"><h4 id="keyboard-navigation" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Keyboard navigation</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#keyboard-navigation"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Keyboard navigation</span></sp-link><sp-divider size="s"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li>Keyboard navigation patterns should remain consistent across system variants.</li> <li>Focus indicators must be visible in all system themes.</li> <li>Tab order should not change based on system variant.</li> </ul> <div class="headerContainer spectrum-Typography"><h4 id="color-contrast" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Color contrast</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#color-contrast"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Color contrast</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Different system variants may have different color palettes:</p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Verify that all system variants meet <sp-link href="https://www.w3.org/WAI/WCAG21/Understanding/contrast-minimum.html">WCAG 2.1 Level AA contrast requirements</sp-link>.</li> <li>Test with system-specific color tokens.</li> <li>Consider high contrast modes for each system variant.</li> </ul> <div class="headerContainer spectrum-Typography"><h3 id="how-it-works" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">How it works</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#how-it-works"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled How it works</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">The controller uses an event-based protocol to communicate with <code class="spectrum-Code">&lt;sp-theme&gt;</code> elements:</p> <ol class="spectrum-Body spectrum-Body--sizeM"> <li>When the host connects, it dispatches an <code class="spectrum-Code">sp-system-context</code> event that bubbles up the DOM</li> <li>The nearest <code class="spectrum-Code">&lt;sp-theme&gt;</code> element catches this event and calls the provided callback with the current system variant</li> <li>The theme also provides an <code class="spectrum-Code">unsubscribe</code> function for cleanup</li> <li>When the system attribute changes on the theme, it notifies all subscribed components</li> <li>When the host disconnects, the controller automatically unsubscribes</li> </ol> <div class="headerContainer spectrum-Typography"><h3 id="related-components" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Related components</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#related-components"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Related components</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">The <code class="spectrum-Code">SystemResolutionController</code> works with:</p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li><sp-link href="../../tools/theme/"><code class="spectrum-Code">&lt;sp-theme&gt;</code></sp-link> - Provides the system context</li> <li>All Spectrum Web Components that need to adapt to different design systems</li> </ul> <div class="headerContainer spectrum-Typography"><h3 id="best-practices" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Best practices</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#best-practices"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Best practices</span></sp-link><sp-divider size="m"></sp-divider></div><div class="headerContainer spectrum-Typography"><h4 id="do%3A" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Do:</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#do%3A"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Do:</span></sp-link><sp-divider size="s"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li>Use the controller to adapt visual presentation to the current system</li> <li>Maintain consistent functionality across all system variants</li> <li>Test your component with all three system variants</li> <li>Clean up properly (the controller handles this automatically)</li> </ul> <div class="headerContainer spectrum-Typography"><h4 id="don't%3A" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Don't:</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#don't%3A"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Don't:</span></sp-link><sp-divider size="s"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li>Don't completely change component behavior based on system variant</li> <li>Don't remove accessibility features in certain systems</li> <li>Don't assume a default system - always check <code class="spectrum-Code">systemResolver.system</code></li> <li>Don't query the system context manually - use the controller</li> </ul> <div class="headerContainer spectrum-Typography"><h3 id="resources" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Resources</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#resources"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Resources</span></sp-link><sp-divider size="m"></sp-divider></div><ul class="spectrum-Body spectrum-Body--sizeM"> <li><sp-link href="https://lit.dev/docs/composition/controllers/">Lit Reactive Controllers</sp-link> - Learn more about reactive controllers</li> <li><sp-link href="https://spectrum.adobe.com/">Spectrum Design System</sp-link> - Official Spectrum documentation</li> <li><sp-link href="../../tools/theme/">Spectrum Theme Component</sp-link> - Theme provider documentation</li> <li><sp-link href="https://s2.spectrum.adobe.com/">Spectrum 2 Design System</sp-link> - What's new in Spectrum 2</li> </ul> </sp-tab-panel></body></html>