<html><head></head><body><sp-tab-panel class="section" value="overview"> <div class="headerContainer spectrum-Typography"><h2 id="overview" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Overview</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#overview"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Overview</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://lit.dev/docs/composition/controllers/">Reactive controllers</sp-link> are a powerful tool for code reuse and composition within <sp-link href="https://lit.dev">Lit</sp-link>, a core dependency of Spectrum Web Components. They enable you to extract common behaviors into reusable packages that can be shared across multiple components, reducing code complexity and size while delivering a consistent user experience.</p> <div class="headerContainer spectrum-Typography"><h3 id="usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Usage</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Usage</span></sp-link><sp-divider size="m"></sp-divider></div><code-example class="language-bash" preprocessed="preprocessed"><pre class="language-bash" slot="code"><span class="token function">yarn</span> <span class="token function">add</span> @spectrum-web-components/reactive-controllers</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Reactive controllers are instantiated in your component and automatically hook into the component's lifecycle:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> LitElement<span class="token punctuation">,</span> html <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> MatchMediaController <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/reactive-controllers/src/MatchMedia.js'</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MyComponent</span> <span class="token keyword">extends</span> <span class="token class-name">LitElement</span> <span class="token punctuation">{</span>
    <span class="token comment">// Create controller instance</span>
    darkMode <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MatchMediaController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> <span class="token string">'(prefers-color-scheme: dark)'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Use controller state in render</span>
        <span class="token keyword">return</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
            &lt;div class=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">this</span><span class="token punctuation">.</span>darkMode<span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token string">'dark'</span> <span class="token operator">:</span> <span class="token string">'light'</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">&gt;Content&lt;/div&gt;
        </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="controller-lifecycle" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Controller lifecycle</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#controller-lifecycle"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Controller lifecycle</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Reactive controllers implement the <code class="spectrum-Code">ReactiveController</code> interface with the following optional lifecycle methods:</p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li><strong><code class="spectrum-Code">hostConnected()</code></strong>: Called when the host element is connected to the DOM</li> <li><strong><code class="spectrum-Code">hostDisconnected()</code></strong>: Called when the host element is disconnected from the DOM</li> <li><strong><code class="spectrum-Code">hostUpdate()</code></strong>: Called before the host's <code class="spectrum-Code">update()</code> method</li> <li><strong><code class="spectrum-Code">hostUpdated()</code></strong>: Called after the host's <code class="spectrum-Code">update()</code> method</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM">Controllers can also call <code class="spectrum-Code">host.requestUpdate()</code> to trigger an update cycle on the host element.</p> <div class="headerContainer spectrum-Typography"><h3 id="creating-your-own-controllers" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Creating your own controllers</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#creating-your-own-controllers"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Creating your own controllers</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">You can create custom reactive controllers by implementing the <code class="spectrum-Code">ReactiveController</code> interface:</p> <code-example class="language-typescript" preprocessed="preprocessed"><pre class="language-typescript" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> ReactiveController<span class="token punctuation">,</span> ReactiveElement <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'lit'</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">MyController</span> <span class="token keyword">implements</span> <span class="token class-name">ReactiveController</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> host<span class="token operator">:</span> ReactiveElement<span class="token punctuation">;</span>

    <span class="token function">constructor</span><span class="token punctuation">(</span>host<span class="token operator">:</span> ReactiveElement<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>host <span class="token operator">=</span> host<span class="token punctuation">;</span>
        <span class="token comment">// Register this controller with the host</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>host<span class="token punctuation">.</span><span class="token function">addController</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">hostConnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Called when host is connected to DOM</span>
    <span class="token punctuation">}</span>

    <span class="token function">hostDisconnected</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// Called when host is disconnected from DOM</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="available-controllers" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Available controllers</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#available-controllers"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Available controllers</span></sp-link><sp-divider size="m"></sp-divider></div><div class="headerContainer spectrum-Typography"><h4 id="colorcontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">ColorController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#colorcontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled ColorController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Manages and validates color values in various color spaces (RGB, HSL, HSV, Hex). Provides conversion between formats and state management for color-related interactions.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Color pickers and selectors</li> <li>Color input validation</li> <li>Color format conversion</li> <li>Theme customization UIs</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Multiple color format support (hex, RGB, HSL, HSV)</li> <li>Color validation</li> <li>Format preservation</li> <li>Undo/redo support</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../color-controller">Learn more →</sp-link></p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="dependencymanagercontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">DependencyManagerController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#dependencymanagercontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled DependencyManagerController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Manages the availability of custom element dependencies, enabling lazy loading patterns and progressive enhancement strategies.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Code splitting and lazy loading</li> <li>Progressive enhancement</li> <li>Route-based component loading</li> <li>Conditional feature loading</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Tracks custom element registration</li> <li>Reactive loading state</li> <li>Multiple dependency management</li> <li>Works with dynamic imports</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../dependency-manager">Learn more →</sp-link></p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="elementresolutioncontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">ElementResolutionController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#elementresolutioncontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled ElementResolutionController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Maintains an active reference to another element in the DOM tree, automatically tracking changes and updating when the DOM mutates.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Accessible label associations</li> <li>Focus trap management</li> <li>Form validation connections</li> <li>Dynamic element relationships</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Automatic DOM observation</li> <li>ID selector optimization</li> <li>Shadow DOM support</li> <li>Reactive updates</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../element-resolution">Learn more →</sp-link></p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="focusgroupcontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">FocusGroupController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#focusgroupcontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled FocusGroupController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Base controller for managing keyboard focus within groups of elements. Extended by <code class="spectrum-Code">RovingTabindexController</code> with tabindex management capabilities.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Custom composite widgets</li> <li>Keyboard navigation patterns</li> <li>Focus management</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Arrow key navigation</li> <li>Configurable direction modes</li> <li>Focus entry points</li> <li>Element enter actions</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Note:</strong> This controller is typically not used directly. Use <sp-link href="../roving-tab-index">RovingTabindexController</sp-link> instead for most use cases.</p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="languageresolutioncontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">LanguageResolutionController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#languageresolutioncontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled LanguageResolutionController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Resolves and tracks the language/locale context of the host element, responding to changes in the <code class="spectrum-Code">lang</code> attribute up the DOM tree.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Internationalization (i18n)</li> <li>Localized content</li> <li>RTL/LTR text direction</li> <li>Locale-specific formatting</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Automatic language detection</li> <li>Locale change tracking</li> <li>Supports Shadow DOM</li> <li>Bubbles up DOM tree</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../language-resolution">Learn more →</sp-link></p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="matchmediacontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">MatchMediaController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#matchmediacontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled MatchMediaController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Binds CSS media queries to reactive elements, automatically updating when queries match or unmatch.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Responsive design</li> <li>Dark mode detection</li> <li>Mobile/desktop layouts</li> <li>Print styles</li> <li>Accessibility preferences (prefers-reduced-motion, etc.)</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Multiple media query support</li> <li>Reactive updates</li> <li>Predefined queries (DARK_MODE, IS_MOBILE)</li> <li>Event-driven</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../match-media">Learn more →</sp-link></p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="pendingstatecontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">PendingStateController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#pendingstatecontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled PendingStateController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Manages pending/loading states for interactive elements, providing visual feedback and accessible state communication.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Async button actions</li> <li>Form submission states</li> <li>Loading indicators</li> <li>Progress feedback</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Automatic ARIA label management</li> <li>Progress circle rendering</li> <li>Label caching and restoration</li> <li>Disabled state awareness</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Note:</strong> Currently used primarily by Button component. May be deprecated in future versions.</p> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../pending-state">Learn more →</sp-link></p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="rovingtabindexcontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">RovingTabindexController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#rovingtabindexcontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled RovingTabindexController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Implements the W3C ARIA roving tabindex pattern for keyboard navigation in composite widgets, managing <code class="spectrum-Code">tabindex</code> attributes and arrow key navigation.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Toolbars</li> <li>Tab lists</li> <li>Menus</li> <li>Radio groups</li> <li>Listboxes</li> <li>Grids</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Arrow key navigation (with Home/End support)</li> <li>Automatic tabindex management</li> <li>Flexible direction modes (horizontal, vertical, both, grid)</li> <li>Skips disabled elements</li> <li>WCAG compliant</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../roving-tab-index">Learn more →</sp-link></p> <hr> <div class="headerContainer spectrum-Typography"><h4 id="systemcontextresolutioncontroller" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">SystemContextResolutionController</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#systemcontextresolutioncontroller"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled SystemContextResolutionController</span></sp-link><sp-divider size="s"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Resolves and tracks system-level context like color scheme and scale preferences from Spectrum theme providers.</p> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Use cases:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Theme integration</li> <li>Design system variant detection (Spectrum Classic, Express, Spectrum 2)</li> <li>System-specific asset loading</li> <li>Adaptive UI rendering</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Key features:</strong></p> <ul class="spectrum-Body spectrum-Body--sizeM"> <li>Automatic theme context resolution</li> <li>Reactive system variant updates</li> <li>Event-based communication with <code class="spectrum-Code">&lt;sp-theme&gt;</code></li> <li>Automatic cleanup on disconnect</li> </ul> <p class="spectrum-Body spectrum-Body--sizeM"><strong>Note:</strong> Private Beta API - subject to changes.</p> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="../system-context-resolution">Learn more →</sp-link></p> </sp-tab-panel></body></html>