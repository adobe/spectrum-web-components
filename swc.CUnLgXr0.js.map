{"version":3,"file":"swc.CI2drcAD.js","sources":["../../../packages/overlay/src/InteractionController.js","../../../packages/overlay/src/AbstractOverlay.js","../../../packages/overlay/src/overlay-timer.js","../../../tools/shared/src/reparent-children.js","../../../packages/overlay/src/LongpressController.js","../../../packages/overlay/src/strategies.js","../../../packages/overlay/src/ClickController.js","../../../packages/overlay/src/HoverController.js"],"sourcesContent":["\"use strict\";export var InteractionTypes=(r=>(r.click=\"click\",r.hover=\"hover\",r.longpress=\"longpress\",r))(InteractionTypes||{});export const lastInteractionType=Symbol(\"lastInteractionType\");export class InteractionController{constructor(e,{overlay:t,isPersistent:r,handleOverlayReady:i}){this.target=e;this.isLazilyOpen=!1;this.isPersistent=!1;this.isPersistent=!!r,this.handleOverlayReady=i,this.isPersistent&&this.init(),this.overlay=t}get activelyOpening(){return!1}get open(){var e,t;return(t=(e=this.overlay)==null?void 0:e.open)!=null?t:this.isLazilyOpen}set open(e){if(e!==this.open){if(this.isLazilyOpen=e,this.overlay){this.overlay.open=e,this.target[lastInteractionType]=this.type;return}e&&(customElements.whenDefined(\"sp-overlay\").then(async()=>{const{Overlay:t}=await import(\"./Overlay.js\");this.overlay=new t,this.overlay.open=!0,this.target[lastInteractionType]=this.type}),import(\"@spectrum-web-components/overlay/sp-overlay.js\"))}}get overlay(){return this._overlay}set overlay(e){var t;e&&this.overlay!==e&&(this.overlay&&this.overlay.removeController(this),this._overlay=e,this.overlay.addController(this),this.initOverlay(),this.prepareDescription(this.target),(t=this.handleOverlayReady)==null||t.call(this,this.overlay))}prepareDescription(e){}releaseDescription(){}shouldCompleteOpen(){}init(){}initOverlay(){}abort(){var e;this.releaseDescription(),(e=this.abortController)==null||e.abort()}hostConnected(){this.init()}hostDisconnected(){this.isPersistent||this.abort()}}\n//# sourceMappingURL=InteractionController.js.map\n","\"use strict\";import{SpectrumElement as g}from\"@spectrum-web-components/base\";import{reparentChildren as b}from\"@spectrum-web-components/shared/src/reparent-children.js\";import{OverlayTimer as O}from\"./overlay-timer.js\";export const overlayTimer=new O,noop=()=>{},guaranteedAllTransitionend=(i,v,e)=>{const r=new AbortController,n=new Map,a=()=>{r.abort(),e()};let m,l;const t=requestAnimationFrame(()=>{m=requestAnimationFrame(()=>{l=requestAnimationFrame(()=>{a()})})}),p=o=>{o.target===i&&(n.set(o.propertyName,n.get(o.propertyName)-1),n.get(o.propertyName)||n.delete(o.propertyName),n.size===0&&a())},d=o=>{o.target===i&&(n.has(o.propertyName)||n.set(o.propertyName,0),n.set(o.propertyName,n.get(o.propertyName)+1),cancelAnimationFrame(t),cancelAnimationFrame(m),cancelAnimationFrame(l))};i.addEventListener(\"transitionrun\",d,{signal:r.signal}),i.addEventListener(\"transitionend\",p,{signal:r.signal}),i.addEventListener(\"transitioncancel\",p,{signal:r.signal}),v()};export function nextFrame(){return new Promise(i=>requestAnimationFrame(()=>i()))}export class AbstractOverlay extends g{constructor(){super(...arguments);this.dispose=noop;this.offset=0;this.willPreventClose=!1}async applyFocus(e,r){}get delayed(){return!1}set delayed(e){}get disabled(){return!1}set disabled(e){}get elementResolver(){return this._elementResolver}set elementResolver(e){this._elementResolver=e}async ensureOnDOM(e){}async makeTransition(e){return null}async manageDelay(e){}async managePopoverOpen(){}managePosition(){}get open(){return!1}set open(e){}get placementController(){return this._placementController}set placementController(e){this._placementController=e}requestSlottable(){}returnFocus(){}get state(){return\"closed\"}set state(e){}manuallyKeepOpen(){}static update(){const e=new CustomEvent(\"sp-update-overlays\",{bubbles:!0,composed:!0,cancelable:!0});document.dispatchEvent(e)}static async open(e,r,n,a){await import(\"@spectrum-web-components/overlay/sp-overlay.js\");const m=arguments.length===2,l=n||e,t=new this;let p=!1;t.dispose=()=>{t.addEventListener(\"sp-closed\",()=>{p||(d(),p=!0),requestAnimationFrame(()=>{t.remove()})}),t.open=!1,t.dispose=noop};const d=b([l],t,{position:\"beforeend\",prepareCallback:s=>{const c=s.slot;return s.removeAttribute(\"slot\"),()=>{s.slot=c}}});if(!m&&l&&a){const s=e,c=r,u=a;return AbstractOverlay.applyOptions(t,{...u,delayed:u.delayed||l.hasAttribute(\"delayed\"),trigger:u.virtualTrigger||s,type:c===\"modal\"?\"modal\":c===\"hover\"?\"hint\":\"auto\"}),s.insertAdjacentElement(\"afterend\",t),await t.updateComplete,t.open=!0,t.dispose}const y=r;return t.append(l),AbstractOverlay.applyOptions(t,{...y,delayed:y.delayed||l.hasAttribute(\"delayed\")}),t.updateComplete.then(()=>{t.open=!0}),t}static applyOptions(e,r){var n,a;e.delayed=!!r.delayed,e.receivesFocus=(n=r.receivesFocus)!=null?n:\"auto\",e.triggerElement=r.trigger||null,e.type=r.type||\"modal\",e.offset=(a=r.offset)!=null?a:0,e.placement=r.placement,e.willPreventClose=!!r.notImmediatelyClosable}disconnectedCallback(){super.disconnectedCallback()}}\n//# sourceMappingURL=AbstractOverlay.js.map\n","\"use strict\";const t=1e3,s=1e3;export class OverlayTimer{constructor(e={}){this.warmUpDelay=1e3;this.coolDownDelay=1e3;this.isWarm=!1;this.timeout=0;Object.assign(this,e)}async openTimer(e){if(this.cancelCooldownTimer(),!this.component||e!==this.component)return this.component&&(this.close(this.component),this.cancelCooldownTimer()),this.component=e,this.isWarm?!1:(this.promise=new Promise(o=>{this.resolve=o,this.timeout=window.setTimeout(()=>{this.resolve&&(this.resolve(!1),this.isWarm=!0)},this.warmUpDelay)}),this.promise);if(this.promise)return this.promise;throw new Error(\"Inconsistent state\")}close(e){this.component&&this.component===e&&(this.resetCooldownTimer(),this.timeout>0&&(clearTimeout(this.timeout),this.timeout=0),this.resolve&&(this.resolve(!0),delete this.resolve),delete this.promise,delete this.component)}resetCooldownTimer(){this.isWarm&&(this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),this.cooldownTimeout=window.setTimeout(()=>{this.isWarm=!1,delete this.cooldownTimeout},this.coolDownDelay))}cancelCooldownTimer(){this.cooldownTimeout&&window.clearTimeout(this.cooldownTimeout),delete this.cooldownTimeout}}\n//# sourceMappingURL=overlay-timer.js.map\n","\"use strict\";function T(o,i,l=[]){for(let e=0;e<i.length;++e){const n=i[e],r=o[e],t=r.parentElement||r.getRootNode();l[e]&&l[e](n),t&&t!==r&&t.replaceChild(n,r),delete o[e]}return i}export const reparentChildren=(o,i,{position:l,prepareCallback:e}={position:\"beforeend\"})=>{let{length:n}=o;if(n===0)return()=>o;let r=1,t=0;(l===\"afterbegin\"||l===\"afterend\")&&(r=-1,t=n-1);const a=new Array(n),c=new Array(n),p=document.createComment(\"placeholder for reparented element\");do{const d=o[t];e&&(c[t]=e(d)),a[t]=p.cloneNode();const m=d.parentElement||d.getRootNode();m&&m!==d&&m.replaceChild(a[t],d),i.insertAdjacentElement(l,d),t+=r}while(--n>0);return function(){return T(a,o,c)}};\n//# sourceMappingURL=reparent-children.js.map\n","\"use strict\";import{isAndroid as a,isIOS as d}from\"@spectrum-web-components/shared/src/platform.js\";import{conditionAttributeWithId as p}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{randomID as l}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as r}from\"./AbstractOverlay.js\";import{InteractionController as h,InteractionTypes as c}from\"./InteractionController.js\";const g=300;export const LONGPRESS_INSTRUCTIONS={touch:\"Double tap and long press for additional options\",keyboard:\"Press Space or Alt+Down Arrow for additional options\",mouse:\"Click and hold for additional options\"};export class LongpressController extends h{constructor(){super(...arguments);this.type=c.longpress;this.longpressState=null;this.releaseDescription=r;this.handlePointerup=()=>{var e;clearTimeout(this.timeout),this.target&&(this.longpressState=((e=this.overlay)==null?void 0:e.state)===\"opening\"?\"pressed\":null,document.removeEventListener(\"pointerup\",this.handlePointerup),document.removeEventListener(\"pointercancel\",this.handlePointerup))}}get activelyOpening(){return this.longpressState===\"opening\"||this.longpressState===\"pressed\"}handleLongpress(){this.open=!0,this.longpressState=this.longpressState===\"potential\"?\"opening\":\"pressed\"}handlePointerdown(e){!this.target||e.button!==0||(this.longpressState=\"potential\",document.addEventListener(\"pointerup\",this.handlePointerup),document.addEventListener(\"pointercancel\",this.handlePointerup),\"holdAffordance\"in this.target)||(this.timeout=setTimeout(()=>{this.target&&this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"pointer\"}}))},g))}handleKeydown(e){const{code:t,altKey:o}=e;o&&t===\"ArrowDown\"&&(e.stopPropagation(),e.stopImmediatePropagation())}handleKeyup(e){const{code:t,altKey:o}=e;if(t===\"Space\"||o&&t===\"ArrowDown\"){if(!this.target)return;e.stopPropagation(),this.target.dispatchEvent(new CustomEvent(\"longpress\",{bubbles:!0,composed:!0,detail:{source:\"keyboard\"}})),setTimeout(()=>{this.longpressState=null})}}prepareDescription(e){if(this.releaseDescription!==r||!this.overlay.elements.length)return;const t=document.createElement(\"div\");t.id=`longpress-describedby-descriptor-${l()}`;const o=d()||a()?\"touch\":\"keyboard\";t.textContent=LONGPRESS_INSTRUCTIONS[o],t.slot=\"longpress-describedby-descriptor\";const n=e.getRootNode(),s=this.overlay.getRootNode();n===s?this.overlay.append(t):(t.hidden=!(\"host\"in n),e.insertAdjacentElement(\"afterend\",t));const i=p(e,\"aria-describedby\",[t.id]);this.releaseDescription=()=>{i(),t.remove(),this.releaseDescription=r}}shouldCompleteOpen(){this.longpressState=this.longpressState===\"pressed\"?null:this.longpressState}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"longpress\",()=>this.handleLongpress(),{signal:e}),this.target.addEventListener(\"pointerdown\",o=>this.handlePointerdown(o),{signal:e}),this.prepareDescription(this.target),!this.target.holdAffordance&&(this.target.addEventListener(\"keydown\",o=>this.handleKeydown(o),{signal:e}),this.target.addEventListener(\"keyup\",o=>this.handleKeyup(o),{signal:e}))}}\n//# sourceMappingURL=LongpressController.js.map\n","\"use strict\";import{ClickController as o}from\"./ClickController.js\";import{HoverController as r}from\"./HoverController.js\";import{LongpressController as e}from\"./LongpressController.js\";export const strategies={click:o,longpress:e,hover:r};\n//# sourceMappingURL=strategies.js.map\n","\"use strict\";import{InteractionController as o,InteractionTypes as r}from\"./InteractionController.js\";export class ClickController extends o{constructor(){super(...arguments);this.type=r.click;this.preventNextToggle=!1}handleClick(){this.preventNextToggle||(this.open=!this.open),this.preventNextToggle=!1}handlePointerdown(){this.preventNextToggle=this.open}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"click\",()=>this.handleClick(),{signal:e}),this.target.addEventListener(\"pointerdown\",()=>this.handlePointerdown(),{signal:e})}}\n//# sourceMappingURL=ClickController.js.map\n","\"use strict\";import{conditionAttributeWithId as o}from\"@spectrum-web-components/base/src/condition-attribute-with-id.js\";import{isWebKit as h}from\"@spectrum-web-components/shared\";import{randomID as l}from\"@spectrum-web-components/shared/src/random-id.js\";import{noop as s}from\"./AbstractOverlay.js\";import{InteractionController as d,InteractionTypes as n,lastInteractionType as v}from\"./InteractionController.js\";const p=300;export class HoverController extends d{constructor(){super(...arguments);this.type=n.hover;this.elementIds=[];this.focusedin=!1;this.pointerentered=!1}handleKeyup(e){(e.code===\"Tab\"||e.code===\"Escape\")&&(this.open=!0)}handleTargetFocusin(){this.target.matches(\":focus-visible\")&&(h()&&this.target[v]===n.click||(this.open=!0,this.focusedin=!0))}handleTargetFocusout(){this.focusedin=!1,!this.pointerentered&&(this.open=!1)}handleTargetPointerenter(){var e;this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0),!((e=this.overlay)!=null&&e.disabled)&&(this.open=!0,this.pointerentered=!0)}handleTargetPointerleave(){this.doPointerleave()}handleHostPointerenter(){this.hoverTimeout&&(clearTimeout(this.hoverTimeout),this.hoverTimeout=void 0)}handleHostPointerleave(){this.doPointerleave()}prepareDescription(){if(!this.overlay.elements.length)return;const e=this.target.getRootNode(),t=this.overlay.elements[0].getRootNode(),r=this.overlay.getRootNode();e===r?this.prepareOverlayRelativeDescription():e===t&&this.prepareContentRelativeDescription()}prepareOverlayRelativeDescription(){const e=o(this.target,\"aria-describedby\",[this.overlay.id]);this.releaseDescription=()=>{e(),this.releaseDescription=s}}prepareContentRelativeDescription(){const e=[],t=this.overlay.elements.map(i=>(e.push(i.id),i.id||(i.id=`${this.overlay.tagName.toLowerCase()}-helper-${l()}`),i.id));this.elementIds=e;const r=o(this.target,\"aria-describedby\",t);this.releaseDescription=()=>{r(),this.overlay.elements.map((i,a)=>{i.id=this.elementIds[a]}),this.releaseDescription=s}}doPointerleave(){this.pointerentered=!1;const e=this.target;this.focusedin&&e.matches(\":focus-visible\")||(this.hoverTimeout=setTimeout(()=>{this.open=!1},p))}init(){var t;(t=this.abortController)==null||t.abort(),this.abortController=new AbortController;const{signal:e}=this.abortController;this.target.addEventListener(\"keyup\",r=>this.handleKeyup(r),{signal:e}),this.target.addEventListener(\"focusin\",()=>this.handleTargetFocusin(),{signal:e}),this.target.addEventListener(\"focusout\",()=>this.handleTargetFocusout(),{signal:e}),this.target.addEventListener(\"pointerenter\",()=>this.handleTargetPointerenter(),{signal:e}),this.target.addEventListener(\"pointerleave\",()=>this.handleTargetPointerleave(),{signal:e}),this.overlay&&this.initOverlay()}initOverlay(){if(!this.abortController)return;const{signal:e}=this.abortController;this.overlay.addEventListener(\"pointerenter\",()=>this.handleHostPointerenter(),{signal:e}),this.overlay.addEventListener(\"pointerleave\",()=>this.handleHostPointerleave(),{signal:e})}}\n//# sourceMappingURL=HoverController.js.map\n"],"names":["r","InteractionTypes","click","hover","longpress","lastInteractionType","Symbol","InteractionController","constructor","e","overlay","t","isPersistent","handleOverlayReady","i","this","target","isLazilyOpen","init","activelyOpening","open","type","customElements","whenDefined","then","async","Overlay","import","_overlay","removeController","addController","initOverlay","prepareDescription","call","releaseDescription","shouldCompleteOpen","abort","abortController","hostConnected","hostDisconnected","overlayTimer","warmUpDelay","coolDownDelay","isWarm","timeout","Object","assign","openTimer","cancelCooldownTimer","component","close","promise","Promise","o","resolve","window","setTimeout","Error","resetCooldownTimer","clearTimeout","cooldownTimeout","noop","guaranteedAllTransitionend","v","AbortController","n","Map","a","cleanup","m","l","requestAnimationFrame","p","set","propertyName","get","delete","size","addEventListener","has","cancelAnimationFrame","signal","nextFrame","AbstractOverlay","g","arguments","dispose","offset","willPreventClose","applyFocus","delayed","disabled","elementResolver","_elementResolver","ensureOnDOM","makeTransition","manageDelay","managePopoverOpen","managePosition","placementController","_placementController","requestSlottable","returnFocus","state","manuallyKeepOpen","update","CustomEvent","bubbles","composed","cancelable","document","dispatchEvent","length","d","remove","reparentChildren","position","prepareCallback","Array","c","createComment","cloneNode","parentElement","getRootNode","replaceChild","insertAdjacentElement","T","b","s","slot","removeAttribute","u","applyOptions","hasAttribute","trigger","virtualTrigger","updateComplete","y","append","receivesFocus","triggerElement","placement","notImmediatelyClosable","disconnectedCallback","super","LONGPRESS_INSTRUCTIONS","touch","keyboard","mouse","strategies","preventNextToggle","handleClick","handlePointerdown","h","longpressState","handlePointerup","removeEventListener","handleLongpress","button","detail","source","handleKeydown","code","altKey","stopPropagation","stopImmediatePropagation","handleKeyup","elements","createElement","id","textContent","hidden","holdAffordance","elementIds","focusedin","pointerentered","handleTargetFocusin","matches","handleTargetFocusout","handleTargetPointerenter","hoverTimeout","handleTargetPointerleave","doPointerleave","handleHostPointerenter","handleHostPointerleave","prepareOverlayRelativeDescription","prepareContentRelativeDescription","map","push","tagName","toLowerCase"],"mappings":"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"}