import { Canvas, Story, Meta } from '@storybook/addon-docs/blocks';
import { SpectrumStories } from '../../../.storybook/blocks';
import * as ProgressCircleStories from './progress-circle.stories';

<Meta tag="usage" />

## Usage

```zsh
yarn add @spectrum-web-components/progress-circle
```

Import the side effectful registration of `<sp-progress-circle>` via:

```ts
import '@spectrum-web-components/progress-circle/sp-progress-circle.js';
```

When looking to leverage the `ProgressCircle` base class as a type and/or for extension purposes, do so via:

```ts
import { ProgressCircle } from '@spectrum-web-components/progress-circle';
```

### Anatomy

A progress circle consists of several key parts:

- A label (via `slot="label"`)
- A progress value (via `progress` attribute)
- An an optional indeterminate state (via `indeterminate` attribute)
- An optional size
- An optional static color for backgrounds that have color

<Canvas
    of={ProgressCircleStories.Anatomy}
    withToolbar={true}
    sourceState="shown"
/>

### Options

#### Sizes

Progress circles come in three sizes to fit various contexts:

<Canvas
    of={ProgressCircleStories.Sizes}
    withToolbar={true}
    sourceState="shown"
/>

#### Static Colors

When displaying over images or colored backgrounds, use the `static-color` attribute for better contrast, e.g. `static-color="white"` on a dark background or `static-color="black"` on a light background:

<Canvas
    of={ProgressCircleStories.StaticColors}
    withToolbar={true}
    sourceState="shown"
/>

### States

#### Indeterminate

Use indeterminate progress when the duration cannot be calculated:

<Canvas
    of={ProgressCircleStories.Indeterminate}
    withToolbar={true}
    sourceState="shown"
/>

## Accessibility

### Features

The `<sp-progress-circle>` element implements several accessibility features:

1. **ARIA Role**: Automatically sets `role="progressbar"` for proper semantic meaning
2. **Labeling**:
    - Uses the `label` attribute value as `aria-label`
    - When determinate, adds `aria-valuenow` with the current progress
    - Includes `aria-valuemin="0"` and `aria-valuemax="100"` for the progress range
3. **Status Communication**:
    - Screen readers announce progress updates
    - Indeterminate state is properly conveyed to assistive technologies

### Best Practices

- Always provide a descriptive `label` that explains what the progress represents
- Use determinate progress when possible to give users a clear sense of completion
- For determinate progress, ensure the `progress` value accurately reflects the actual progress
- Consider using size="l" for primary loading states to improve visibility

<Canvas
    of={ProgressCircleStories.A11y}
    withToolbar={true}
    sourceState="shown"
/>
