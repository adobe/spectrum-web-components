import { Meta } from '@storybook/addon-docs/blocks';

<Meta title="Customization/Theme and Scales" />

# Theme and Scales

The theme and scale context classes and methods replace the features previously offered via `<sp-theme>`.

Be sure to review the [getting started guide](/docs/guides-customization-getting-started--docs) for how to include the required stylesheet.

## Themes

Spectrum 2 supports a `light` and `dark` theme. Corresponding color values are expressed via custom properties using the `light-dark()` CSS function.

By default, the application will be set to a `light` theme.

Preview component theme color changes via the top toolbar.

### Theme classes

You can change your application - or a section or element - to an alternate theme by including both the `spectrum-theme` class and a theme class.

- `.spectrum-theme--dark` - sets `color-scheme: dark`
- `.spectrum-theme--light` - sets `color-scheme: light`
- `.spectrum-theme--adaptive` - sets `color-scheme: light dark`, adapts to user's OS setting

### Theme examples

```html
<!-- Default app theme - light -->
<html></html>

<!-- Dark app theme -->
<html class="spectrum-theme spectrum-theme--dark"></html>

<!-- Adaptive app theme -->
<html class="spectrum-theme spectrum-theme--adaptive"></html>

<!-- Nested theme switching -->
<div class="spectrum-theme spectrum-theme--dark">
    <div class="spectrum-theme spectrum-theme--light"></div>
</div>
```

## Scale contexts

There are two scale contexts available: medium (aka "Desktop") and large (aka "Mobile"). Scales apply to properties such as `font-size` and spacing-related values.

By default, the application will be set to use a medium scaling context.

Preview component scale changes via the top toolbar.

### Scale classes

You can change your application - or a section or element - to an alternate theme by including both the `spectrum-theme` class and a scale class.

- `.spectrum-theme--sizeM` - use the medium scale
- `.spectrum-theme--sizeL` - use the large scale

See the examples for you can also change the scale responsively.

### Scale examples

Option one is to alter scale appearance via classes.

```html
<!-- Default app theme - medium -->
<html></html>

<!-- Large app theme -->
<html class="spectrum-theme spectrum-theme--sizeL"></html>

<!-- Nested scale switching -->
<div class="spectrum-theme spectrum-theme--sizeL">
    <div class="spectrum-theme spectrum-theme--sizeM"></div>
</div>
```

Alternatively, you can switch the scale context within a media query for the entire application.

```css
/* Swap entire app to Large below 600px breakpoint */
@media (max-width: 600px) {
    :root,
    .spectrum-theme {
        --spectrum-theme-size: var(--spectrum-theme--sizeL);
    }
}
```

You can also do this per a custom class (or other selector) for a section or specific element, but **this requires** inclusion of the `spectrum-theme` class on the targeted element. This enables changing the scale via any valid CSS selector and querying method.

```css
/* .my-section-large must also have the class .spectrum-theme */
.my-section-large {
    @container (inline-size < 30ch) {
        --spectrum-theme-size: var(--spectrum-theme--sizeL);
    }
}

/* Also available for extension inside custom elements
<custom-element> must also have the class .spectrum-theme */
@container (inline-size < 30ch) {
    :host {
        --spectrum-theme-size: var(--spectrum-theme--sizeL);
    }
}
```

### How dynamic scaling works

Dynamic scaling is available via all provided design tokens which include values for `desktop` (medium) and `mobile` (large) contexts.

These are processed into a format like the following:

```css
--swc-font-size-100: var(--spectrum-theme--sizeM, 14px)
    var(--spectrum-theme--sizeL, 17px);
```

Due to a bit of CSS magic relying on [cyclic dependency toggles](https://kizu.dev/cyclic-toggles/), the value that corresponds with the current value of `--spectrum-theme` is what becomes the computed value.

### Setting up custom dynamic scaling values

To create custom dynamic scaling values, provide values for both sizes within your property definition.

In this example, the value `1rem` will be used for the medium scale, and the value `1.25rem` will be used for the large scale.

```css
.element {
    margin-block: var(--spectrum-theme--sizeM, 1rem)
        var(--spectrum-theme--sizeL, 1.25rem);
}
```
