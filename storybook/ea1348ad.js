System.register(["./4575d6ac.js"],(function(i){"use strict";var t,e,s,h,a,r,n,l,_;return{setters:[function(i){t=i.c,e=i.b,s=i._,h=i.a,a=i.aI,r=i.aJ,n=i.aK,l=i.aL,_=i.aM}],execute:function(){var c=function(){function i(t){e(this,i),this._map=new Map,this._roundAverageSize=!1,this.totalSize=0,!0===(null==t?void 0:t.roundAverageSize)&&(this._roundAverageSize=!0)}return t(i,[{key:"set",value:function(i,t){var e=this._map.get(i)||0;this._map.set(i,t),this.totalSize+=t-e}},{key:"averageSize",get:function(){if(this._map.size>0){var i=this.totalSize/this._map.size;return this._roundAverageSize?Math.round(i):i}return 0}},{key:"getSize",value:function(i){return this._map.get(i)}},{key:"clear",value:function(){this._map.clear(),this.totalSize=0}}]),i}();i("flow",(function(i){return Object.assign({type:m},i)}));function o(i){return"horizontal"===i?"marginLeft":"marginTop"}function u(i){return"horizontal"===i?"marginRight":"marginBottom"}function g(i,t){var e=[i,t].sort();return e[1]<=0?Math.min.apply(Math,_(e)):e[0]>=0?Math.max.apply(Math,_(e)):e[0]+e[1]}var v=function(){function i(){e(this,i),this._childSizeCache=new c,this._marginSizeCache=new c,this._metricsCache=new Map}return t(i,[{key:"update",value:function(i,t){var e,s,h=this,a=new Set;Object.keys(i).forEach((function(e){var s=Number(e);h._metricsCache.set(s,i[s]),h._childSizeCache.set(s,i[s][n(t)]),a.add(s),a.add(s+1)}));var r,_=l(a);try{for(_.s();!(r=_.n()).done;){var c=r.value,v=(null===(e=this._metricsCache.get(c))||void 0===e?void 0:e[o(t)])||0,m=(null===(s=this._metricsCache.get(c-1))||void 0===s?void 0:s[u(t)])||0;this._marginSizeCache.set(c,g(v,m))}}catch(i){_.e(i)}finally{_.f()}}},{key:"averageChildSize",get:function(){return this._childSizeCache.averageSize}},{key:"totalChildSize",get:function(){return this._childSizeCache.totalSize}},{key:"averageMarginSize",get:function(){return this._marginSizeCache.averageSize}},{key:"totalMarginSize",get:function(){return this._marginSizeCache.totalSize}},{key:"getLeadingMarginValue",value:function(i,t){var e;return(null===(e=this._metricsCache.get(i))||void 0===e?void 0:e[o(t)])||0}},{key:"getChildSize",value:function(i){return this._childSizeCache.getSize(i)}},{key:"getMarginSize",value:function(i){return this._marginSizeCache.getSize(i)}},{key:"clear",value:function(){this._childSizeCache.clear(),this._marginSizeCache.clear(),this._metricsCache.clear()}}]),i}(),m=i("FlowLayout",function(i){s(n,i);var r=h(n);function n(){var i;return e(this,n),(i=r.apply(this,arguments))._itemSize={width:100,height:100},i._physicalItems=new Map,i._newPhysicalItems=new Map,i._metricsCache=new v,i._anchorIdx=null,i._anchorPos=null,i._stable=!0,i._measureChildren=!0,i._estimate=!0,i}return t(n,[{key:"measureChildren",get:function(){return this._measureChildren}},{key:"updateItemSizes",value:function(i){this._metricsCache.update(i,this.direction),this._scheduleReflow()}},{key:"_getPhysicalItem",value:function(i){var t;return null!==(t=this._newPhysicalItems.get(i))&&void 0!==t?t:this._physicalItems.get(i)}},{key:"_getSize",value:function(i){return this._getPhysicalItem(i)&&this._metricsCache.getChildSize(i)}},{key:"_getAverageSize",value:function(){return this._metricsCache.averageChildSize||this._itemSize[this._sizeDim]}},{key:"_estimatePosition",value:function(i){var t=this._metricsCache;if(-1===this._first||-1===this._last)return t.averageMarginSize+i*(t.averageMarginSize+this._getAverageSize());if(i<this._first){var e=this._first-i;return this._getPhysicalItem(this._first).pos-(t.getMarginSize(this._first-1)||t.averageMarginSize)-(e*t.averageChildSize+(e-1)*t.averageMarginSize)}var s=i-this._last;return this._getPhysicalItem(this._last).pos+(t.getChildSize(this._last)||t.averageChildSize)+(t.getMarginSize(this._last)||t.averageMarginSize)+s*(t.averageChildSize+t.averageMarginSize)}},{key:"_getPosition",value:function(i){var t,e=this._getPhysicalItem(i),s=this._metricsCache.averageMarginSize;return 0===i?null!==(t=this._metricsCache.getMarginSize(0))&&void 0!==t?t:s:e?e.pos:this._estimatePosition(i)}},{key:"_calculateAnchor",value:function(i,t){return i<=0?0:t>this._scrollSize-this._viewDim1?this.items.length-1:Math.max(0,Math.min(this.items.length-1,Math.floor((i+t)/2/this._delta)))}},{key:"_getAnchor",value:function(i,t){if(0===this._physicalItems.size)return this._calculateAnchor(i,t);if(this._first<0)return this._calculateAnchor(i,t);if(this._last<0)return this._calculateAnchor(i,t);var e=this._getPhysicalItem(this._first),s=this._getPhysicalItem(this._last),h=e.pos;if(s.pos+this._metricsCache.getChildSize(this._last)<i)return this._calculateAnchor(i,t);if(h>t)return this._calculateAnchor(i,t);for(var a=this._firstVisible-1,r=-1/0;r<i;){r=this._getPhysicalItem(++a).pos+this._metricsCache.getChildSize(a)}return a}},{key:"_getActiveItems",value:function(){0===this._viewDim1||0===this.items.length?this._clearItems():this._getItems()}},{key:"_clearItems",value:function(){this._first=-1,this._last=-1,this._physicalMin=0,this._physicalMax=0;var i=this._newPhysicalItems;this._newPhysicalItems=this._physicalItems,this._newPhysicalItems.clear(),this._physicalItems=i,this._stable=!0}},{key:"_getItems",value:function(){var i,t,e,s,h=this._newPhysicalItems;if(this._stable=!0,null!==this.pin){var a=this.pin.index;this._anchorIdx=a,this._anchorPos=this._getPosition(a)}if(e=this._scrollPosition-this._overhang,(s=this._scrollPosition+this._viewDim1+this._overhang)<0||e>this._scrollSize)this._clearItems();else{null!==this._anchorIdx&&null!==this._anchorPos||(this._anchorIdx=this._getAnchor(e,s),this._anchorPos=this._getPosition(this._anchorIdx));var r=this._getSize(this._anchorIdx);void 0===r&&(this._stable=!1,r=this._getAverageSize());var n=null!==(i=this._metricsCache.getMarginSize(this._anchorIdx))&&void 0!==i?i:this._metricsCache.averageMarginSize,l=null!==(t=this._metricsCache.getMarginSize(this._anchorIdx+1))&&void 0!==t?t:this._metricsCache.averageMarginSize;0===this._anchorIdx&&(this._anchorPos=n),this._anchorIdx===this.items.length-1&&(this._anchorPos=this._scrollSize-l-r);var _=0;for(this._anchorPos+r+l<e&&(_=e-(this._anchorPos+r+l)),this._anchorPos-n>s&&(_=s-(this._anchorPos-n)),_&&(this._scrollPosition-=_,e-=_,s-=_,this._scrollError+=_),h.set(this._anchorIdx,{pos:this._anchorPos,size:r}),this._first=this._last=this._anchorIdx,this._physicalMin=this._anchorPos-n,this._physicalMax=this._anchorPos+r+l;this._physicalMin>e&&this._first>0;){var c=this._getSize(--this._first);void 0===c&&(this._stable=!1,c=this._getAverageSize());var o=this._metricsCache.getMarginSize(this._first);void 0===o&&(this._stable=!1,o=this._metricsCache.averageMarginSize),this._physicalMin-=c;var u=this._physicalMin;if(h.set(this._first,{pos:u,size:c}),this._physicalMin-=o,!1===this._stable&&!1===this._estimate)break}for(;this._physicalMax<s&&this._last<this.items.length-1;){var g=this._getSize(++this._last);void 0===g&&(this._stable=!1,g=this._getAverageSize());var v=this._metricsCache.getMarginSize(this._last);void 0===v&&(this._stable=!1,v=this._metricsCache.averageMarginSize);var m=this._physicalMax;if(h.set(this._last,{pos:m,size:g}),this._physicalMax+=g+v,!this._stable&&!this._estimate)break}var z=this._calculateError();z&&(this._physicalMin-=z,this._physicalMax-=z,this._anchorPos-=z,this._scrollPosition-=z,h.forEach((function(i){return i.pos-=z})),this._scrollError+=z),this._stable&&(this._newPhysicalItems=this._physicalItems,this._newPhysicalItems.clear(),this._physicalItems=h)}}},{key:"_calculateError",value:function(){return 0===this._first?this._physicalMin:this._physicalMin<=0?this._physicalMin-this._first*this._delta:this._last===this.items.length-1?this._physicalMax-this._scrollSize:this._physicalMax>=this._scrollSize?this._physicalMax-this._scrollSize+(this.items.length-1-this._last)*this._delta:0}},{key:"_reflow",value:function(){var i=this._first,t=this._last,e=this._scrollSize,s=this._firstVisible,h=this._lastVisible;this._updateScrollSize(),this._setPositionFromPin(),this._getActiveItems(),this._updateVisibleIndices(),this._scrollSize!==e&&this._emitScrollSize(),this._first===i&&this._last===t&&this._firstVisible===s&&this._lastVisible===h||this._emitRange(),-1===this._first&&-1===this._last||this._emitChildPositions(),0!==this._scrollError&&this._emitScrollError(),(-1===this._first&&-1==this._last||this._first===i&&this._last===t)&&this._resetReflowState()}},{key:"_resetReflowState",value:function(){this._anchorIdx=null,this._anchorPos=null,this._stable=!0}},{key:"_updateScrollSize",value:function(){var i=this._metricsCache.averageMarginSize;this._scrollSize=Math.max(1,this.items.length*(i+this._getAverageSize())+i)}},{key:"_delta",get:function(){var i=this._metricsCache.averageMarginSize;return this._getAverageSize()+i}},{key:"_getItemPosition",value:function(i){var t,e;return a(t={},this._positionDim,this._getPosition(i)),a(t,this._secondaryPositionDim,0),a(t,"horizontal"===this.direction?"xOffset":"yOffset",-(null!==(e=this._metricsCache.getLeadingMarginValue(i,this.direction))&&void 0!==e?e:this._metricsCache.averageMarginSize)),t}},{key:"_getItemSize",value:function(i){var t;return a(t={},this._sizeDim,this._getSize(i)||this._getAverageSize()),a(t,this._secondarySizeDim,this._itemSize[this._secondarySizeDim]),t}},{key:"_viewDim2Changed",value:function(){this._metricsCache.clear(),this._scheduleReflow()}}]),n}(r))}}}));
