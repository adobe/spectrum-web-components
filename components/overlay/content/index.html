<html><head><link rel="preload" href="https://use.typekit.net/af/eaf09c/000000000000000000017703/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n7&v=3" as="font" type="font/woff2" crossorigin/><link rel="preload" href="https://use.typekit.net/af/cb695f/000000000000000000017701/27/l?primer=7cdcb44be4a7db8877ffa5c0007b8dd865b3bbc383831fe2ea177f62257a9191&fvd=n4&v=3" as="font" type="font/woff2" crossorigin/></head><body><sp-tab-panel class="section" value="examples"> <div class="headerContainer"><h2 id="description" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeM">Description&nbsp;<sp-link class="header-anchor" href="#description" aria-label="§">#</sp-link></h2><sp-divider size="l"></sp-divider></div> <p class="spectrum-Body spectrum-Body--sizeM">Overlays in Spectrum Web Components are created via the <code class="spectrum-Code">Overlay</code> class system, which prepares an "overlay stack" that can manage the deployment of one or more overlays onto a page. Whether it's needed for transient content like a tooltip, for extended interactions like selecting a value from a picker, or for blocking content like a modal, the imperative APIs outlined below or the declarative APIs delivered by <code class="spectrum-Code">&lt;overlay-trigger&gt;</code> should cover your overlay delivery needs.</p> <div class="headerContainer"><h3 id="usage" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeS">Usage&nbsp;<sp-link class="header-anchor" href="#usage" aria-label="§">#</sp-link></h3><sp-divider size="m"></sp-divider></div> <p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://www.npmjs.com/package/@spectrum-web-components/overlay"><img src="https://img.shields.io/npm/v/@spectrum-web-components/overlay?style=for-the-badge" alt="See it on NPM!"></sp-link> <sp-link href="https://bundlephobia.com/result?p=@spectrum-web-components/overlay"><img src="https://img.shields.io/bundlephobia/minzip/@spectrum-web-components/overlay?style=for-the-badge" alt="How big is this package in your project?"></sp-link></p> <code-example preprocessed="preprocessed"><pre slot="code">yarn add @spectrum-web-components/overlay
</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Import the <code class="spectrum-Code">Overlay</code> class to leverage its capabilities within your application or custom element:</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> Overlay <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/overlay'</span><span class="token punctuation">;</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Primarily, this class gives you access to the <code class="spectrum-Code">open</code> method that will allow you to open an overlay:</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code">Overlay<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><br>    <span class="token punctuation">(</span>owner<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// the element to open the overlay in reference to, "trigger"</span><br>    <span class="token punctuation">(</span>interaction<span class="token operator">:</span> TriggerInteractions<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// the type of interaction type that opened the overlay</span><br>    <span class="token punctuation">(</span>overlayElement<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// the element that will be projected into the overlay, "content"</span><br>    <span class="token punctuation">(</span>options<span class="token operator">:</span> OverlayOptions<span class="token punctuation">)</span> <span class="token comment">// options to customize the overlay</span><br><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">Overlay.open()</code> is an asynchronous method that returns a function for closing the overlay, so it is common to leverage this functionality like the following:</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><br>    <span class="token keyword">const</span> trigger <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#trigger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> interaction <span class="token operator">=</span> <span class="token string">'click'</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>        <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>        <span class="token literal-property property">placement</span><span class="token operator">:</span> <span class="token string">'bottom'</span><span class="token punctuation">,</span><br>    <span class="token punctuation">}</span><span class="token punctuation">;</span><br>    <span class="token keyword">const</span> closeOverlay <span class="token operator">=</span> <span class="token keyword">await</span> Overlay<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><br>        trigger<span class="token punctuation">,</span><br>        interaction<span class="token punctuation">,</span><br>        content<span class="token punctuation">,</span><br>        options<br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer"><h2 id="types" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeM">Types&nbsp;<sp-link class="header-anchor" href="#types" aria-label="§">#</sp-link></h2><sp-divider size="l"></sp-divider></div> <div class="headerContainer"><h3 id="triggerinteractions" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeS">TriggerInteractions&nbsp;<sp-link class="header-anchor" href="#triggerinteractions" aria-label="§">#</sp-link></h3><sp-divider size="m"></sp-divider></div> <p class="spectrum-Body spectrum-Body--sizeM">This outlines the user experience that is to be delivered through the process of opening and closing an overlay.</p> <code-example preprocessed="preprocessed"><pre slot="code">type TriggerInteractions =
    | 'click'
    | 'custom',
    | 'hover'
    | 'inline'
    | 'modal'
    | 'replace';
</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">click</code> will open an overlay that will close immediately on the next click that is not on an element within the overlay.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">custom</code> is less opinionated and allows for some customization of the process from the outside.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">hover</code> will close the overlay as soon as the pointer leaves the trigger to which the overlay is connected.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">inline</code> places the overlay after the trigger but before the next element in the logical tab order. This means the <code class="spectrum-Code">shift + tab</code> keyboard stroke will return to the trigger.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">modal</code> manages the overlay like a modal and will trap the tab order within its contents only.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">replace</code> will position the overlay directly in the position of the trigger in the logical tab order. This means the <code class="spectrum-Code">shift + tab</code> keyboard stroke will return the focusable element immediately prior to the trigger.</p> <div class="headerContainer"><h3 id="overlayoptions" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeS">OverlayOptions&nbsp;<sp-link class="header-anchor" href="#overlayoptions" aria-label="§">#</sp-link></h3><sp-divider size="m"></sp-divider></div> <code-example preprocessed="preprocessed"><pre slot="code">type OverlayOptions = {
    delayed?: boolean;
    placement?: Placement;
    offset?: number;
    receivesFocus?: 'auto';
    notImmediatelyClosable?: boolean;
}
</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">delayed</code> allows for the overlay to open the overlay with warmup/cooldown behaviors as described at https://spectrum.adobe.com/page/tooltip/#Immediate-or-delayed-appearance</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">placement</code> outlines where the overlay system should attempt to position the overlay in relation to the trigger. When the layout of the page and/or current scroll positioning prevents the successful placement of the content in this way, the <code class="spectrum-Code">placement</code> will be automatically applied as the value best suited for those conditions. Placements available include: <code class="spectrum-Code">"auto" | "auto-start" | "auto-end" | "top" | "bottom" | "right" | "left" | "top-start" | "top-end" | "bottom-start" | "bottom-end" | "right-start" | "right-end" | "left-start" | "left-end" | "none"</code>.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">offset</code> defines the distance of the overlay content from the trigger, measured in pixels.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">receivesFocus</code> tells the overlay stack to throw focus into the overlay after it has opened.</p> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">notImmediatelyClosable</code> prevents immediate clicks from closing the overlay. If you find that a trigger event is immediately overridden with a subsequent click (for instance, a <code class="spectrum-Code">focus</code> trigger that should be closed on <code class="spectrum-Code">click</code>), set <code class="spectrum-Code">notImmediatelyClosable: true</code> to disregard clicks that coincide with the opening trigger.</p> <div class="headerContainer"><h3 id="events" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeS">Events&nbsp;<sp-link class="header-anchor" href="#events" aria-label="§">#</sp-link></h3><sp-divider size="m"></sp-divider></div> <p class="spectrum-Body spectrum-Body--sizeM">The work to both open and close an overlay is asynchronous. This asynchrony is surfaced into the application via DOM events dispatched from the <code class="spectrum-Code">trigger</code> element of your overlay. An <code class="spectrum-Code">sp-opened</code> event will be dispatched once the overlay has finished opening, and an <code class="spectrum-Code">sp-closed</code> event will be dispatched once the overlay has finished closing. In both cases, the dispatched event will include a <code class="spectrum-Code">detail</code> property with an <code class="spectrum-Code">interaction: TriggerInteractions</code> key to support associating the event/overlay with its originating <code class="spectrum-Code">interaction</code>.</p> <div class="headerContainer"><h2 id="example" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeM">Example&nbsp;<sp-link class="header-anchor" href="#example" aria-label="§">#</sp-link></h2><sp-divider size="l"></sp-divider></div> <code-example class="language-html" preprocessed="preprocessed"><pre class="language-html" slot="code"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-button</span><br>    <span class="token special-attr"><span class="token attr-name">onclick</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><br>        const trigger = this;<br>        const interaction = <span class="token punctuation">'</span>click<span class="token punctuation">'</span>;<br>        const content = this.nextElementSibling;<br>        if (!content) return;<br>        const options = {<br>            offset: 0,<br>            placement: <span class="token punctuation">'</span>right<span class="token punctuation">'</span>,<br>        };<br>        content.open = true;<br>        const closeOverlayPromise = Overlay.open(<br>            trigger, <br>            interaction,<br>            content,<br>            options<br>        );<br>        setTimeout(function () {<br>            closeOverlayPromise.then(function(close) {<br>                close();<br>                content.open = false;<br>            });<br>        }, 5000);<br>    <span class="token punctuation">"</span></span></span><br><span class="token punctuation">&gt;</span></span><br>    Click me for a 5 second overlay!<br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-button</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-popover</span><span class="token punctuation">&gt;</span></span><br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>sp-dialog</span> <span class="token attr-name">size</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>medium<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><br>        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>h2</span> <span class="token attr-name">slot</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>heading<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span>Demo<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>h2</span><span class="token punctuation">&gt;</span></span><br>        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod<br>        tempor incididunt ut labore et dolore magna aliqua. Auctor augue mauris<br>        augue neque gravida. Libero volutpat sed ornare arcu. Quisque egestas<br>        diam in arcu cursus euismod quis viverra. Posuere ac ut consequat semper<br>        viverra nam libero justo laoreet. Enim ut tellus elementum sagittis<br>        vitae et leo duis ut. Neque laoreet suspendisse interdum consectetur<br>        libero id faucibus nisl. Diam volutpat commodo sed egestas egestas.<br>        Dolor magna eget est lorem ipsum dolor. Vitae suscipit tellus mauris a<br>        diam maecenas sed. Turpis in eu mi bibendum neque egestas congue.<br>        Rhoncus est pellentesque elit ullamcorper dignissim cras lobortis.<br>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-dialog</span><span class="token punctuation">&gt;</span></span><br><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>sp-popover</span><span class="token punctuation">&gt;</span></span></pre></code-example> <div class="headerContainer"><h2 id="styling" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeM">Styling&nbsp;<sp-link class="header-anchor" href="#styling" aria-label="§">#</sp-link></h2><sp-divider size="l"></sp-divider></div> <p class="spectrum-Body spectrum-Body--sizeM">When an overlay is opened from within a styled DOM scope as created by an <code class="spectrum-Code">&lt;sp-theme&gt;</code> element, this scope will be resolved and recreated with in the <code class="spectrum-Code">&lt;active-overlay&gt;</code> element that is created to host the overlaid content directly in the <code class="spectrum-Code">&lt;body&gt;</code>. By default, the generated <code class="spectrum-Code">&lt;sp-theme&gt;</code> element will be supplied with settings of the scope from which the overlay is triggered, including any "app" centric CSS Custom Properties that might be applied via <code class="spectrum-Code">Theme.registerThemeFragment('app', 'app', themeFragment)</code> therein. In the case that you have set CSS Custom Properties for the scope created by an <code class="spectrum-Code">&lt;sp-theme&gt;</code> element via other methods, you can specify that those values should also be applied to overlay content using the <code class="spectrum-Code">theme</code> part on the <code class="spectrum-Code">&lt;active-overlay&gt;</code> element via the <code class="spectrum-Code">active-overlay::part(theme) { /* styles */ }</code> selector.</p> <div class="headerContainer"><h2 id="advanced-usage" tabindex="-1" class="spectrum-Heading spectrum-Heading--sizeM">Advanced Usage&nbsp;<sp-link class="header-anchor" href="#advanced-usage" aria-label="§">#</sp-link></h2><sp-divider size="l"></sp-divider></div> <p class="spectrum-Body spectrum-Body--sizeM">When working with the DOM-based APIs of custom elements, it is sometimes preferred to project content into an overlay from a different shadow root (eg projecting a single-slotted element into the overlay). To ensure that the content can be marshalled through any number of <code class="spectrum-Code">&lt;slot&gt;</code> elements which are addressed into subsequent <code class="spectrum-Code">&lt;slot&gt;</code> elements, be sure to use the <code class="spectrum-Code">flatten: true</code> option when querying <code class="spectrum-Code">slot.asignedNodes()</code>:</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token keyword">const</span> trigger <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#trigger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> slot <span class="token operator">=</span> shadowRoot<span class="token punctuation">.</span><span class="token function">querySeletor</span><span class="token punctuation">(</span><span class="token string">'slot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> interaction <span class="token operator">=</span> <span class="token string">'click'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> content <span class="token operator">=</span> slot<br>    <span class="token punctuation">.</span><span class="token function">assignedNodes</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">flatten</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">node</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> node <span class="token keyword">instanceof</span> <span class="token class-name">HTMLElement</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">placement</span><span class="token operator">:</span> <span class="token string">'bottom'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> closeOverlay <span class="token operator">=</span> <span class="token keyword">await</span> Overlay<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>trigger<span class="token punctuation">,</span> interaction<span class="token punctuation">,</span> content<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Other times, you may want to compose content from multiple shadow roots into a single overlay. This is a pattern seen in the <code class="spectrum-Code">&lt;sp-dropdown&gt;</code> element: its <code class="spectrum-Code">&lt;sp-menu&gt;</code> light DOM child is wrapped by its <code class="spectrum-Code">&lt;sp-popover&gt;</code> shadow DOM child before being projected into an overlay. What follows is a more trivial example, where content in the light DOM of an element is injected into an element in the shadow DOM of the same element and then projected into an overlay. Notice the added work here of setting a comment node into the light DOM as a placeholder for the "stolen" content, and then swapping that content back into the light DOM when the overlay is closed.</p> <code-example class="language-js" preprocessed="preprocessed"><pre class="language-js" slot="code"><span class="token keyword">const</span> trigger <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#trigger'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> outterContent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>shadowRoot<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#outter-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> innerContent <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#inner-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> innerContentParent <span class="token operator">=</span><br>    innerContent<span class="token punctuation">.</span>parentElement <span class="token operator">||</span> innerContent<span class="token punctuation">.</span><span class="token function">getRootNode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> placeholder <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createComment</span><span class="token punctuation">(</span><span class="token string">'placeholder for inner content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>innerContentParent<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>placeholder<span class="token punctuation">,</span> innerContent<span class="token punctuation">)</span><span class="token punctuation">;</span><br>outterContent<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>innerContent<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> interaction <span class="token operator">=</span> <span class="token string">'click'</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span><br>    <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span><br>    <span class="token literal-property property">placement</span><span class="token operator">:</span> <span class="token string">'bottom'</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> closeOverlayPromise <span class="token operator">=</span> Overlay<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><br>    trigger<span class="token punctuation">,</span><br>    interaction<span class="token punctuation">,</span><br>    outterContent<span class="token punctuation">,</span><br>    options<br><span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">const</span> <span class="token function-variable function">closeOverlay</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>    closeOverlayPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">close</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    innerContentParent<span class="token punctuation">.</span><span class="token function">replaceChild</span><span class="token punctuation">(</span>placeholder<span class="token punctuation">,</span> innerContent<span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><span class="token punctuation">;</span></pre></code-example> </sp-tab-panel></body></html>