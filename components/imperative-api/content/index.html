<html><head></head><body><sp-tab-panel class="section" value="overview"> <div class="headerContainer spectrum-Typography"><h2 id="overview" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeL">Overview</h2> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeL" href="#overview"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Overview</span></sp-link><sp-divider size="l"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">While an <code class="spectrum-Code">&lt;sp-overlay&gt;</code> element is the recommended entry point to the Spectrum Web Components Overlay API, you can also interact with this set of features via an imperative API, <code class="spectrum-Code">Overlay.open</code>.</p> <div class="headerContainer spectrum-Typography"><h3 id="usage" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Usage</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#usage"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Usage</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM"><sp-link href="https://www.npmjs.com/package/@spectrum-web-components/overlay"><img src="https://img.shields.io/npm/v/@spectrum-web-components/overlay?style=for-the-badge" alt="See it on NPM!"></sp-link> <sp-link href="https://bundlephobia.com/result?p=@spectrum-web-components/overlay"><img src="https://img.shields.io/bundlephobia/minzip/@spectrum-web-components/overlay?style=for-the-badge" alt="How big is this package in your project?"></sp-link></p> <code-example class="language-zsh" preprocessed="preprocessed"><pre class="language-zsh" slot="code">yarn add @spectrum-web-components/overlay</pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Import the <code class="spectrum-Code">Overlay</code> class to leverage its capabilities within your application or custom element:</p> <code-example class="language-ts" preprocessed="preprocessed"><pre class="language-ts" slot="code"><span class="token keyword">import</span> <span class="token punctuation">{</span> Overlay <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/overlay'</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="example" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Example</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#example"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Example</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">Primarily, this class gives you access to the <code class="spectrum-Code">open</code> method that will allow you to open an overlay:</p> <code-example class="language-ts" preprocessed="preprocessed"><pre class="language-ts" slot="code">Overlay<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>
    <span class="token punctuation">(</span>overlayElement<span class="token operator">:</span> HTMLElement<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// the element that will be projected into the overlay, "content",</span>
    <span class="token punctuation">(</span>options<span class="token operator">?</span><span class="token operator">:</span> OverlayOptions<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM"><code class="spectrum-Code">Overlay.open()</code> is an asynchronous method that returns an <code class="spectrum-Code">&lt;sp-overlay&gt;</code> element that wraps the <code class="spectrum-Code">HTMLElement</code> provided as the <code class="spectrum-Code">overlayElement</code>. While this process will set the <code class="spectrum-Code">&lt;sp-overlay&gt;</code> element to <code class="spectrum-Code">open</code>, consumers of this API will need to choose where to append this element to the DOM in order for the content to be made available in the browser.</p> <code-example class="language-ts" preprocessed="preprocessed"><pre class="language-ts" slot="code"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> content <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> options <span class="token operator">=</span> <span class="token punctuation">{</span>
        offset<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        placement<span class="token operator">:</span> <span class="token string">'bottom'</span><span class="token punctuation">,</span>
        trigger<span class="token operator">:</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#trigger'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        type<span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> overlay <span class="token operator">=</span> <span class="token keyword">await</span> Overlay<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span>content<span class="token punctuation">,</span> options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>overlay<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></code-example> <p class="spectrum-Body spectrum-Body--sizeM">Keep in mind that a changing DOM tree is likely to alter the relationship between existing content. Without proper care this can negatively effect the CSS that you have applied to existing content. DOM events and DOM selection methods can also perform differently than expected as the tree shape changes.</p> <div class="headerContainer spectrum-Typography"><h3 id="options" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Options</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#options"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Options</span></sp-link><sp-divider size="m"></sp-divider></div><p class="spectrum-Body spectrum-Body--sizeM">When leveraging <code class="spectrum-Code">Overlay.open()</code>, you can provide an optional second argument of <code class="spectrum-Code">OverlayOptions</code>, with the following type:</p> <code-example class="language-ts" preprocessed="preprocessed"><pre class="language-ts" slot="code"><span class="token keyword">type</span> <span class="token class-name">OverlayOptions</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
    delayed<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    notImmediatelyCloseable<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
    offset<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span> <span class="token operator">|</span> <span class="token punctuation">[</span><span class="token builtin">number</span><span class="token punctuation">,</span> <span class="token builtin">number</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    placement<span class="token operator">?</span><span class="token operator">:</span> Placement<span class="token punctuation">;</span>
    receivesFocus<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'auto'</span> <span class="token operator">|</span> <span class="token string">'true'</span> <span class="token operator">|</span> <span class="token string">'false'</span><span class="token punctuation">;</span>
    trigger<span class="token operator">?</span><span class="token operator">:</span> HTMLElement <span class="token operator">|</span> VirtualTrigger<span class="token punctuation">;</span>
    type<span class="token operator">?</span><span class="token operator">:</span> <span class="token string">'modal'</span> <span class="token operator">|</span> <span class="token string">'page'</span> <span class="token operator">|</span> <span class="token string">'hint'</span> <span class="token operator">|</span> <span class="token string">'auto'</span> <span class="token operator">|</span> <span class="token string">'manual'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></pre></code-example> <div class="headerContainer spectrum-Typography"><h3 id="advanced-topics" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeM">Advanced topics</h3> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeM" href="#advanced-topics"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Advanced topics</span></sp-link><sp-divider size="m"></sp-divider></div><div class="headerContainer spectrum-Typography"><h4 id="using-a-virtual-trigger" tabindex="-1" class="header-heading spectrum-Heading spectrum-Heading--sizeS">Using a virtual trigger</h4> <sp-link class="header-anchor spectrum-Heading spectrum-Heading--sizeS" href="#using-a-virtual-trigger"><span aria-hidden="true">#</span><span class="visually-hidden">Section titled Using a virtual trigger</span></sp-link><sp-divider size="s"></sp-divider></div><code-example class="language-html-live" preprocessed="preprocessed"><pre class="language-html-live" slot="code"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
    <span class="token selector">#root</span> <span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span>
        <span class="token property">height</span><span class="token punctuation">:</span> 20vh<span class="token punctuation">;</span>
        <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--spectrum-gray-100<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--spectrum-gray-400<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>Right click anywhere in bounded rectangle to open the menu<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>root<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">

    <span class="token keyword">import</span> <span class="token punctuation">{</span> html<span class="token punctuation">,</span> render <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/base'</span><span class="token punctuation">;</span>
    <span class="token keyword">import</span> <span class="token punctuation">{</span> VirtualTrigger<span class="token punctuation">,</span> openOverlay <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@spectrum-web-components/overlay'</span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">contextMenuTemplate</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> html<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
          &lt;sp-popover
            style="width:300px;"
            @change=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                    event<span class="token punctuation">.</span>target<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>
                    <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'close'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">bubbles</span><span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
                <span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">
        &gt;
            &lt;sp-menu&gt;
                &lt;sp-menu-item&gt;Deselect&lt;/sp-menu-item&gt;
                &lt;sp-menu-item&gt;Select Inverse&lt;/sp-menu-item&gt;
                &lt;sp-menu-item&gt;Select All&lt;/sp-menu-item&gt;
                &lt;sp-menu-divider&gt;&lt;/sp-menu-divider&gt;
                &lt;sp-menu-item disabled&gt;Copy&lt;/sp-menu-item&gt;
                &lt;sp-menu-item disabled&gt;Cut&lt;/sp-menu-item&gt;
                &lt;sp-menu-item disabled&gt;Paste&lt;/sp-menu-item&gt;
            &lt;/sp-menu&gt;
        &lt;/sp-popover&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

    <span class="token keyword">const</span> <span class="token function-variable function">init</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> appRoot <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#root'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        appRoot<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'contextmenu'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            event<span class="token punctuation">.</span><span class="token function">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            event<span class="token punctuation">.</span><span class="token function">stopPropagation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">const</span> source <span class="token operator">=</span> event<span class="token punctuation">.</span><span class="token function">composedPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span> <span class="token operator">=</span> source<span class="token punctuation">;</span>
            <span class="token keyword">const</span> trigger <span class="token operator">=</span> event<span class="token punctuation">.</span>target<span class="token punctuation">;</span>
            <span class="token keyword">const</span> virtualTrigger <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">VirtualTrigger</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>clientX<span class="token punctuation">,</span> event<span class="token punctuation">.</span>clientY<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> fragment <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createDocumentFragment</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">render</span><span class="token punctuation">(</span><span class="token function">contextMenuTemplate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> fragment<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> popover <span class="token operator">=</span> fragment<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'sp-popover'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

            <span class="token keyword">const</span> overlay <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">openOverlay</span><span class="token punctuation">(</span>popover<span class="token punctuation">,</span> <span class="token punctuation">{</span>
                <span class="token literal-property property">trigger</span><span class="token operator">:</span> virtualTrigger<span class="token punctuation">,</span>
                <span class="token literal-property property">placement</span><span class="token operator">:</span> <span class="token string">'right-start'</span><span class="token punctuation">,</span>
                <span class="token literal-property property">offset</span><span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token literal-property property">notImmediatelyClosable</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
                <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">'auto'</span><span class="token punctuation">,</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            trigger<span class="token punctuation">.</span><span class="token function">insertAdjacentElement</span><span class="token punctuation">(</span><span class="token string">'afterend'</span><span class="token punctuation">,</span> overlay<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    customElements<span class="token punctuation">.</span><span class="token function">whenDefined</span><span class="token punctuation">(</span><span class="token string">'code-example'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">querySelectorAll</span><span class="token punctuation">(</span><span class="token string">'code-example'</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token parameter">example</span> <span class="token operator">=&gt;</span> example<span class="token punctuation">.</span>updateComplete<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span></pre></code-example> </sp-tab-panel><script type="module" async src="../../../swc.CiQlzxnR.js"></script></body></html>