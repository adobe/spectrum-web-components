/**
 * Copyright 2025 Adobe. All rights reserved.
 * This file is licensed to you under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License. You may obtain a copy
 * of the License at http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under
 * the License is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS
 * OF ANY KIND, either express or implied. See the License for the specific language
 * governing permissions and limitations under the License.
 */

/* Base header styles */
:host {
    display: block;
    width: 100%;
    box-sizing: border-box;
}

.header {
    display: flex;
    flex-direction: column;
    width: 100%;
    padding: var(--spectrum-spacing-400) var(--spectrum-spacing-500);
    border-bottom: var(--spectrum-border-width-100) solid var(--spectrum-gray-300);
    background-color: var(--spectrum-background-layer-2-color);
}

/* Main row layout - matches Figma structure */
.main-row {
    display: flex;
    align-items: center;
    gap: var(--spectrum-spacing-300);
    min-height: var(--spectrum-component-height-100);
}

/* Back button */
.back-button {
    flex-shrink: 0;
    margin-inline-end: var(--spectrum-spacing-100);
}

/* Title container */
.title-container {
    flex-grow: 1;
    min-width: 0;
    /* Allow text truncation */
}

.title {
    margin: 0;
    font-family: var(--spectrum-sans-serif-font-family);
    font-weight: var(--spectrum-bold-font-weight);
    color: var(--spectrum-neutral-content-color-default);
    display: flex;
    align-items: center;
    gap: var(--spectrum-spacing-100);
}

/* L1 specific styles - larger, more prominent */
:host([variant="l1"]) .title {
    font-size: var(--spectrum-font-size-500);
    line-height: var(--spectrum-line-height-100);
    font-weight: var(--spectrum-heading-sans-serif-font-weight);
}

:host([variant="l1"]) .subtitle {
    margin: var(--spectrum-spacing-75) 0 0 0;
    font-size: var(--spectrum-font-size-100);
    color: var(--spectrum-neutral-content-color-subdued);
    line-height: var(--spectrum-line-height-100);
}

/* L2 specific styles - smaller than L1 */
:host([variant="l2"]) .title {
    font-size: var(--spectrum-font-size-300);
    line-height: var(--spectrum-line-height-100);
    font-weight: var(--spectrum-heading-sans-serif-font-weight);
}

/* Edit button */
.edit-button {
    opacity: 0;
    transition: opacity var(--spectrum-animation-duration-100) ease-in-out;
}

.title-container:hover .edit-button,
.edit-button:focus-visible {
    opacity: 1;
}

/* Title editing */
.title-edit-container {
    display: flex;
    flex-direction: column;
    gap: var(--spectrum-spacing-100);
    flex-grow: 1;
}

.title-input {
    font-size: var(--spectrum-font-size-300);
    font-weight: var(--spectrum-bold-font-weight);
}

.edit-actions {
    display: flex;
    gap: var(--spectrum-spacing-100);
    align-items: center;
}

.validation-errors {
    display: flex;
    flex-direction: column;
    gap: var(--spectrum-spacing-50);
}

/* Action slots */
.actions-start,
.actions-middle,
.actions-end {
    display: flex;
    align-items: center;
    gap: var(--spectrum-spacing-100);
}

.actions-start {
    flex-shrink: 0;
}

.actions-middle {
    flex-shrink: 0;
}

.actions-end {
    flex-shrink: 0;
    margin-inline-start: auto;
}

/* Status row (L2 only) - matches Figma spacing */
.status-row {
    display: flex;
    align-items: center;
    margin-block-start: var(--spectrum-spacing-300);
    min-height: var(--spectrum-component-height-75);
}

/* Status items with spacing only (no dividers per Figma) */
.status-row ::slotted(*) {
    margin-inline-end: var(--spectrum-spacing-200);
}

.status-row ::slotted(*:last-child) {
    margin-inline-end: 0;
}

/* Size variants */
:host([size="s"]) .header {
    padding: var(--spectrum-spacing-200) var(--spectrum-spacing-300);
}

:host([size="s"]) .main-row {
    min-height: var(--spectrum-component-height-75);
}

:host([size="s"]) :host([variant="l1"]) .title {
    font-size: var(--spectrum-font-size-300);
}

:host([size="s"]) :host([variant="l2"]) .title {
    font-size: var(--spectrum-font-size-200);
}

:host([size="l"]) .header {
    padding: var(--spectrum-spacing-400) var(--spectrum-spacing-500);
}

:host([size="l"]) .main-row {
    min-height: var(--spectrum-component-height-200);
}

:host([size="l"]) :host([variant="l1"]) .title {
    font-size: var(--spectrum-font-size-500);
}

:host([size="l"]) :host([variant="l2"]) .title {
    font-size: var(--spectrum-font-size-400);
}

:host([size="xl"]) .header {
    padding: var(--spectrum-spacing-500) var(--spectrum-spacing-600);
}

:host([size="xl"]) .main-row {
    min-height: var(--spectrum-component-height-300);
}

:host([size="xl"]) :host([variant="l1"]) .title {
    font-size: var(--spectrum-font-size-600);
}

:host([size="xl"]) :host([variant="l2"]) .title {
    font-size: var(--spectrum-font-size-500);
}

/* Focus management */
:host([edit-mode]) .header {
    background-color: var(--spectrum-background-layer-1-color);
    border-color: var(--spectrum-accent-color-900);
}

/* Responsive behavior */
@media (max-width: 768px) {
    .main-row {
        flex-wrap: wrap;
    }

    .actions-start,
    .actions-middle,
    .actions-end {
        order: 2;
        flex-basis: 100%;
        justify-content: center;
        margin-block-start: var(--spectrum-spacing-100);
    }

    .actions-end {
        margin-inline-start: 0;
    }
}
