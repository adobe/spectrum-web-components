---
description: 2nd-gen/packages/swc/components/*/stories/**
alwaysApply: false
---
# Storybook stories format standards

Enforce consistent formatting and structure for Storybook stories files in 2nd-gen components.

## Scope

Apply to all `.stories.ts` and `.usage.mdx` files in `2nd-gen/packages/swc/components/*/stories/`.

## File structure

### Stories file (`.stories.ts`)

Required structure with visual separators between sections:

1. **Copyright header** (lines 1-11)
2. **Imports**
3. **METADATA** - Meta object with component configuration
4. **AUTODOCS STORY** - Playground story
5. **ANATOMY STORIES** - Component structure (if applicable)
6. **OPTIONS STORIES** - Variants, sizes, styles
7. **STATES STORIES** - Component states (if applicable)
8. **BEHAVIORS STORIES** - Built-in functionality (if applicable)
9. **ACCESSIBILITY STORIES** - A11y demonstration
10. **HELPER FUNCTIONS** - Utilities like size label mappers (if needed)

#### Visual separators

```typescript
// ────────────────
//    METADATA
// ────────────────

// ────────────────────
//    AUTODOCS STORY
// ────────────────────

// ──────────────────────────
//    ANATOMY STORIES
// ──────────────────────────

// ──────────────────────────
//    OPTIONS STORIES
// ──────────────────────────

// ──────────────────────────
//    STATES STORIES
// ──────────────────────────

// ──────────────────────────────
//    BEHAVIORS STORIES
// ──────────────────────────────

// ────────────────────────────────
//    ACCESSIBILITY STORIES
// ────────────────────────────────

// ────────────────────────
//    HELPER FUNCTIONS
// ────────────────────────
```

### Usage file (`.usage.mdx`)

Keep minimal—use `<SpectrumStories />` to pull in stories by tag. Only include sections with corresponding stories, except Installation which is written directly in MDX.

```mdx
import { SpectrumStories } from '../../../.storybook/blocks';

## Installation

Package name, npm install command, and import statements go here directly (not as a story).

## Anatomy

<SpectrumStories tag="anatomy" hideTitle />

## Options

<SpectrumStories tag="options" />

## States

<SpectrumStories tag="states" />

## Behaviors

<SpectrumStories tag="behaviors" />

## Accessibility

<SpectrumStories tag="a11y" hideTitle />
```

**Section rules**:
- Use `hideTitle` for Anatomy and Accessibility only
- Follow this section order, skipping inapplicable sections
- Use sentence case for headings

## Meta configuration

### Required fields

```typescript
/**
 * Component description explaining its purpose and key features.
 */
const meta: Meta = {
    title: 'Component name',
    component: 'swc-component-name',
    args,
    argTypes,
    render: (args) => template(args),
    parameters: {
        actions: { handles: events },      // If events exist
        docs: { subtitle: `Component description` }, // Required
        design: { type: 'figma', url: 'https://www.figma.com/...'},     // Recommended
        stackblitz: { url: 'https://stackblitz.com/...'},                // Recommended
    },
    tags: ['migrated'],
};
```

## Layout and decorators

Use `flexLayout: true` for stories displaying multiple items (sizes, variants, states). This applies flex layout with consistent spacing.

```typescript
export const Sizes: Story = {
    render: () => html`
        <swc-badge size="s">Small</swc-badge>
        <swc-badge size="m">Medium</swc-badge>
        <swc-badge size="l">Large</swc-badge>
        <swc-badge size="xl">Extra-large</swc-badge>
    `,
    parameters: { flexLayout: true },
    tags: ['options'],
};
```

### Customizing layout

Extend with `parameters.styles` or use styles alone for custom layouts:

```typescript
export const Sizes: Story = {
    parameters: {
        flexLayout: true,
        styles: { 
            'flex-wrap': 'wrap', 
            'max-inline-size': '80ch' 
        },
    },
};

// Or fully custom (no flex defaults):
export const GridLayout: Story = {
    parameters: {
        styles: { 
            display: 'grid', 
            'grid-template-columns': 'repeat(3, 1fr)' 
        },
    },
};
```

### Static color decorator

For static color stories, use `staticColorsDemo: true` with `flexLayout: true`:

```typescript
export const StaticColors: Story = {
    render: (args) => html`
        ${['white', 'black'].map((color) => template({ 'static-color': color }),
    parameters: { 
        flexLayout: true, 
        staticColorsDemo: true 
    },
    tags: ['options', '!test'],
};
```

The decorator displays two background zones—dark gradient for `static-color="white"` content, light gradient for `static-color="black"` content.

## Story ordering

Control display order within sections using `section-order`. Stories sort by lowest value first, then alphabetically for ties or missing values.

```typescript
export const Sizes: Story = {
    tags: ['options'],
    parameters: { 'section-order': 1 },
};

export const StaticColors: Story = {
    tags: ['options'],
    parameters: { 'section-order': 10 },
};
```

## Tags

### Required tags

| Tag | Usage |
|-----|-------|
| `'autodocs'`, `'dev'` | Playground story only |
| `'anatomy'` | Anatomy stories |
| `'options'` | Variant, size, and style stories |
| `'states'` | State demonstration stories |
| `'behaviors'` | Method, event, and automatic behavior stories |
| `'a11y'` | Accessibility story |
| `'migrated'` | On meta object |

### Exclusion tags

- `'!test'` - Exclude from test runs
- `'!dev'` - Exclude from dev Storybook

## Story types

### Playground

First story after meta. No JSDoc comment. Set args to the most common use case—this appears as the docs page preview.

```typescript
export const Playground: Story = {
    args: { /* most common use case */ },
    tags: ['autodocs', 'dev'],
};
```

Include comprehensive JSDoc comment above the meta object explaining what the component does.

Every story export must have a JSDoc comment explaining:

- What it demonstrates
- Any important context or usage notes
- Best practices if relevant

**Exception**: Do NOT add JSDoc comments above the Playground story.

Use markdown formatting within JSDoc:

- `**Bold**` for emphasis
- Bullet lists for multiple points
- Code formatting with backticks

```typescript
/**
 * A `<swc-component-name>` is a UI element that displays a **status** or **message**.
 */
export const Playground: Story = {
    args: { /* most common use case */ },
    tags: ['autodocs', 'dev'],
};
```

### Anatomy

Document all slots and content-rendering properties (e.g., `label`, `icon`, `src`). Combine variations into one story.

```typescript
/**
 * A component-name consists of:
 *
 * - **Default slot**: Primary content
 * - **icon slot**: Optional icon element
 * - **label**: Text label rendered by the component
 */
export const Anatomy: Story = {
    render: (args) => html`
        ${template({ ...args, /* text only */ })}
        ${template({ ...args, /* icon only */ })}
        ${template({ ...args, /* text + icon */ })}
    `,
    tags: ['anatomy'],
    parameters: { flexLayout: true },
};
```

### Options

Document every attribute/property not covered in Anatomy, States, or Behaviors. Consolidate related options into single stories. Use this order for story section-order:

| Story | Content |
|-------|---------|
| `Sizes` | All size variants |
| `SemanticVariants` | Positive, informative, negative, notice, neutral |
| `NonSemanticVariants` | Color-coded categories (seafoam, indigo, etc.) |
| `StaticColors` | Static color pattern (see below) |
| `Quiet/Subtle/Emphasized` | Quiet, subtle, emphasized variants |
| `Outline` | Outline variants |
| `Positioning` | Positioning modifiers (fixed, absolute, relative) |

```typescript
/**
 * Components come in multiple sizes to fit various contexts.
 */
export const Sizes: Story = {
    render: (args) => html`
        ${template({ ...args, size: 's', label: 'Small' })}
        ${template({ ...args, size: 'm', label: 'Medium' })}
        ${template({ ...args, size: 'l', label: 'Large' })}
    `,
    tags: ['options'],
    parameters: { flexLayout: true },
};

/**
 * Semantic variants provide meaning through color. 
 * 
 * Use these variants for the following statuses:
 *
 * - **Informative**: active, in use, live, published
 * - **Neutral**: archived, deleted, paused, draft, not started, ended
 * - **Positive**: approved, complete, success, new, purchased, licensed
 * - **Notice**: needs approval, pending, scheduled, syncing, indexing, processing
 * - **Negative**: error, alert, rejected, failed
 *
 */
export const SemanticVariants: Story = {
    render: (args) => html`
        ${template({ ...args, variant: 'positive' })}
        ${template({ ...args, variant: 'informative' })}
        ${template({ ...args, variant: 'negative' })}
        ${template({ ...args, variant: 'notice' })}
        ${template({ ...args, variant: 'neutral' })}
    `,
    tags: ['options'],
};

/**
 * Non-semantic variants use color-coded categories.
 */
export const NonSemanticVariants: Story = {
    render: (args) => html`
        ${template({ ...args, variant: 'seafoam' })}
        ${template({ ...args, variant: 'indigo' })}
        ${/* ... other colors */ ''}
    `,
    tags: ['options'],
};
```

#### Static color pattern

For components with `static-color` attribute, implement three stories:

1. **`StaticBlack`** - `static-color="black"` on light background
2. **`StaticWhite`** - `static-color="white"` on dark background  
3. **`StaticColors`** - Both variants side-by-side

```typescript
/**
 * Use `static-color` for display over images or colored backgrounds.
 */
export const StaticBlack: Story = {
    args: { 'static-color': 'black' },
    parameters: { flexLayout: false, styles: { color: 'black' } },
    tags: ['options'],
};

export const StaticWhite: Story = {
    args: { 'static-color': 'white' },
    parameters: { flexLayout: false, styles: { color: 'white' } },
    tags: ['options'],
};

export const StaticColors: Story = {
    render: (args) => html`
        ${['white', 'black'].map((color) => html`${template({ ...args, 'static-color': color })}`)}
    `,
    parameters: { flexLayout: false, staticColorsDemo: true },
    tags: ['options', '!test'],
};
```

### States

Combine all states into one story when possible.

```typescript
/**
 * Components can exist in various states.
 */
export const States: Story = {
    render: (args) => html`
        ${template({ ...args })}
        ${template({ ...args, selected: true })}
        ${template({ ...args, disabled: true })}
    `,
    tags: ['states'],
    parameters: { flexLayout: true },
};
```

Complex states (e.g., animated indeterminate) may warrant separate stories.

```typescript
/**
 * Indeterminate state shows unknown progress.
 */
export const Indeterminate: Story = {
    tags: ['states'],
    args: {
        indeterminate: true,
    },
};
```

### Behaviors

Document automatic (built-in) behaviors, like text-wrapping, as well as, all methods, and all events.

```typescript
/**
 * Long text automatically wraps to multiple lines.
 */
export const TextWrapping: Story = {
    render: (args) => html`
        ${template({ 'default-slot': 'Long text that wraps to multiple lines' })}
    `,
    tags: ['behaviors'],
};
```

### Accessibility

Required for every component. Document features and best practices.

```typescript
/**
 * ### Features
 * The `<sp-component-name>` element implements several accessibility features:
 *
 * 1. **Feature name**: Description (e.g., keyboard navigation, ARIA states, roles, properties)
 * 2. **Feature name**: Description
 *
 * ### Best practices
 *
 * - Best practice, such as, "Always provide a descriptive label"
 * - Best practice, such as, "Ensure sufficient color contrast"
 */
export const Accessibility: Story = {
    tags: ['a11y'],
};
```

## JSDoc requirements

Every story export requires a JSDoc comment explaining what it demonstrates, **except Playground**.

Use markdown formatting:
- `**Bold**` for emphasis
- Bullet lists for multiple points
- Backticks for code

```typescript
/**
 * Semantic variants provide meaning through color:
 * - **Positive**: approved, complete, success
 * - **Negative**: error, alert, rejected
 */
export const SemanticVariants: Story = { /* ... */ };
```

## Accessibility requirements

All stories must demonstrate accessible usage:

1. **Include required labels** - `label`, `aria-label`, or slot content as needed
2. **Use meaningful content** - No "Lorem ipsum" placeholder text
3. **Show proper ARIA usage** - Correct attributes when applicable
4. **Never show inaccessible patterns**

| Component type | Required |
|----------------|----------|
| Progress indicators | `label` attribute |
| Buttons/actions | Visible text or `aria-label` |
| Form fields | `<label>` or `aria-label` |
| Images/icons | `alt` or `aria-label` |

```typescript
// ✅ Good
export const Sizes: Story = {
    render: (args) => html`
        ${template({ ...args, size: 's', label: 'Uploading file' })}
        ${template({ ...args, size: 'm', label: 'Processing request' })}
    `,
};

// ❌ Bad - missing required label
export const Sizes: Story = {
    render: (args) => html`
        ${template({ ...args, size: 's' })}
        ${template({ ...args, size: 'm' })}
    `,
};
```

## Quick reference

### ❌ Don't

- Add JSDoc to Playground story
- Use 'usage' tag (deprecated)
- Omit `subtitle` in meta parameters
- Use placeholder text
- Demonstrate inaccessible patterns

### ✅ Do

- Use `<SpectrumStories />` in usage.mdx
- Use `flexLayout: true` for multi-item stories
- Tag stories correctly: `anatomy`, `options`, `states`, `behaviors`, `a11y`
- Include comprehensive JSDoc (except Playground)
- Use meaningful, realistic content

## Checklist

- [ ] Copyright header (2025)
- [ ] Visual separators between sections
- [ ] Meta: title, component, args, argTypes, render, `parameters.docs.subtitle`, `tags: ['migrated']`
- [ ] Playground: `['autodocs', 'dev']` tags, no JSDoc, common use case args
- [ ] Anatomy: all slots + content properties, `['anatomy']` tag, `flexLayout: true`
- [ ] Options: all uncovered attributes, `['options']` tag, `flexLayout: true`
- [ ] States: consolidated states, `['states']` tag, `flexLayout: true` (if applicable)
- [ ] Behaviors: `['behaviors']` tag (if applicable)
- [ ] Accessibility: features + best practices, `['a11y']` tag
- [ ] Static colors: three-story pattern with `staticColorsDemo` (if applicable)
- [ ] Story order: `section-order` parameter where needed
- [ ] All stories accessible with meaningful content
- [ ] usage.mdx: minimal, uses `<SpectrumStories />`
