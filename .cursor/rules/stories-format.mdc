---
description: 2nd-gen/packages/swc/components/*/stories/**
alwaysApply: false
---
# Storybook stories format standards

Enforce consistent formatting and structure for Storybook stories files in 2nd-gen components.

## Scope

Apply to all `.stories.ts` and `.usage.mdx` files in:

- `2nd-gen/packages/swc/components/*/stories/`

## File structure requirements

### Stories file (`.stories.ts`)

Every component must have a `.stories.ts` file with the following structure:

1. **Copyright header** (lines 1-11)
2. **Imports section**
3. **METADATA section** with visual separator
4. **AUTODOCS STORY section** with visual separator
5. **ANATOMY STORIES section** with visual separator (if applicable)
6. **OPTIONS STORIES section** with visual separator
7. **STATES STORIES section** with visual separator (if applicable)
8. **BEHAVIORS STORIES section** with visual separator (if applicable)
9. **ACCESSIBILITY STORIES section** with visual separator
10. **HELPER FUNCTIONS section** with visual separator (if needed)

**Note**: Installation documentation is handled separately in usage.mdx, not as a story.

### Usage file (`.usage.mdx`)

Every component must have a `.usage.mdx` file with simplified structure:

```mdx
import { SpectrumStories } from '../../../.storybook/blocks';

## Installation

Installation content is written directly in MDX (not a story). Include package name, npm install command, and import statements.

## Anatomy

<SpectrumStories tag="anatomy" hideTitle />

## Options

<SpectrumStories tag="options" />

## States

<SpectrumStories tag="states" />

## Behaviors

<SpectrumStories tag="behaviors" />

## Accessibility

<SpectrumStories tag="a11y" hideTitle />
```

**Note**: Only include sections that have corresponding stories (except Installation, which is written directly in MDX). Follow this section order, skipping inapplicable sections.

## Section formatting

### Visual separators

Use consistent visual separators for major sections:

```typescript
// ────────────────
//    METADATA
// ────────────────

// ────────────────────
//    AUTODOCS STORY
// ────────────────────

// ──────────────────────────
//    ANATOMY STORIES
// ──────────────────────────

// ──────────────────────────
//    OPTIONS STORIES
// ──────────────────────────

// ──────────────────────────
//    STATES STORIES
// ──────────────────────────

// ──────────────────────────────
//    BEHAVIORS STORIES
// ──────────────────────────────

// ────────────────────────────────
//    ACCESSIBILITY STORIES
// ────────────────────────────────

// ────────────────────────
//    HELPER FUNCTIONS
// ────────────────────────
```

**Note**: Installation documentation is written directly in usage.mdx, not as a story.

## Meta configuration

### Required fields

The meta object must include:

```typescript
const meta: Meta = {
    title: 'Component name',              // Required
    component: 'swc-component-name',      // Required
    args,                                  // Required
    argTypes,                              // Required
    render: (args) => template(args),     // Required
    parameters: {
        actions: {
            handles: events,               // If events exist
        },
        docs: {
            subtitle: `Component description`,  // Required
        },
        design: {                          // Optional but recommended
            type: 'figma',
            url: 'https://www.figma.com/...',
        },
        stackblitz: {                      // Optional but recommended
            url: 'https://stackblitz.com/...',
        },
    },
    tags: ['migrated'],                    // Required
};
```

### JSDoc for meta

Include comprehensive JSDoc comment above the meta object explaining what the component does:

```typescript
/**
 * Component description explaining its purpose and key features.
 * Can be multiple paragraphs if needed.
 */
const meta: Meta = {
    // ...
};
```

## Story organization and tagging

### Playground story

Required first story after meta. Do NOT include JSDoc comment above Playground story.

**Important**: Set the Playground args to the *simplest or most common use case** for the component, as this story is also used as the preview at the top of the documentation page.

```typescript
export const Playground: Story = {
    args: {
        // Set to the default args or args for the most common use case - this appears as the docs page preview
    },
    tags: ['autodocs', 'dev'],
};
```

### Anatomy stories

Stories demonstrating component structure. **Combine all slotted content combinations into a single Anatomy story** to make it easier for consumers to view all variations at once.

```typescript
/**
 * Description of the component's anatomy and key parts.
 * Explain what makes up the component.
 *
 * Show all combinations of slotted content in a single story.
 */
export const Anatomy: Story = {
    render: (args) => html`
        ${template({ ...args, /* text only */ })}
        ${template({ ...args, /* icon only */ })}
        ${template({ ...args, /* text + icon */ })}
    `,
    tags: ['anatomy'],
    args: {},
};
```

### Options stories

Stories demonstrating variants, sizes, styles. **Consolidate related options into single stories** to make it easier for consumers to compare variations:

- **Sizes**: Combine all sizes into a single `Sizes` story
- **Semantic variants**: Combine all semantic variants into a single `SemanticVariants` story
- **Non-semantic variants**: Combine all non-semantic variants into a single `NonSemanticVariants` story
- **Quiet/subtle/emphasized**: Combine into a single story if multiple apply
- **Outline**: Can be shown alongside variants or as a separate story
- **Static color**: Use the three-story pattern (see Static color pattern section)
- **Positioning**: Combine positioning options into a single story

```typescript
/**
 * Components come in [X] sizes to fit various contexts.
 * Show all sizes in a single story for easy comparison.
 */
export const Sizes: Story = {
    render: (args) => html`
        ${template({ ...args, size: 's' })}
        ${template({ ...args, size: 'm' })}
        ${template({ ...args, size: 'l' })}
    `,
    tags: ['options'],
};

/**
 * Semantic variants provide meaning through color.
 * Show all semantic variants in a single story for easy comparison.
 */
export const SemanticVariants: Story = {
    render: (args) => html`
        ${template({ ...args, variant: 'positive' })}
        ${template({ ...args, variant: 'informative' })}
        ${template({ ...args, variant: 'negative' })}
        ${template({ ...args, variant: 'notice' })}
        ${template({ ...args, variant: 'neutral' })}
    `,
    tags: ['options'],
};

/**
 * Non-semantic variants use color-coded categories.
 * Show all non-semantic variants in a single story for easy comparison.
 */
export const NonSemanticVariants: Story = {
    render: (args) => html`
        ${template({ ...args, variant: 'seafoam' })}
        ${template({ ...args, variant: 'indigo' })}
        ${/* ... other colors */ ''}
    `,
    tags: ['options'],
};
```

### States stories

Stories demonstrating different states (if applicable). **Combine all states into a single States story** (or minimal stories when states are complex) to make it easier for consumers to compare:

```typescript
/**
 * Components can exist in various states.
 * Show all states in a single story for easy comparison.
 */
export const States: Story = {
    render: (args) => html`
        ${template({ ...args, /* default */ })}
        ${template({ ...args, selected: true })}
        ${template({ ...args, disabled: true })}
        ${template({ ...args, readonly: true })}
        ${template({ ...args, invalid: true })}
    `,
    tags: ['states'],
    args: {},
};
```

If a state requires more complex demonstration (e.g., indeterminate progress with animation), it may warrant a separate story:

```typescript
/**
 * Indeterminate state shows unknown progress.
 */
export const Indeterminate: Story = {
    tags: ['states'],
    args: {
        indeterminate: true,
    },
};
```

### Behaviors stories

Stories demonstrating built-in functionality (if applicable). Order subsections as follows (skip inapplicable):

- Automatic behaviors (text wrapping, truncation, interactivity)
- Methods
- Events

```typescript
/**
 * Description of this behavior.
 */
export const BehaviorName: Story = {
    render: (args) => html`
        ${template({ ...args /* behavior example */ })}
    `,
    tags: ['behaviors'],
    args: {},
};
```

### Accessibility story

Required accessibility demonstration:

```typescript
/**
 * ### Features
 *
 * The `<sp-component-name>` element implements several accessibility features:
 *
 * 1. **Feature name**: Description (e.g., keyboard navigation, ARIA states, roles, properties)
 * 2. **Feature name**: Description
 *
 * ### Best practices
 *
 * - Best practice one
 * - Best practice two
 */
export const Accessibility: Story = {
    render: () => html`
        ${/* accessibility examples */}
    `,
    tags: ['a11y'],
};
```

## Tag usage requirements

### Required tags

- `'autodocs'` - Only on Playground story
- `'dev'` - Only on Playground story
- `'anatomy'` - For anatomy stories
- `'options'` - For variant, size, and style stories
- `'states'` - For state demonstration stories (if component has states)
- `'behaviors'` - For behavior stories (methods, events, automatic behaviors)
- `'a11y'` - For accessibility demonstration story

**Note**: Installation documentation is written directly in usage.mdx, not as a tagged story.

### Exclusion tags

- `'!test'` - Exclude from test runs (e.g., complex static color stories)
- `'!dev'` - Exclude from dev Storybook

### Migration tag

- `'migrated'` - On the meta object to indicate refined format

## JSDoc requirements

### Above each story export

Every story export must have a JSDoc comment explaining:

- What it demonstrates
- Any important context or usage notes
- Best practices if relevant

**Exception**: Do NOT add JSDoc comments above the Playground story.

Use markdown formatting within JSDoc:

- `**Bold**` for emphasis
- Bullet lists for multiple points
- Code formatting with backticks

Example:

```typescript
/**
 * Semantic variants allow you to render the badge with a descriptive name that maps to a design-system-aligned color.
 *
 * Use these variants for the following statuses:
 * - **Positive**: approved, complete, success, new, purchased, licensed
 * - **Informative**: active, in use, live, published
 * - **Negative**: error, alert, rejected, failed
 */
export const SemanticVariants: Story = {
    // ...
};
```

## Static color pattern

For components with `static-color` attribute, implement the three-story pattern:

```typescript
// Individual color stories without JSDoc
export const StaticWhite: Story = {
    args: {
        'static-color': 'white',
        // other args
    },
};

export const StaticBlack: Story = {
    args: {
        'static-color': 'black',
        // other args
    },
};

/**
 * When displaying over images or colored backgrounds, use the `static-color` attribute for better contrast.
 */
export const StaticColors: Story = {
    render: createStaticColorStory(template, [
        { args: StaticWhite.args },
        { args: StaticBlack.args },
    ]),
    parameters: {
        docs: {
            source: {
                code: generateStaticColorSource('swc-component-name', [
                    { args: StaticWhite.args },
                    { args: StaticBlack.args },
                ]),
            },
        },
    },
    tags: ['options', '!test'],
};
```

## Heading elements in stories

### Demo class requirement

When a story includes heading elements (h1, h2, h3, h4, h5, h6) in its rendered output, apply the `demo` class to prevent the heading from appearing in the table of contents:

```typescript
export const Sizes: Story = {
    render: () =>
        html` <div style="display: flex; flex-direction: row; gap: 16px;">
            ${Divider.VALID_SIZES.map((size) => {
                const label =
                    size === 's' ? 'Small' : size === 'l' ? 'Large' : 'Medium';
                return html`<div>
                    <h3 class="demo">${label}</h3>
                    <swc-divider size=${size}></swc-divider>
                    <p>Text below the divider.</p>
                </div>`;
            })}
        </div>`,
    tags: ['options'],
};
```

**Why**: The `demo` class prevents story headings from being included in the Storybook documentation's table of contents, keeping the TOC clean and focused on actual documentation sections.

### Common scenarios

Apply `class="demo"` to headings when:
- Demonstrating size variations with labeled examples
- Showing component hierarchy in rendered examples
- Including headings as part of the component demo context

Do NOT use the `demo` class for:
- Section headings in JSDoc comments (use markdown)
- Headings in usage.mdx files (these should not exist)

## Helper functions

### CONTAINER helper

If a CONTAINER helper is needed for layout:

```typescript
/* @todo Pull this up into a decorator for all stories to leverage */
function CONTAINER(content: TemplateResult<1>[]): TemplateResult {
    return html`<div
        style=${styleMap({
            display: 'flex',
            gap: 'var(--spectrum-spacing-200)',
            'flex-wrap': 'wrap',
            'justify-content': 'center',
            // Used 80ch because that's generally considered the maximum readable width for text in a web page.
            'max-inline-size': '80ch',
        })}
    >
        ${content}
    </div>`;
}
```

**Note**: Include @todo comment suggesting extraction to shared utility.

## Usage.mdx requirements

### Minimal structure

Keep usage.mdx files minimal and use `<SpectrumStories />` component:

```mdx
import { SpectrumStories } from '../../../.storybook/blocks';

## Installation

Installation content is written directly in MDX (not a story). Include:
- Package name and npm install command
- Import statements
- Basic usage example

## Anatomy

<SpectrumStories tag="anatomy" hideTitle />

## Options

<SpectrumStories tag="options" />

## States

<SpectrumStories tag="states" />

## Behaviors

<SpectrumStories tag="behaviors" />

## Accessibility

<SpectrumStories tag="a11y" hideTitle />
```

### Section rules

- Installation content is written directly in MDX (not as a story)
- Use `hideTitle` for Anatomy and Accessibility sections
- Do NOT use `hideTitle` for Options, States, and Behaviors sections
- Only include sections that have corresponding stories (except Installation)
- Use consistent section heading capitalization (sentence case)
- Follow the prescribed section order: Installation → Anatomy → Options → States → Behaviors → Accessibility

## Common violations

### ❌ Don't

- Use old Canvas/Story imports from '@storybook/addon-docs/blocks'
- Write verbose examples directly in usage.mdx
- Forget JSDoc comments on story exports (except Playground)
- Add JSDoc comment to Playground story
- Use inconsistent section separators
- Tag stories incorrectly (e.g., 'usage' instead of 'options')
- Forget to include subtitle in meta parameters
- Use 'usage' tag (deprecated in refined format)
- Include heading elements in stories without `class="demo"`

### ✅ Do

- Use SpectrumStories component in usage.mdx
- Include comprehensive JSDoc for each story (except Playground)
- Keep Playground story without JSDoc comment
- Use consistent visual separators
- Tag stories with proper semantic tags
- Include subtitle in meta.parameters.docs
- Keep usage.mdx minimal and maintainable
- Use 'anatomy', 'options', 'states', 'behaviors', 'a11y' tags (Installation is MDX-only, no tag)
- Apply `class="demo"` to any heading elements in story renders

## Checklist for new/migrated stories

- [ ] Copyright header present (2025 year)
- [ ] All required sections with visual separators
- [ ] Meta has title, component, args, argTypes, render, parameters.docs.subtitle, tags
- [ ] Playground story with 'autodocs' and 'dev' tags, set to default or most common use case (no JSDoc comment)
- [ ] Installation section written directly in usage.mdx (not a story)
- [ ] Anatomy story combining all slotted content variations with 'anatomy' tag and JSDoc
- [ ] Sizes story combining all sizes with 'options' tag and JSDoc
- [ ] SemanticVariants story combining all semantic variants with 'options' tag and JSDoc (if applicable)
- [ ] NonSemanticVariants story combining all non-semantic variants with 'options' tag and JSDoc (if applicable)
- [ ] States story combining all states with 'states' tag and JSDoc (if applicable)
- [ ] Behaviors stories with 'behaviors' tag and JSDoc (if applicable; subsections: automatic behaviors, methods, events)
- [ ] Accessibility story with 'a11y' tag and comprehensive JSDoc (subsections: features, best practices)
- [ ] All story exports have JSDoc comments (except Playground)
- [ ] Playground story does NOT have JSDoc comment
- [ ] Heading elements in stories have `class="demo"`
- [ ] Usage.mdx uses SpectrumStories component
- [ ] Usage.mdx only includes relevant sections in correct order
- [ ] Static color pattern implemented correctly (if applicable)
- [ ] Helper functions include @todo comments

## Reference implementation

See [`progress-circle`](/Users/ceickhoff/Desktop/Code/spectrum-web-components-2/2nd-gen/packages/swc/components/progress-circle/stories) for the canonical refined format implementation.
