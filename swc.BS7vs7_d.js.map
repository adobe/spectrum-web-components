{"version":3,"file":"swc.CZC1BNpo.js","sources":["../../../packages/modal/src/modal-wrapper.css.js","../../../packages/dialog/src/DialogBase.js","../../../packages/dialog/sp-dialog-base.js"],"sourcesContent":["\"use strict\";import{css as i}from\"@spectrum-web-components/base\";const e=i`\n    :host{box-sizing:border-box;visibility:hidden;pointer-events:none;z-index:1;block-size:stretch;inline-size:100vw;transition:visibility 0s linear var(--mod-modal-transition-animation-duration,var(--spectrum-animation-duration-100));justify-content:center;align-items:center;display:flex;position:fixed;inset-block-start:0;inset-inline-start:0}:host([open]){visibility:visible}@media only screen and (device-height<=350px),only screen and (device-width<=400px){:host([responsive]){border-radius:0;block-size:100%;max-block-size:100%;inline-size:100%;max-inline-size:100%;margin-block-start:0}}\n`;export default e;\n//# sourceMappingURL=modal-wrapper.css.js.map\n","\"use strict\";var p=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var s=(l,n,e,i)=>{for(var t=i>1?void 0:i?u(n,e):n,o=l.length-1,r;o>=0;o--)(r=l[o])&&(t=(i?r(n,e,t):r(t))||t);return i&&t&&p(n,e,t),t};import{html as d,nothing as h,SpectrumElement as c}from\"@spectrum-web-components/base\";import{property as a}from\"@spectrum-web-components/base/src/decorators.js\";import\"@spectrum-web-components/underlay/sp-underlay.js\";import\"@spectrum-web-components/button/sp-button.js\";import\"@spectrum-web-components/dialog/sp-dialog.js\";import m from\"@spectrum-web-components/modal/src/modal-wrapper.css.js\";import f from\"@spectrum-web-components/modal/src/modal.css.js\";import{FocusVisiblePolyfillMixin as v}from\"@spectrum-web-components/shared\";import{firstFocusableIn as y}from\"@spectrum-web-components/shared/src/first-focusable-in.js\";export class DialogBase extends v(c){constructor(){super(...arguments);this.dismissable=!1;this.open=!1;this.responsive=!1;this.transitionPromise=Promise.resolve();this.resolveTransitionPromise=()=>{};this.underlay=!1;this.animating=!1}static get styles(){return[m,f]}get dialog(){return this.shadowRoot.querySelector(\"slot\").assignedElements()[0]||this}async focus(){if(this.shadowRoot){const e=y(this.dialog);e?(e.updateComplete&&await e.updateComplete,e.focus()):this.dialog.focus()}else super.focus()}overlayWillCloseCallback(){return this.open?(this.close(),!0):this.animating}dismiss(){this.dismissable&&this.close()}handleClose(e){e.stopPropagation(),this.close()}close(){this.open=!1}dispatchClosed(){this.dispatchEvent(new Event(\"close\",{bubbles:!0}))}handleTransitionEvent(e){this.dispatchEvent(new TransitionEvent(e.type,{bubbles:!0,composed:!0,propertyName:e.propertyName}))}handleUnderlayTransitionend(e){!this.open&&e.propertyName===\"visibility\"&&this.resolveTransitionPromise(),this.handleTransitionEvent(e)}handleModalTransitionend(e){(this.open||!this.underlay)&&this.resolveTransitionPromise(),this.handleTransitionEvent(e)}get hasTransitionDuration(){const e=this.shadowRoot.querySelector(\".modal\"),i=window.getComputedStyle(e).transitionDuration;for(const o of i.split(\",\"))if(parseFloat(o)>0)return!0;const t=this.shadowRoot.querySelector(\"sp-underlay\");if(t){const o=window.getComputedStyle(t).transitionDuration;for(const r of o.split(\",\"))if(parseFloat(r)>0)return!0}return!1}update(e){if(e.has(\"open\")&&e.get(\"open\")!==void 0){const i=this.hasTransitionDuration;this.animating=!0,this.transitionPromise=new Promise(t=>{this.resolveTransitionPromise=()=>{this.animating=!1,!this.open&&i&&this.dispatchClosed(),t()}}),!this.open&&!i&&this.dispatchClosed()}super.update(e)}renderDialog(){return d`\n            <slot></slot>\n        `}render(){return d`\n            ${this.underlay?d`\n                      <sp-underlay\n                          ?open=${this.open}\n                          @close=${this.dismiss}\n                          @transitionrun=${this.handleTransitionEvent}\n                          @transitionend=${this.handleUnderlayTransitionend}\n                          @transitioncancel=${this.handleTransitionEvent}\n                      ></sp-underlay>\n                  `:h}\n            <div\n                class=\"modal ${this.mode}\"\n                @transitionrun=${this.handleTransitionEvent}\n                @transitionend=${this.handleModalTransitionend}\n                @transitioncancel=${this.handleTransitionEvent}\n                @close=${this.handleClose}\n            >\n                ${this.renderDialog()}\n            </div>\n        `}updated(e){e.has(\"open\")&&this.open&&\"updateComplete\"in this.dialog&&\"shouldManageTabOrderForScrolling\"in this.dialog&&this.dialog.updateComplete.then(()=>{this.dialog.shouldManageTabOrderForScrolling()})}async getUpdateComplete(){const e=await super.getUpdateComplete();return await this.transitionPromise,e}}s([a({type:Boolean,reflect:!0})],DialogBase.prototype,\"dismissable\",2),s([a({type:Boolean,reflect:!0})],DialogBase.prototype,\"open\",2),s([a({type:String,reflect:!0})],DialogBase.prototype,\"mode\",2),s([a({type:Boolean})],DialogBase.prototype,\"responsive\",2),s([a({type:Boolean})],DialogBase.prototype,\"underlay\",2);\n//# sourceMappingURL=DialogBase.js.map\n","\"use strict\";import{DialogBase as e}from\"./src/DialogBase.js\";import{defineElement as a}from\"@spectrum-web-components/base/src/define-element.js\";a(\"sp-dialog-base\",e);\n//# sourceMappingURL=sp-dialog-base.js.map\n"],"names":["e","i","DialogBase","v","c","constructor","super","arguments","this","dismissable","open","responsive","transitionPromise","Promise","resolve","resolveTransitionPromise","underlay","animating","styles","m","f","dialog","shadowRoot","querySelector","assignedElements","focus","y","updateComplete","overlayWillCloseCallback","close","dismiss","handleClose","stopPropagation","dispatchClosed","dispatchEvent","Event","bubbles","handleTransitionEvent","TransitionEvent","type","composed","propertyName","handleUnderlayTransitionend","handleModalTransitionend","hasTransitionDuration","window","getComputedStyle","transitionDuration","o","split","parseFloat","t","r","update","has","get","renderDialog","d","render","h","mode","updated","then","shouldManageTabOrderForScrolling","getUpdateComplete","s","a","Boolean","reflect","prototype","String"],"mappings":"gYAYA,MAAMA,EAASC,CAAA;;qIC2BR,MAAMC,UAAmBC,EAA0BC,IAAnDC,WAAAA,GAAAC,SAAAC,WAMHC,KAAOC,aAAc,EAGrBD,KAAOE,MAAO,EASdF,KAAOG,YAAa,EAEpBH,KAAQI,kBAAoBC,QAAQC,UAEpCN,KAAQO,yBAA2B,OAKnCP,KAAOQ,UAAW,EAmClBR,KAAQS,WAAY,CAAA,CA7DpB,iBAA2BC,GACvB,MAAO,CAACC,EAAoBC,EAChC,CA0BA,UAAcC,GAaV,OAXIb,KAAKc,WAAWC,cAAc,QAChCC,mBAAmB,IAUJhB,IACrB,CAEA,WAAsBiB,GAClB,GAAIjB,KAAKc,WAAY,CACjB,MAAMtB,EAAiB0B,EAAiBlB,KAAKa,QACzCrB,GACKA,EAAmC2B,sBAC9B3B,EAAe2B,eAEzB3B,EAAeyB,SAEfjB,KAAKa,OAAOI,OAGpB,MACInB,MAAMmB,OAEd,CAIOG,wBAAAA,GACH,OAAKpB,KAAKE,MACVF,KAAKqB,SACE,GAFgBrB,KAAKS,SAGhC,CAEQa,OAAAA,GACCtB,KAAKC,aAGVD,KAAKqB,OACT,CAEUE,WAAAA,CAAY/B,GAClBA,EAAMgC,kBACNxB,KAAKqB,OACT,CAEOA,KAAAA,GACHrB,KAAKE,MAAO,CAChB,CAEQuB,cAAAA,GACJzB,KAAK0B,cACD,IAAIC,MAAM,QAAS,CACfC,SAAS,IAGrB,CAEQC,qBAAAA,CAAsBrC,GAC1BQ,KAAK0B,cACD,IAAII,gBAAgBtC,EAAMuC,KAAM,CAC5BH,SAAS,EACTI,UAAU,EACVC,aAAczC,EAAMyC,eAGhC,CAEUC,2BAAAA,CAA4B1C,IAC7BQ,KAAKE,MAA+B,eAAvBV,EAAMyC,cACpBjC,KAAKO,2BAETP,KAAK6B,sBAAsBrC,EAC/B,CAEU2C,wBAAAA,CAAyB3C,IAC3BQ,KAAKE,OAASF,KAAKQ,WACnBR,KAAKO,2BAETP,KAAK6B,sBAAsBrC,EAC/B,CAEA,yBAAY4C,GACR,MAAM5C,EAAQQ,KAAKc,WAAWC,cAAc,UAEtCtB,EACF4C,OAAOC,iBAAiB9C,GAAO+C,mBACnC,IAAA,MAAWC,KAAY/C,EAAyBgD,MAAM,KAClD,GAAIC,WAAWF,GAAY,EAAG,SAElC,MAAMG,EAAW3C,KAAKc,WAAWC,cAC7B,eAGJ,GAAI4B,EAAU,CACV,MAAMH,EACFH,OAAOC,iBAAiBK,GAAUJ,mBACtC,IAAA,MAAWK,KAAYJ,EAA4BC,MAAM,KACrD,GAAIC,WAAWE,GAAY,EAAG,OAAO,CAC7C,CAEA,OAAO,CACX,CAEmBC,MAAAA,CAAOrD,GACtB,GAAIA,EAAQsD,IAAI,cAAmC,IAAxBtD,EAAQuD,IAAI,QAAuB,CAC1D,MAAMtD,EAAwBO,KAAKoC,sBACnCpC,KAAKS,WAAY,EACjBT,KAAKI,kBAAoB,IAAIC,QAASsC,IAClC3C,KAAKO,yBAA2B,KAC5BP,KAAKS,WAAY,GACZT,KAAKE,MAAQT,GACdO,KAAKyB,iBACTkB,QAGH3C,KAAKE,OAAST,GAAuBO,KAAKyB,gBACnD,CACA3B,MAAM+C,OAAOrD,EACjB,CAEUwD,YAAAA,GACN,OAAOC,CAAA;;UAKQC,MAAAA,GACf,OAAOD,CAAA;cACDjD,KAAKQ,SACDyC,CAAA;;kCAEgBjD,KAAKE;mCACJF,KAAKsB;2CACGtB,KAAK6B;2CACL7B,KAAKkC;8CACFlC,KAAK6B;;oBAGjCsB;;+BAEanD,KAAKoD;iCACHpD,KAAK6B;iCACL7B,KAAKmC;oCACFnC,KAAK6B;yBAChB7B,KAAKuB;;kBAEZvB,KAAKgD;;SAGnB,CAEmBK,OAAAA,CAAQ7D,GACnBA,EAAQsD,IAAI,SACR9C,KAAKE,MAED,mBAAoBF,KAAKa,QACzB,qCAAsCb,KAAKa,QAE3Cb,KAAKa,OAAOM,eAAemC,KAAK,KAC5BtD,KAAKa,OAAO0C,oCAKhC,CAUA,uBAAyBC,GACrB,MAAMhE,QAAkBM,MAAM0D,oBAC9B,aAAMxD,KAAKI,kBACJZ,CACX,EAjNOiE,EAAA,CADNC,EAAS,CAAE3B,KAAM4B,QAASC,SAAS,KAL3BlE,EAMFmE,UAAA,eAGAJ,EAAA,CADNC,EAAS,CAAE3B,KAAM4B,QAASC,SAAS,KAR3BlE,EASFmE,UAAA,QAGAJ,EAAA,CADNC,EAAS,CAAE3B,KAAM+B,OAAQF,SAAS,KAX1BlE,EAYFmE,UAAA,QAMAJ,EAAA,CADNC,EAAS,CAAE3B,KAAM4B,WAjBTjE,EAkBFmE,UAAA,cASAJ,GADNC,EAAS,CAAE3B,KAAM4B,WA1BTjE,EA2BFmE,UAAA,YCpDXH,EAAc,iBAAkBlE"}