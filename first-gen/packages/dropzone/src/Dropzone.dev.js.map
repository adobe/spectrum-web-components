{
  "version": 3,
  "sources": ["Dropzone.ts"],
  "sourcesContent": ["/**\n * Copyright 2025 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport {\n    CSSResultArray,\n    html,\n    SpectrumElement,\n    TemplateResult,\n} from '@spectrum-web-components/base';\nimport { property } from '@spectrum-web-components/base/src/decorators.js';\n\nimport dropzoneStyles from './dropzone.css.js';\n\nexport type DropzoneEventDetail = DragEvent;\n\nexport type DropEffects = 'copy' | 'move' | 'link' | 'none';\n\n/**\n * @element sp-dropzone\n *\n * @slot - The default slot on an `sp-dropzone` is a great place to place upload instructions\n * built with an `sp-illustrated-message` or other information, possibly even built from data\n * provided by the upload, to support users successfully interacting with the drag and drop\n * based features of your application\n *\n * @fires sp-dropzone-should-accept - A cancellable event that confirms whether or not\n * a file dropped on the UI should be accepted.\n * @fires sp-dropzone-dragover - Announces when files have been dragged over the UI, but not yet dropped.\n * @fires sp-dropzone-dragleave - Announces when dragged files have been moved out of the UI without having been dropped.\n * @fires sp-dropzone-drop - Announces when dragged files have been dropped on the UI.\n */\nexport class Dropzone extends SpectrumElement {\n    public static override get styles(): CSSResultArray {\n        return [dropzoneStyles];\n    }\n\n    /**\n     * Controls the feedback (typically visual) the user is given during a drag and drop operation\n     * @attr\n     * @type {'copy' | 'move' | 'link' | 'none'}\n     */\n    public get dropEffect(): DropEffects {\n        return this._dropEffect;\n    }\n    public set dropEffect(value: DropEffects) {\n        if (['copy', 'move', 'link', 'none'].includes(value)) {\n            this._dropEffect = value;\n        }\n    }\n    private _dropEffect: DropEffects = 'copy';\n\n    /**\n     * Indicates that files are currently being dragged over the dropzone.\n     */\n    @property({ type: Boolean, reflect: true, attribute: 'dragged' })\n    public isDragged = false;\n\n    /**\n     * Set this property to indicate that the component is in a filled state.\n     */\n    @property({ type: Boolean, attribute: 'filled' })\n    public isFilled = false;\n\n    private debouncedDragLeave: number | null = null;\n\n    public override connectedCallback(): void {\n        super.connectedCallback();\n\n        this.addEventListener('drop', this.onDrop);\n        this.addEventListener('dragover', this.onDragOver);\n        this.addEventListener('dragleave', this.onDragLeave);\n    }\n\n    public override disconnectedCallback(): void {\n        super.disconnectedCallback();\n\n        this.removeEventListener('drop', this.onDrop);\n        this.removeEventListener('dragover', this.onDragOver);\n        this.removeEventListener('dragleave', this.onDragLeave);\n    }\n\n    public onDragOver(event: DragEvent): void {\n        const shouldAcceptEvent = new CustomEvent('sp-dropzone-should-accept', {\n            bubbles: true,\n            cancelable: true,\n            composed: true,\n            detail: event,\n        });\n        const shouldAccept = this.dispatchEvent(shouldAcceptEvent);\n        if (!event.dataTransfer) {\n            return;\n        }\n        if (!shouldAccept) {\n            event.dataTransfer.dropEffect = 'none';\n            return;\n        }\n\n        event.preventDefault();\n\n        this.clearDebouncedDragLeave();\n\n        this.isDragged = true;\n\n        event.dataTransfer.dropEffect = this.dropEffect;\n        const dragOverEvent = new CustomEvent('sp-dropzone-dragover', {\n            bubbles: true,\n            composed: true,\n            detail: event,\n        });\n        this.dispatchEvent(dragOverEvent);\n    }\n\n    public onDragLeave(event: DragEvent): void {\n        this.clearDebouncedDragLeave();\n\n        this.debouncedDragLeave = window.setTimeout(() => {\n            this.isDragged = false;\n\n            const dragLeave = new CustomEvent('sp-dropzone-dragleave', {\n                bubbles: true,\n                composed: true,\n                detail: event,\n            });\n            this.dispatchEvent(dragLeave);\n        }, 100);\n    }\n\n    public onDrop(event: DragEvent): void {\n        event.preventDefault();\n\n        this.clearDebouncedDragLeave();\n\n        this.isDragged = false;\n        const dropEvent = new CustomEvent('sp-dropzone-drop', {\n            bubbles: true,\n            composed: true,\n            detail: event,\n        });\n        this.dispatchEvent(dropEvent);\n    }\n\n    protected override render(): TemplateResult {\n        return html`\n            <slot></slot>\n        `;\n    }\n\n    protected clearDebouncedDragLeave(): void {\n        if (this.debouncedDragLeave) {\n            clearTimeout(this.debouncedDragLeave);\n            this.debouncedDragLeave = null;\n        }\n    }\n}\n\ndeclare global {\n    interface GlobalEventHandlersEventMap {\n        'sp-dropzone:should-accept': CustomEvent<DragEvent>;\n        'sp-dropzone:dragover': CustomEvent<DragEvent>;\n        'sp-dropzone:dragleave': CustomEvent<DragEvent>;\n        'sp-dropzone:drop': CustomEvent<DragEvent>;\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;AAYA;AAAA,EAEI;AAAA,EACA;AAAA,OAEG;AACP,SAAS,gBAAgB;AAEzB,OAAO,oBAAoB;AAoBpB,aAAM,iBAAiB,gBAAgB;AAAA,EAAvC;AAAA;AAkBH,SAAQ,cAA2B;AAMnC,SAAO,YAAY;AAMnB,SAAO,WAAW;AAElB,SAAQ,qBAAoC;AAAA;AAAA,EA/B5C,WAA2B,SAAyB;AAChD,WAAO,CAAC,cAAc;AAAA,EAC1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOA,IAAW,aAA0B;AACjC,WAAO,KAAK;AAAA,EAChB;AAAA,EACA,IAAW,WAAW,OAAoB;AACtC,QAAI,CAAC,QAAQ,QAAQ,QAAQ,MAAM,EAAE,SAAS,KAAK,GAAG;AAClD,WAAK,cAAc;AAAA,IACvB;AAAA,EACJ;AAAA,EAiBgB,oBAA0B;AACtC,UAAM,kBAAkB;AAExB,SAAK,iBAAiB,QAAQ,KAAK,MAAM;AACzC,SAAK,iBAAiB,YAAY,KAAK,UAAU;AACjD,SAAK,iBAAiB,aAAa,KAAK,WAAW;AAAA,EACvD;AAAA,EAEgB,uBAA6B;AACzC,UAAM,qBAAqB;AAE3B,SAAK,oBAAoB,QAAQ,KAAK,MAAM;AAC5C,SAAK,oBAAoB,YAAY,KAAK,UAAU;AACpD,SAAK,oBAAoB,aAAa,KAAK,WAAW;AAAA,EAC1D;AAAA,EAEO,WAAW,OAAwB;AACtC,UAAM,oBAAoB,IAAI,YAAY,6BAA6B;AAAA,MACnE,SAAS;AAAA,MACT,YAAY;AAAA,MACZ,UAAU;AAAA,MACV,QAAQ;AAAA,IACZ,CAAC;AACD,UAAM,eAAe,KAAK,cAAc,iBAAiB;AACzD,QAAI,CAAC,MAAM,cAAc;AACrB;AAAA,IACJ;AACA,QAAI,CAAC,cAAc;AACf,YAAM,aAAa,aAAa;AAChC;AAAA,IACJ;AAEA,UAAM,eAAe;AAErB,SAAK,wBAAwB;AAE7B,SAAK,YAAY;AAEjB,UAAM,aAAa,aAAa,KAAK;AACrC,UAAM,gBAAgB,IAAI,YAAY,wBAAwB;AAAA,MAC1D,SAAS;AAAA,MACT,UAAU;AAAA,MACV,QAAQ;AAAA,IACZ,CAAC;AACD,SAAK,cAAc,aAAa;AAAA,EACpC;AAAA,EAEO,YAAY,OAAwB;AACvC,SAAK,wBAAwB;AAE7B,SAAK,qBAAqB,OAAO,WAAW,MAAM;AAC9C,WAAK,YAAY;AAEjB,YAAM,YAAY,IAAI,YAAY,yBAAyB;AAAA,QACvD,SAAS;AAAA,QACT,UAAU;AAAA,QACV,QAAQ;AAAA,MACZ,CAAC;AACD,WAAK,cAAc,SAAS;AAAA,IAChC,GAAG,GAAG;AAAA,EACV;AAAA,EAEO,OAAO,OAAwB;AAClC,UAAM,eAAe;AAErB,SAAK,wBAAwB;AAE7B,SAAK,YAAY;AACjB,UAAM,YAAY,IAAI,YAAY,oBAAoB;AAAA,MAClD,SAAS;AAAA,MACT,UAAU;AAAA,MACV,QAAQ;AAAA,IACZ,CAAC;AACD,SAAK,cAAc,SAAS;AAAA,EAChC;AAAA,EAEmB,SAAyB;AACxC,WAAO;AAAA;AAAA;AAAA,EAGX;AAAA,EAEU,0BAAgC;AACtC,QAAI,KAAK,oBAAoB;AACzB,mBAAa,KAAK,kBAAkB;AACpC,WAAK,qBAAqB;AAAA,IAC9B;AAAA,EACJ;AACJ;AAlGW;AAAA,EADN,SAAS,EAAE,MAAM,SAAS,SAAS,MAAM,WAAW,UAAU,CAAC;AAAA,GAvBvD,SAwBF;AAMA;AAAA,EADN,SAAS,EAAE,MAAM,SAAS,WAAW,SAAS,CAAC;AAAA,GA7BvC,SA8BF;",
  "names": []
}
