{
  "version": 3,
  "sources": ["Icon.ts"],
  "sourcesContent": ["/**\n * Copyright 2025 Adobe. All rights reserved.\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License. You may obtain a copy\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software distributed under\n * the License is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR REPRESENTATIONS\n * OF ANY KIND, either express or implied. See the License for the specific language\n * governing permissions and limitations under the License.\n */\n\nimport { html, TemplateResult } from '@spectrum-web-components/base';\nimport {\n    property,\n    query,\n} from '@spectrum-web-components/base/src/decorators.js';\nimport { ifDefined } from '@spectrum-web-components/base/src/directives.js';\n\nimport { IconsetRegistry } from '@spectrum-web-components/iconset/src/iconset-registry.js';\n\nimport { IconBase } from './IconBase.dev.js'\n\n/**\n * @element sp-icon\n */\nexport class Icon extends IconBase {\n    @property()\n    public src?: string;\n\n    @property()\n    public name?: string;\n\n    @query('#container')\n    private iconContainer?: HTMLElement;\n\n    private updateIconPromise?: Promise<void>;\n\n    public override connectedCallback(): void {\n        super.connectedCallback();\n        window.addEventListener('sp-iconset-added', this.iconsetListener);\n    }\n\n    public override disconnectedCallback(): void {\n        super.disconnectedCallback();\n        window.removeEventListener('sp-iconset-added', this.iconsetListener);\n    }\n\n    public override firstUpdated(): void {\n        this.updateIconPromise = this.updateIcon();\n    }\n\n    public override attributeChangedCallback(\n        name: string,\n        old: string,\n        value: string\n    ): void {\n        super.attributeChangedCallback(name, old, value);\n        this.updateIconPromise = this.updateIcon(); // any of our attributes change, update our icon\n    }\n\n    private iconsetListener = (event: CustomEvent): void => {\n        if (!this.name) {\n            return;\n        }\n        // parse the icon name to get iconset name\n        const icon = this.parseIcon(this.name);\n        if (event.detail.name === icon.iconset) {\n            this.updateIconPromise = this.updateIcon();\n        }\n    };\n\n    private announceIconImageSrcError(): void {\n        this.dispatchEvent(\n            new Event('error', {\n                cancelable: false,\n                bubbles: false,\n                composed: false,\n            })\n        );\n    }\n\n    protected override render(): TemplateResult {\n        if (this.name) {\n            return html`\n                <div id=\"container\"></div>\n            `;\n        } else if (this.src) {\n            return html`\n                <img\n                    src=\"${this.src}\"\n                    alt=${ifDefined(this.label)}\n                    @error=${this.announceIconImageSrcError}\n                />\n            `;\n        }\n        return super.render();\n    }\n\n    private async updateIcon(): Promise<void> {\n        if (this.updateIconPromise) {\n            await this.updateIconPromise;\n        }\n        if (!this.name) {\n            return Promise.resolve();\n        }\n        // parse the icon name to get iconset name\n        const icon = this.parseIcon(this.name);\n        // try to retrieve the iconset\n        const iconset = IconsetRegistry.getInstance().getIconset(icon.iconset);\n        if (!iconset) {\n            // we can stop here as there's nothing to be done till we get the iconset\n            return Promise.resolve();\n        }\n        if (!this.iconContainer) {\n            return Promise.resolve();\n        }\n        this.iconContainer.innerHTML = '';\n        return iconset.applyIconToElement(\n            this.iconContainer,\n            icon.icon,\n            this.size || '',\n            this.label ? this.label : ''\n        );\n    }\n\n    private parseIcon(icon: string): { iconset: string; icon: string } {\n        const iconParts = icon.split(':');\n        let iconsetName = 'default';\n        let iconName = icon;\n        if (iconParts.length > 1) {\n            iconsetName = iconParts[0];\n            iconName = iconParts[1];\n        }\n        return { iconset: iconsetName, icon: iconName };\n    }\n\n    protected override async getUpdateComplete(): Promise<boolean> {\n        const complete = (await super.getUpdateComplete()) as boolean;\n        await this.updateIconPromise;\n        return complete;\n    }\n}\n"],
  "mappings": ";;;;;;;;;;;AAYA,SAAS,YAA4B;AACrC;AAAA,EACI;AAAA,EACA;AAAA,OACG;AACP,SAAS,iBAAiB;AAE1B,SAAS,uBAAuB;AAEhC,SAAS,gBAAgB;AAKlB,aAAM,aAAa,SAAS;AAAA,EAA5B;AAAA;AAmCH,SAAQ,kBAAkB,CAAC,UAA6B;AACpD,UAAI,CAAC,KAAK,MAAM;AACZ;AAAA,MACJ;AAEA,YAAM,OAAO,KAAK,UAAU,KAAK,IAAI;AACrC,UAAI,MAAM,OAAO,SAAS,KAAK,SAAS;AACpC,aAAK,oBAAoB,KAAK,WAAW;AAAA,MAC7C;AAAA,IACJ;AAAA;AAAA,EAhCgB,oBAA0B;AACtC,UAAM,kBAAkB;AACxB,WAAO,iBAAiB,oBAAoB,KAAK,eAAe;AAAA,EACpE;AAAA,EAEgB,uBAA6B;AACzC,UAAM,qBAAqB;AAC3B,WAAO,oBAAoB,oBAAoB,KAAK,eAAe;AAAA,EACvE;AAAA,EAEgB,eAAqB;AACjC,SAAK,oBAAoB,KAAK,WAAW;AAAA,EAC7C;AAAA,EAEgB,yBACZ,MACA,KACA,OACI;AACJ,UAAM,yBAAyB,MAAM,KAAK,KAAK;AAC/C,SAAK,oBAAoB,KAAK,WAAW;AAAA,EAC7C;AAAA,EAaQ,4BAAkC;AACtC,SAAK;AAAA,MACD,IAAI,MAAM,SAAS;AAAA,QACf,YAAY;AAAA,QACZ,SAAS;AAAA,QACT,UAAU;AAAA,MACd,CAAC;AAAA,IACL;AAAA,EACJ;AAAA,EAEmB,SAAyB;AACxC,QAAI,KAAK,MAAM;AACX,aAAO;AAAA;AAAA;AAAA,IAGX,WAAW,KAAK,KAAK;AACjB,aAAO;AAAA;AAAA,2BAEQ,KAAK,GAAG;AAAA,0BACT,UAAU,KAAK,KAAK,CAAC;AAAA,6BAClB,KAAK,yBAAyB;AAAA;AAAA;AAAA,IAGnD;AACA,WAAO,MAAM,OAAO;AAAA,EACxB;AAAA,EAEA,MAAc,aAA4B;AACtC,QAAI,KAAK,mBAAmB;AACxB,YAAM,KAAK;AAAA,IACf;AACA,QAAI,CAAC,KAAK,MAAM;AACZ,aAAO,QAAQ,QAAQ;AAAA,IAC3B;AAEA,UAAM,OAAO,KAAK,UAAU,KAAK,IAAI;AAErC,UAAM,UAAU,gBAAgB,YAAY,EAAE,WAAW,KAAK,OAAO;AACrE,QAAI,CAAC,SAAS;AAEV,aAAO,QAAQ,QAAQ;AAAA,IAC3B;AACA,QAAI,CAAC,KAAK,eAAe;AACrB,aAAO,QAAQ,QAAQ;AAAA,IAC3B;AACA,SAAK,cAAc,YAAY;AAC/B,WAAO,QAAQ;AAAA,MACX,KAAK;AAAA,MACL,KAAK;AAAA,MACL,KAAK,QAAQ;AAAA,MACb,KAAK,QAAQ,KAAK,QAAQ;AAAA,IAC9B;AAAA,EACJ;AAAA,EAEQ,UAAU,MAAiD;AAC/D,UAAM,YAAY,KAAK,MAAM,GAAG;AAChC,QAAI,cAAc;AAClB,QAAI,WAAW;AACf,QAAI,UAAU,SAAS,GAAG;AACtB,oBAAc,UAAU,CAAC;AACzB,iBAAW,UAAU,CAAC;AAAA,IAC1B;AACA,WAAO,EAAE,SAAS,aAAa,MAAM,SAAS;AAAA,EAClD;AAAA,EAEA,MAAyB,oBAAsC;AAC3D,UAAM,WAAY,MAAM,MAAM,kBAAkB;AAChD,UAAM,KAAK;AACX,WAAO;AAAA,EACX;AACJ;AAlHW;AAAA,EADN,SAAS;AAAA,GADD,KAEF;AAGA;AAAA,EADN,SAAS;AAAA,GAJD,KAKF;AAGC;AAAA,EADP,MAAM,YAAY;AAAA,GAPV,KAQD;",
  "names": []
}
